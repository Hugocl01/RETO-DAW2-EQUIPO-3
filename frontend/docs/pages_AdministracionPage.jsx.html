<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/AdministracionPage.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/AdministracionPage.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState, useContext, useEffect } from "react";
import { useParams, useNavigate } from "react-router-dom";
import { SeguridadContext } from "../contexts/SeguridadProvider";
import MenuAdministracion from "../components/MenuAdministracion";

// Importa los componentes de CRUD para cada sección
import CrudEquipos from "../components/Cruds/CrudEquipos";
import CrudJugadores from "../components/Cruds/CrudJugadores";
import CrudPartidos from "../components/Cruds/CrudPartidos";
import CrudPublicaciones from "../components/Cruds/CrudPublicaciones";
import CrudActas from "../components/Cruds/CrudActas";
import CrudUsuarios from "../components/Cruds/CrudUsuarios";
import CrudRetos from "../components/Cruds/CrudRetos";
import CrudImagenes from "../components/Cruds/CrudImagenes";
import CrudPatrocinadores from "../components/Cruds/CrudPatrocinadores";
import CrudFamilias from "../components/Cruds/CrudFamilias";
import CrudCiclos from "../components/Cruds/CrudCiclos";
import CrudCentros from "../components/Cruds/CrudCentros";
import CrudEstudios from "../components/Cruds/CrudEstudios";
import CrudInscripciones from "../components/Cruds/CrudInscripciones";
import CrudTorneo from "../components/Cruds/CrudTorneo";

// Importa los formularios para cada sección
import FormularioJugadores from "../components/Formularios/FormularioJugadores";
import FormularioPartidos from "../components/Formularios/FormularioPartidos";
import FormularioPublicaciones from "../components/Formularios/FormularioPublicaciones";
import FormularioActas from "../components/Formularios/FormularioActas";
import FormularioUsuarios from "../components/Formularios/FormularioUsuarios";
import FormularioRetos from "../components/Formularios/FormularioRetos";
import FormularioImagenes from "../components/Formularios/FormularioImagenes";
import FormularioPabellones from "../components/Formularios/FormularioPabellones";
import FormularioPatrocinadores from "../components/Formularios/FormularioPatrocinadores";
import FormularioFamilias from "../components/Formularios/FormularioFamilias";
import FormularioCiclos from "../components/Formularios/FormularioCiclos";
import FormularioCentros from "../components/Formularios/FormularioCentros";
import FormularioEstudios from "../components/Formularios/FormularioEstudios";
import Spinner from "../components/Spinner";
import { generateSlug } from "../utils/stringUtils";

/**
 * Componente `AdministracionPage` que gestiona la administración de diferentes secciones (equipos, jugadores, partidos, etc.).
 * Permite crear, editar y mostrar listas de elementos según la sección seleccionada.
 *
 * @component
 * @returns {JSX.Element} - Elemento JSX que representa la página de administración.
 */
function AdministracionPage() {
    // Obtenemos la sección actual desde la URL
    const { seccion } = useParams();
    const navigate = useNavigate();
    const { seguridad } = useContext(SeguridadContext);

    /**
     * Estado para determinar si estamos en modo "crear", "editar" o mostrando la lista (null).
     * @type {string | null}
     */
    const [modo, setModo] = useState(null);

    /**
     * Estado para almacenar el item seleccionado (para editar).
     * @type {Object | null}
     */
    const [itemSeleccionado, setItemSeleccionado] = useState(null);

    /**
     * Estado para almacenar la sección seleccionada (basada en el objeto de MenuAdministracion).
     * @type {string}
     */
    const [selectedSeccion, setSelectedSeccion] = useState(seccion ? generateSlug(seccion) : "");

    /**
     * Función que se pasa al menú y se ejecuta al seleccionar una sección.
     * 
     * @param {Object} seccionSeleccionada - La sección seleccionada en el menú.
     */
    const handleMenuSelect = (seccionSeleccionada) => {
        const seccionNombreSlug = generateSlug(seccionSeleccionada.nombre);  // Aseguramos que el nombre se convierte a slug
        if (modo != null) {
            if (window.confirm('¿Estás seguro de salir del apartado de edición / creación?')) {
                setSelectedSeccion(seccionNombreSlug);
                setModo(null);
            }
        } else {
            setSelectedSeccion(seccionNombreSlug);
            navigate(`/administracion/${seccionNombreSlug}`);
        }
    };

    /**
     * Efecto que se ejecuta cuando cambia el modo.
     * Actualiza la URL según la sección seleccionada.
     */
    useEffect(() => {
        if (modo == null) {
            navigate(`/administracion/${selectedSeccion}`);
        }
    }, [modo]);

    /**
     * Función para cambiar el modo (por ejemplo, al editar o crear).
     * 
     * @param {string} nuevoModo - El nuevo modo ("crear" o "editar").
     * @param {Object | null} item - El item seleccionado para editar (opcional).
     */
    const handleModoCambio = (nuevoModo, item = null) => {
        setModo(nuevoModo);
        setItemSeleccionado(item);
    };

    /**
     * Renderiza el formulario según la sección actual y el modo (crear o editar).
     * 
     * @returns {JSX.Element} - El formulario correspondiente a la sección seleccionada.
     */
    const renderFormulario = () => {
        switch (selectedSeccion) {
            case "jugadores":
                return (
                    &lt;FormularioJugadores
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "partidos":
                return (
                    &lt;FormularioPartidos
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "publicaciones":
                return (
                    &lt;FormularioPublicaciones
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "actas":
                return (
                    &lt;FormularioActas
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "usuarios":
                return (
                    &lt;FormularioUsuarios
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "retos":
                return (
                    &lt;FormularioRetos
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "imagenes":
                return (
                    &lt;FormularioImagenes
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "pabellones":
                return (
                    &lt;FormularioPabellones
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "patrocinadores":
                return (
                    &lt;FormularioPatrocinadores
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "familias":
                return (
                    &lt;FormularioFamilias
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "ciclos":
                return (
                    &lt;FormularioCiclos
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "centros":
                return (
                    &lt;FormularioCentros
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            case "estudios":
                return (
                    &lt;FormularioEstudios
                        datosIniciales={itemSeleccionado}
                        onGuardar={() => setModo(null)}
                        onCancelar={() => setModo(null)}
                    />
                );
            default:
                return &lt;div>Formulario no definido para esta sección.&lt;/div>;
        }
    };

    /**
     * Renderiza el componente de CRUD (lista y botones) según la sección actual.
     * 
     * @returns {JSX.Element} - El componente de CRUD correspondiente a la sección seleccionada.
     */
    const renderCrud = () => {
        switch (selectedSeccion) {
            case "torneo":
                return &lt;CrudTorneo onModoCambio={handleModoCambio} />;
            case "equipos":
                return &lt;CrudEquipos onModoCambio={handleModoCambio} />;
            case "jugadores":
                return &lt;CrudJugadores onModoCambio={handleModoCambio} />;
            case "partidos":
                return &lt;CrudPartidos onModoCambio={handleModoCambio} />;
            case "publicaciones":
                return &lt;CrudPublicaciones onModoCambio={handleModoCambio} />;
            case "actas":
                return &lt;CrudActas onModoCambio={handleModoCambio} />;
            case "usuarios":
                return &lt;CrudUsuarios onModoCambio={handleModoCambio} />;
            case "retos":
                return &lt;CrudRetos onModoCambio={handleModoCambio} />;
            case "imagenes":
                return &lt;CrudImagenes onModoCambio={handleModoCambio} />;
            case "patrocinadores":
                return &lt;CrudPatrocinadores onModoCambio={handleModoCambio} />;
            case "familias":
                return &lt;CrudFamilias onModoCambio={handleModoCambio} />;
            case "ciclos":
                return &lt;CrudCiclos onModoCambio={handleModoCambio} />;
            case "centros":
                return &lt;CrudCentros onModoCambio={handleModoCambio} />;
            case "estudios":
                return &lt;CrudEstudios onModoCambio={handleModoCambio} />;
            case "inscripciones":
                return &lt;CrudInscripciones onModoCambio={handleModoCambio} />;
            default:
                return &lt;div>CRUD no definido para esta sección.&lt;/div>;
        }
    };

    return (
        &lt;div className="d-flex">
            {/* Se le pasa la función onSelect al menú */}
            &lt;MenuAdministracion onSelect={handleMenuSelect} />
            &lt;div className="flex-grow-1 p-4">
                {modo ? renderFormulario() : renderCrud()}
            &lt;/div>
        &lt;/div>
    );
}

export default AdministracionPage;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#AdministracionPage">AdministracionPage</a></li><li><a href="global.html#AppEnrutador">AppEnrutador</a></li><li><a href="global.html#AppLayout">AppLayout</a></li><li><a href="global.html#BaseLayout">BaseLayout</a></li><li><a href="global.html#Carousel">Carousel</a></li><li><a href="global.html#Clasificacion">Clasificacion</a></li><li><a href="global.html#ClasificacionPage">ClasificacionPage</a></li><li><a href="global.html#CrudCentros">CrudCentros</a></li><li><a href="global.html#CrudCiclos">CrudCiclos</a></li><li><a href="global.html#CrudEquipos">CrudEquipos</a></li><li><a href="global.html#CrudEstudios">CrudEstudios</a></li><li><a href="global.html#CrudFamilias">CrudFamilias</a></li><li><a href="global.html#CrudImagenes">CrudImagenes</a></li><li><a href="global.html#CrudInscripciones">CrudInscripciones</a></li><li><a href="global.html#CrudJugadores">CrudJugadores</a></li><li><a href="global.html#CrudPartidos">CrudPartidos</a></li><li><a href="global.html#CrudPatrocinadores">CrudPatrocinadores</a></li><li><a href="global.html#CrudPublicaciones">CrudPublicaciones</a></li><li><a href="global.html#CrudRetos">CrudRetos</a></li><li><a href="global.html#CrudTorneos">CrudTorneos</a></li><li><a href="global.html#CrudUsuarios">CrudUsuarios</a></li><li><a href="global.html#CuadroClasificacion">CuadroClasificacion</a></li><li><a href="global.html#DetalleEstadisticaPage">DetalleEstadisticaPage</a></li><li><a href="global.html#DetalleJugadorPage">DetalleJugadorPage</a></li><li><a href="global.html#DetallePartidoPage">DetallePartidoPage</a></li><li><a href="global.html#DetallesEquipoPage">DetallesEquipoPage</a></li><li><a href="global.html#Equipo">Equipo</a></li><li><a href="global.html#EquiposPage">EquiposPage</a></li><li><a href="global.html#ErrorPage">ErrorPage</a></li><li><a href="global.html#EstadisticasPage">EstadisticasPage</a></li><li><a href="global.html#Footer">Footer</a></li><li><a href="global.html#FormularioCentros">FormularioCentros</a></li><li><a href="global.html#FormularioCiclos">FormularioCiclos</a></li><li><a href="global.html#FormularioEquipos">FormularioEquipos</a></li><li><a href="global.html#FormularioEstudios">FormularioEstudios</a></li><li><a href="global.html#FormularioFamilias">FormularioFamilias</a></li><li><a href="global.html#FormularioJugadores">FormularioJugadores</a></li><li><a href="global.html#FormularioPartidos">FormularioPartidos</a></li><li><a href="global.html#FormularioPatrocinadores">FormularioPatrocinadores</a></li><li><a href="global.html#FormularioPublicaciones">FormularioPublicaciones</a></li><li><a href="global.html#FormularioRetos">FormularioRetos</a></li><li><a href="global.html#FormularioUsuarios">FormularioUsuarios</a></li><li><a href="global.html#Galeria">Galeria</a></li><li><a href="global.html#GaleriaPage">GaleriaPage</a></li><li><a href="global.html#Header">Header</a></li><li><a href="global.html#InfoTorneo">InfoTorneo</a></li><li><a href="global.html#Inicio">Inicio</a></li><li><a href="global.html#InicioPage">InicioPage</a></li><li><a href="global.html#Inscribirse">Inscribirse</a></li><li><a href="global.html#InscribirsePage">InscribirsePage</a></li><li><a href="global.html#Jugador">Jugador</a></li><li><a href="global.html#JugadorLabel">JugadorLabel</a></li><li><a href="global.html#Login">Login</a></li><li><a href="global.html#LoginPage">LoginPage</a></li><li><a href="global.html#MenuAdministracion">MenuAdministracion</a></li><li><a href="global.html#Migas">Migas</a></li><li><a href="global.html#OrganizacionPage">OrganizacionPage</a></li><li><a href="global.html#Paginador">Paginador</a></li><li><a href="global.html#Paginator">Paginator</a></li><li><a href="global.html#Partido">Partido</a></li><li><a href="global.html#Partidos">Partidos</a></li><li><a href="global.html#PartidosPage">PartidosPage</a></li><li><a href="global.html#RetoPage">RetoPage</a></li><li><a href="global.html#Retos">Retos</a></li><li><a href="global.html#RutaPrivada">RutaPrivada</a></li><li><a href="global.html#SeguridadContext">SeguridadContext</a></li><li><a href="global.html#SeguridadProvider">SeguridadProvider</a></li><li><a href="global.html#SetPasswordForm">SetPasswordForm</a></li><li><a href="global.html#Spinner">Spinner</a></li><li><a href="global.html#TablaEquipos">TablaEquipos</a></li><li><a href="global.html#TablaJugadores">TablaJugadores</a></li><li><a href="global.html#TablaPartidos">TablaPartidos</a></li><li><a href="global.html#TarjetaFormulario">TarjetaFormulario</a></li><li><a href="global.html#TorneoPage">TorneoPage</a></li><li><a href="global.html#YouTubeLiveIndicator">YouTubeLiveIndicator</a></li><li><a href="global.html#cargarOpciones">cargarOpciones</a></li><li><a href="global.html#fetchCentros">fetchCentros</a></li><li><a href="global.html#fetchCiclos">fetchCiclos</a></li><li><a href="global.html#fetchData">fetchData</a></li><li><a href="global.html#fetchEquipos">fetchEquipos</a></li><li><a href="global.html#fetchEstudios">fetchEstudios</a></li><li><a href="global.html#fetchFamilias">fetchFamilias</a></li><li><a href="global.html#fetchIncidencias">fetchIncidencias</a></li><li><a href="global.html#fetchTiposPerfil">fetchTiposPerfil</a></li><li><a href="global.html#generateSlug">generateSlug</a></li><li><a href="global.html#subirImagen">subirImagen</a></li><li><a href="global.html#useCrud">useCrud</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Mar 06 2025 01:49:56 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
