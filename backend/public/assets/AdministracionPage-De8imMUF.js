import{r as m,d as re,c as se,a as ae,j as e,S as T}from"./index-DYi0Vkv2.js";const D=t=>{let o=t.toLowerCase();return o=o.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,""),o};function de({onSelect:t}){var a,N;const{seguridad:o}=m.useContext(re),{seccion:i}=se();ae();const[n,s]=m.useState([]),[l,r]=m.useState(null),[c,f]=m.useState(!0),[b,p]=m.useState(!1),[h,j]=m.useState(!1),v=m.useRef(null),[y,x]=m.useState(!1),d=()=>{p(S=>!S)};m.useEffect(()=>{const S="http://23.23.87.65/api/";(async()=>{var C,w,L;if((w=(C=o==null?void 0:o.user)==null?void 0:C.perfil)!=null&&w.id)try{const F=localStorage.getItem("token"),O=await fetch(`${S}perfiles/${o.user.perfil.id}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:F?`Bearer ${F}`:""},credentials:"include"});if(!O.ok)throw new Error("Error al obtener secciones");const A=await O.json();s(((L=A.perfiles)==null?void 0:L.secciones)||[])}catch(F){console.error("Error al obtener secciones:",F)}finally{f(!1)}})()},[(N=(a=o==null?void 0:o.user)==null?void 0:a.perfil)==null?void 0:N.id]),m.useEffect(()=>{if(n.length===0)return;const S=i?D(i):"",E=n.find(C=>D(C.nombre)===S)||n[0]||null;r(E),E&&t(E)},[n,i]),m.useEffect(()=>{b&&d()},[i]);const u=S=>{t(S),b&&d()};return e.jsxs("div",{className:"menuAdmin",children:[e.jsxs("aside",{className:"p-3",style:{minWidth:"240px",height:"100vh"},children:[e.jsx("h4",{className:"text-center",children:"Administración"}),c?e.jsx("p",{className:"text-center",children:"Cargando secciones..."}):e.jsx("ul",{className:"list-group",children:n.length>0?n.map(S=>e.jsx("li",{className:`list-group-item ${(l==null?void 0:l.id)===S.id?"active":""}`,role:"button",onClick:()=>u(S),children:S.nombre},S.id)):e.jsx("li",{className:"list-group-item text-center text-muted",children:"No hay secciones disponibles"})})]}),e.jsxs("div",{className:"sidebarAdministracion p-2",ref:v,onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{children:[e.jsxs("nav",{id:"sidenav-1",className:`sidenav ${b?"active":""}`,onClick:S=>S.stopPropagation(),children:[e.jsx("h4",{className:"text-center mt-4",children:"Administración"}),c?e.jsx("p",{className:"text-center",children:"Cargando secciones..."}):e.jsx("ul",{className:"mx-4 list-group",children:n.length>0?n.map(S=>e.jsx("li",{className:`list-group-item ${(l==null?void 0:l.id)===S.id?"active":""}`,role:"button",onClick:()=>u(S),children:S.nombre},S.id)):e.jsx("li",{className:"list-group-item text-center text-muted",children:"No hay secciones disponibles"})})]}),e.jsx("button",{id:"sidenav-toggle",className:`toggler-btn ${b?"active":""}`,onClick:d,children:e.jsx("i",{className:"bi bi-list-task botonMenuAdmin p-2 rounded border border-primary text-dark"})})]}),b&&e.jsx("div",{className:"backdrop",onClick:d})]})]})}const k=t=>{const o="http://23.23.87.65/api/",[i,n]=m.useState([]),[s,l]=m.useState(!1),[r,c]=m.useState(null),[f,b]=m.useState([]),p=D(t.nombre),h=async()=>{var d;l(!0),c(null);try{const u=await fetch(`${o}${p}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!u.ok)throw new Error("Error al obtener los datos.");const a=await u.json();n(a[p]||[]),((d=a[p])==null?void 0:d.length)>0?b(Object.keys(a[p][0])):b([])}catch(u){c(u.message||"Error de red.")}finally{l(!1)}},j=async d=>{try{if(!(await fetch(`${o}${p}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(d)})).ok)throw new Error("Error al crear el registro.");h()}catch(u){c(u.message||"Error al crear el registro.")}},v=async(d,u)=>{try{if(!(await fetch(`${o}${p}/${d}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(u)})).ok)throw new Error("Error al actualizar.");h()}catch(a){c(a.message||"Error al actualizar.")}},y=async d=>{try{if(!(await fetch(`${o}${p}/${d}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar.");h()}catch(u){c(u.message||"Error al eliminar.")}},x=(d,u)=>{u==="crear"?j(d):u==="editar"&&v(d.id,d)};return m.useEffect(()=>{t&&h()},[t]),{items:i,loading:s,error:r,columns:f,fetchItems:h,createItem:j,updateItem:v,deleteItem:y,onGuardar:x}},_=({currentPage:t,totalPages:o,onPageChange:i})=>{const n=()=>{t>1&&i(t-1)},s=()=>{t<o&&i(t+1)};return e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:[e.jsx("button",{className:"btn btn-primary",onClick:n,disabled:t===1,children:"Anterior"}),e.jsxs("span",{children:["Página ",t," de ",o]}),e.jsx("button",{className:"btn btn-primary",onClick:s,disabled:t===o||o===0,children:"Siguiente"})]})};function ue({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Equipos"}),[]),{items:i,loading:n,error:s}=k(o),[l,r]=m.useState(""),[c,f]=m.useState(1),b=5,p=i.filter(d=>{var a,N,S,E;const u=l.toLowerCase();return d.nombre.toLowerCase().includes(u)||d.centro.toLowerCase().includes(u)||d.grupo.toLowerCase().includes(u)||d.entrenador.toLowerCase().includes(u)||((N=(a=d.inscripcion)==null?void 0:a.estado)==null?void 0:N.toString().toLowerCase().includes(u))||""||((E=(S=d.stats)==null?void 0:S.goles)==null?void 0:E.toString().includes(u))||""}),h=p.length,j=Math.ceil(h/b),v=(c-1)*b,y=p.slice(v,v+b),x=d=>{r(d.target.value),f(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Equipos"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar equipos...",value:l,onChange:x})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Centro"}),e.jsx("th",{children:"Grupo"}),e.jsx("th",{children:"Entrenador"}),e.jsx("th",{children:"Estado Inscripción"}),e.jsx("th",{children:"Goles"})]})}),e.jsxs("tbody",{children:[y.map(d=>{var u,a;return e.jsxs("tr",{children:[e.jsx("td",{children:d.nombre}),e.jsx("td",{children:d.centro}),e.jsx("td",{children:d.grupo}),e.jsx("td",{children:d.entrenador}),e.jsx("td",{children:(u=d.inscripcion)==null?void 0:u.estado}),e.jsx("td",{children:(a=d.stats)==null?void 0:a.goles})]},d.slug)}),y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center",children:"No hay equipos disponibles."})})]})]}),e.jsx(_,{currentPage:c,totalPages:j,onPageChange:d=>f(d)})]})}function he({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Jugadores"}),[]),{items:i,loading:n,error:s}=k(o),[l,r]=m.useState(""),[c,f]=m.useState(1),b=5,p=i.filter(d=>{const u=l.toLowerCase();return d.nombre.toLowerCase().includes(u)||d.equipo.toLowerCase().includes(u)||d.estudio.toLowerCase().includes(u)||d.dni.toLowerCase().includes(u)||d.email.toLowerCase().includes(u)||d.telefono.includes(u)}),h=p.length,j=Math.ceil(h/b),v=(c-1)*b,y=p.slice(v,v+b),x=d=>{r(d.target.value),f(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Jugadores"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar jugadores...",value:l,onChange:x})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Equipo"}),e.jsx("th",{children:"Estudio"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Teléfono"})]})}),e.jsxs("tbody",{children:[y.map(d=>e.jsxs("tr",{children:[e.jsx("td",{children:d.nombre}),e.jsx("td",{children:d.equipo}),e.jsx("td",{children:d.estudio}),e.jsx("td",{children:d.email}),e.jsx("td",{children:d.telefono})]},d.slug)),y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay jugadores disponibles."})})]})]}),e.jsx(_,{currentPage:c,totalPages:j,onPageChange:f})]})}function me({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Partidos"}),[]),{items:i,loading:n,error:s}=k(o),[l,r]=m.useState(""),[c,f]=m.useState(1),b=5;console.log(i);const p=i.filter(d=>{const u=l.toLowerCase(),a=N=>N?N.toLowerCase():"";return a(d.fecha).includes(u)||a(d["equipo local"]).includes(u)||a(d["equipo visitante"]).includes(u)||a(d.pabellón).includes(u)||a(d.grupo).includes(u)||a(d.tipo).includes(u)}),h=p.length,j=Math.ceil(h/b),v=(c-1)*b,y=p.slice(v,v+b),x=d=>{r(d.target.value),f(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Partidos"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar partidos...",value:l,onChange:x})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Equipo Local"}),e.jsx("th",{children:"Equipo Visitante"}),e.jsx("th",{children:"Pabellón"}),e.jsx("th",{children:"Grupo"}),e.jsx("th",{children:"Tipo"}),e.jsx("th",{children:"Goles Local"}),e.jsx("th",{children:"Goles Visitante"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[y.map(d=>e.jsxs("tr",{children:[e.jsx("td",{children:d.fecha}),e.jsx("td",{children:d["equipo local"].nombre}),e.jsx("td",{children:d["equipo visitante"].nombre}),e.jsx("td",{children:d.pabellón}),e.jsx("td",{children:d.grupo}),e.jsx("td",{children:d.tipo}),e.jsx("td",{children:d["goles local"]}),e.jsx("td",{children:d["goles visitante"]}),e.jsx("td",{className:"d-flex",children:e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",d),children:"Actas"})})]},d.slug)),y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center",children:"No hay partidos disponibles."})})]})]}),e.jsx(_,{currentPage:c,totalPages:j,onPageChange:d=>f(d)})]})}function pe({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Publicaciones"}),[]),{items:i,loading:n,error:s,deleteItem:l}=k(o),[r,c]=m.useState(""),[f,b]=m.useState(1),p=5,h=i.filter(u=>{const a=r.toLowerCase();return u.titulo.toLowerCase().includes(a)||u.portada.toLowerCase().includes(a)||u.contenido.toLowerCase().includes(a)||u.seccion.toLowerCase().includes(a)}),j=h.length,v=Math.ceil(j/p),y=(f-1)*p,x=h.slice(y,y+p),d=u=>{c(u.target.value),b(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Publicaciones"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar publicaciones...",value:r,onChange:d}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Crear Publicacion"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Titulo"}),e.jsx("th",{children:"Portada"}),e.jsx("th",{children:"Contenido"}),e.jsx("th",{children:"Sección"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[x.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.titulo}),e.jsx("td",{children:u.portada}),e.jsx("td",{children:u.contenido}),e.jsx("td",{children:u.seccion}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",u),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>l(u.id),children:"Eliminar"})]})]},u.id)),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay publicaciones disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:v,onPageChange:b})]})}function be({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Jugadores"}),[]),{items:i,loading:n,error:s,deleteItem:l}=k(o),[r,c]=m.useState(""),[f,b]=m.useState(1),p=5,h=i.filter(u=>{const a=r.toLowerCase();return u.nombre.toLowerCase().includes(a)||u.equipo.toLowerCase().includes(a)||u.estudio.toLowerCase().includes(a)||u.dni.toLowerCase().includes(a)||u.email.toLowerCase().includes(a)||u.telefono.includes(a)}),j=h.length,v=Math.ceil(j/p),y=(f-1)*p,x=h.slice(y,y+p),d=u=>{c(u.target.value),b(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Jugadores"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar jugadores...",value:r,onChange:d})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Equipo"}),e.jsx("th",{children:"Estudio"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Teléfono"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[x.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.nombre}),e.jsx("td",{children:u.equipo}),e.jsx("td",{children:u.estudio}),e.jsx("td",{children:u.email}),e.jsx("td",{children:u.telefono}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",u),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>l(u.slug),children:"Eliminar"})]})]},u.slug)),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay jugadores disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:v,onPageChange:b})]})}function fe({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Usuarios"}),[]),{items:i,loading:n,error:s,deleteItem:l}=k(o),[r,c]=m.useState(""),[f,b]=m.useState(1),p=5,h=a=>a?a.toString().toLowerCase():"",j=i.filter(a=>{var S;const N=r.toLowerCase();return h(a.nombre).includes(N)||h(a.email).includes(N)||h((S=a.perfil)==null?void 0:S.tipo).includes(N)}),v=j.length,y=Math.ceil(v/p),x=(f-1)*p,d=j.slice(x,x+p),u=a=>{c(a.target.value),b(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Usuarios"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-4 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar usuarios...",value:r,onChange:u}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Usuario"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Rol"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[d.map(a=>{var N;return e.jsxs("tr",{children:[e.jsx("td",{children:a.nombre}),e.jsx("td",{children:a.email}),e.jsx("td",{children:((N=a.perfil)==null?void 0:N.tipo)||"Sin rol"}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",a),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>l(a.id),children:"Eliminar"})]})]},a.id)}),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No hay usuarios disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:a=>b(a)})]})}function xe({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Retos"}),[]),{items:i,loading:n,error:s,deleteItem:l}=k(o),[r,c]=m.useState(""),[f,b]=m.useState(1),p=5,h=a=>a?a.toString().toLowerCase():"",j=i.filter(a=>{var S,E,C;const N=r.toLowerCase();return h(a.titulo).includes(N)||h(a.texto).includes(N)||h((S=a.estudio)==null?void 0:S.centro).includes(N)||h((E=a.estudio)==null?void 0:E.ciclo).includes(N)||h((C=a.estudio)==null?void 0:C.curso).includes(N)}),v=j.length,y=Math.ceil(v/p),x=(f-1)*p,d=j.slice(x,x+p),u=a=>{c(a.target.value),b(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Retos"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar retos...",value:r,onChange:u}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Crear Reto"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Título"}),e.jsx("th",{children:"Descripción"}),e.jsx("th",{children:"Centro"}),e.jsx("th",{children:"Ciclo"}),e.jsx("th",{children:"Curso"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[d.map(a=>{var N,S,E;return e.jsxs("tr",{children:[e.jsx("td",{children:a.titulo}),e.jsx("td",{children:a.texto}),e.jsx("td",{children:((N=a.estudio)==null?void 0:N.centro)||"N/A"}),e.jsx("td",{children:((S=a.estudio)==null?void 0:S.ciclo)||"N/A"}),e.jsx("td",{children:((E=a.estudio)==null?void 0:E.curso)||"N/A"}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",a),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>l(a.id),children:"Eliminar"})]})]},a.id)}),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay retos disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:a=>b(a)})]})}function ge({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Imagenes"}),[]),{items:i}=k(o),[n,s]=m.useState(""),[l,r]=m.useState(1),c=5,f=i.filter(h=>{n.toLowerCase()});f.length;const b=(l-1)*c;f.slice(b,b+c);const p=h=>{s(h.target.value),r(1)};return e.jsxs("div",{children:[e.jsx("h2",{children:"Imágenes"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Buscar imágenes...",value:n,onChange:p}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Añadir Imagen"})]})]})}function je({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Patrocinadores"}),[]),{items:i,loading:n,error:s,deleteItem:l}=k(o),[r,c]=m.useState(""),[f,b]=m.useState(1),p=5,h=a=>a?a.toString().toLowerCase():"",j=i.filter(a=>{const N=r.toLowerCase();return h(a.nombre).includes(N)||h(a.landing_page).includes(N)}),v=j.length,y=Math.ceil(v/p),x=(f-1)*p,d=j.slice(x,x+p),u=a=>{c(a.target.value),b(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Patrocinadores"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar patrocinadores...",value:r,onChange:u}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Crear Patrocinador"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Landing Page"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[d.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.nombre}),e.jsx("td",{children:e.jsx("a",{href:a.landing_page,target:"_blank",rel:"noopener noreferrer",children:a.landing_page})}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",a),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>l(a.id),children:"Eliminar"})]})]},a.id)),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay patrocinadores disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:a=>b(a)})]})}function ve({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Familias"}),[]),{items:i,loading:n,error:s,deleteItem:l}=k(o),[r,c]=m.useState(""),[f,b]=m.useState(1),p=5,h=i.filter(u=>u.nombre.toLowerCase().includes(r.toLowerCase())),j=h.length,v=Math.ceil(j/p),y=(f-1)*p,x=h.slice(y,y+p),d=u=>{c(u.target.value),b(1)};return n?e.jsx("p",{children:"Cargando familias..."}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Familias"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar familias...",value:r,onChange:d}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Familia"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[x.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.nombre}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",u),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>l(u.id),children:"Eliminar"})]})]},u.id)),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"text-center",children:"No hay familias disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:v,onPageChange:b})]})}function ye({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Ciclos"}),[]),{items:i,loading:n,error:s,deleteItem:l}=k(o),[r,c]=m.useState(""),[f,b]=m.useState(1),p=5,h=a=>a?a.toString().toLowerCase():"",j=i.filter(a=>{var S;const N=r.toLowerCase();return h(a.nombre).includes(N)||h((S=a.familia_id)==null?void 0:S.nombre).includes(N)}),v=j.length,y=Math.ceil(v/p),x=(f-1)*p,d=j.slice(x,x+p),u=a=>{c(a.target.value),b(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Ciclos Formativos"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar ciclos...",value:r,onChange:u})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Familia Profesional"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[d.map(a=>{var N;return e.jsxs("tr",{children:[e.jsx("td",{children:a.nombre}),e.jsx("td",{children:((N=a.familia_id)==null?void 0:N.nombre)||"Sin familia"}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",a),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>l(a.id),children:"Eliminar"})]})]},a.id)}),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay ciclos disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:a=>b(a)})]})}function Ce({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Centros"}),[]),{items:i,loading:n,error:s,deleteItem:l}=k(o),[r,c]=m.useState(""),[f,b]=m.useState(1),p=5,h=a=>a?a.toString().toLowerCase():"",j=i.filter(a=>{const N=r.toLowerCase();return h(a.nombre).includes(N)||h(a.landing_page).includes(N)}),v=j.length,y=Math.ceil(v/p),x=(f-1)*p,d=j.slice(x,x+p),u=a=>{c(a.target.value),b(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Centros"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control flex-grow-1",placeholder:"Buscar centros...",value:r,onChange:u}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Centro"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Landing Page"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[d.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.nombre}),e.jsx("td",{children:e.jsx("a",{href:a.landing_page,target:"_blank",rel:"noopener noreferrer",children:a.landing_page})}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",a),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>l(a.id),children:"Eliminar"})]})]},a.id)),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay centros disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:a=>b(a)})]})}function Ne({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Estudios"}),[]),{items:i,loading:n,error:s,deleteItem:l}=k(o),[r,c]=m.useState(""),[f,b]=m.useState(1),p=5,h=a=>a?a.toString().toLowerCase():"",j=i.filter(a=>{const N=r.toLowerCase();return h(a.centro).includes(N)||h(a.ciclo).includes(N)}),v=j.length,y=Math.ceil(v/p),x=(f-1)*p,d=j.slice(x,x+p),u=a=>{c(a.target.value),b(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Estudios"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar estudios...",value:r,onChange:u}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Estudio"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Centro"}),e.jsx("th",{children:"Ciclo"}),e.jsx("th",{children:"Curso"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[d.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.centro}),e.jsx("td",{children:a.ciclo}),e.jsx("td",{children:a.curso}),e.jsx("td",{className:"d-flex",children:e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>l(a.id),children:"Eliminar"})})]},a.id)),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay estudios disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:a=>b(a)})]})}function Se(){const t=m.useMemo(()=>({nombre:"Inscripciones"}),[]),{loading:o,error:i}=k(t),[n,s]=m.useState([]),[l,r]=m.useState(""),[c,f]=m.useState(1),b=5,[p,h]=m.useState(!1);m.useEffect(()=>{j()},[]);async function j(){const C="http://23.23.87.65/api/";try{h(!0);const w=await fetch(`${C}inscripciones`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!w.ok)throw new Error("Error al obtener las inscripciones.");const L=await w.json();s(L.inscripciones)}catch(w){console.error("Error al cargar la tabla:",w)}finally{setTimeout(()=>h(!1),500)}}async function v(C,w){try{if(h(!0),!(await fetch(`http://23.23.87.65/api/cambiar-estado/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({estado:w})})).ok)throw new Error("Error al actualizar el estado de la inscripción.");await j()}catch(L){console.error("Error al actualizar la inscripción:",L)}}const y=async C=>{await v(C,3)},x=async C=>{await v(C,4)},d=C=>C?C.toString().toLowerCase():"",u=n.filter(C=>{const w=l.toLowerCase();return d(C.nombre).includes(w)||d(C.comentarios).includes(w)||d(C.estado).includes(w)}),a=u.length,N=Math.ceil(a/b),S=(c-1)*b,E=u.slice(S,S+b);return o||p?e.jsx(T,{}):i?e.jsxs("p",{children:["Error: ",i]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Inscripciones"}),e.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar inscripciones...",value:l,onChange:C=>r(C.target.value)})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Comentarios"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[E.map(C=>e.jsxs("tr",{children:[e.jsx("td",{children:C.nombre}),e.jsx("td",{children:C.comentarios}),e.jsx("td",{children:C.estado}),e.jsxs("td",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>y(C),disabled:C.estado==="No Activa",children:"Aprobar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>x(C),disabled:C.estado==="No Activa",children:"Rechazar"})]})]},C.id)),E.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay inscripciones disponibles."})})]})]}),e.jsx(_,{currentPage:c,totalPages:N,onPageChange:C=>f(C)})]})}const M="http://23.23.87.65/api/";async function we(){try{const t=await fetch(`${M}equipos`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error("Error al obtener los datos.");return(await t.json()).equipos||[]}catch(t){return console.error("Error al recoger los equipos:",t),[]}}function Ee(){const[t,o]=m.useState(null),[i,n]=m.useState(!1),[s,l]=m.useState(null),[r,c]=m.useState(""),[f,b]=m.useState(""),[p,h]=m.useState([]),[j,v]=m.useState(1),y=5;m.useEffect(()=>{const w=new Date().toISOString().split("T")[0];c(w),b(w),x()},[]);const x=async()=>{n(!0);try{const C=localStorage.getItem("token"),F=(await(await fetch(`${M}partidos`,{method:"GET",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}})).json()).partidos||[],O=new Date,A=$=>{const V=new Date($);return V.setHours(0,0,0,0),V},le=F.some($=>A($.fecha)>=A(O));o({iniciado:le});const ce=await we();h(ce)}catch(C){console.error(C),l(C.message)}finally{n(!1)}},d=async()=>{if(!r){alert("Por favor, selecciona una fecha.");return}if(new Date(r)<=new Date(f)){alert("Por favor, selecciona una fecha posterior.");return}n(!0);try{const C=localStorage.getItem("token");if(!(await fetch(`${M}comienzo-torneo`,{method:"POST",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({fecha:r})})).ok)throw new Error("Error al iniciar el torneo");o({iniciado:!0}),x()}catch(C){console.error(C),l(C.message)}finally{n(!1)}},u=async()=>{n(!0);try{const C=localStorage.getItem("token");if(!(await fetch(`${M}reinicio-torneo`,{method:"POST",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({fecha:r})})).ok)throw new Error("Error al reiniciar el torneo");o({iniciado:!1}),x()}catch(C){console.error(C),l(C.message)}finally{n(!1)}},a=p.length,N=Math.ceil(a/y),S=(j-1)*y,E=p.slice(S,S+y);return i?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"w-50",children:[e.jsx("h2",{children:"Detalles del Torneo"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Estado:"})," ",t!=null&&t.iniciado?"Iniciado":"No Iniciado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha seleccionada:"})," ",r||"No seleccionada"]})]}),e.jsxs("div",{className:"w-50",children:[e.jsxs("div",{className:"mb-3 w-75",children:[e.jsx("label",{htmlFor:"fecha",className:"form-label",children:"Selecciona la fecha del torneo:"}),e.jsx("input",{type:"date",id:"fecha",className:"form-control",value:r,onChange:C=>c(C.target.value)})]}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx("button",{className:"btn btn-success",onClick:d,disabled:t==null?void 0:t.iniciado,children:"Iniciar Torneo"}),e.jsx("button",{className:"btn btn-danger",onClick:u,disabled:!(t!=null&&t.iniciado),children:"Reiniciar Torneo"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{children:"Participantes"}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre del Equipo"}),e.jsx("th",{children:"Grupo"})]})}),e.jsxs("tbody",{children:[E.map((C,w)=>e.jsxs("tr",{children:[e.jsx("td",{children:C.nombre}),e.jsx("td",{children:C.grupo})]},w)),E.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"text-center",children:"No hay equipos disponibles."})})]})]}),e.jsx(_,{currentPage:j,totalPages:N,onPageChange:v})]})]})}const ke="http://23.23.87.65/api/";async function I(t){const o=localStorage.getItem("token"),i=sessionStorage.getItem(t);if(i)return console.log(`Datos cargados desde sessionStorage para el endpoint: ${t}`),JSON.parse(i);try{const n=await fetch(`${ke}${t}`,{headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Error en la petición: ${n.statusText}`);const s=await n.json();return console.log(`Datos recibidos de la API para ${t}:`,s),sessionStorage.setItem(t,JSON.stringify(s)),s}catch(n){return console.error(`Error al obtener ${t}:`,n),[]}}const P=()=>({centros:()=>I("lista/centros"),ciclos:()=>I("lista/ciclos"),equipos:()=>I("lista/equipos"),estudios:()=>I("lista/estudios"),familias:()=>I("lista/familias"),incidencias:()=>I("lista/incidencias"),jugadores:()=>I("lista/jugadores"),perfiles:()=>I("lista/perfiles"),partidos:()=>I("lista/partidos"),patrocinadores:()=>I("lista/patrocinadores"),retos:()=>I("lista/retos"),ongs:()=>I("lista/ongs"),pabellones:()=>I("lista/pabellones")}),Pe=async()=>{try{console.log("Cargando equipos desde la API...");const t=await P().equipos();return t?Object.keys(t).map(o=>({value:o,label:t[o]})):[]}catch(t){return console.error("Error al obtener los equipos",t),[]}},_e=async()=>{try{console.log("Cargando estudios desde la API...");const t=await P().estudios();return t?Object.keys(t).map(o=>({value:o,label:t[o]})):[]}catch(t){return console.error("Error al obtener los estudios",t),[]}};function Ie({datosIniciales:t,onGuardar:o,onCancelar:i}){const[n,s]=m.useState({nombre_completo:"",equipo_id:"",estudio_id:"",capitan:!1}),[l,r]=m.useState([]),[c,f]=m.useState([]);m.useEffect(()=>{(async()=>{const v=await Pe();r(v)})(),(async()=>{const v=await _e();f(v)})()},[]),m.useEffect(()=>{t&&s({...t,equipo_id:t.equipo_id||"",estudio_id:t.estudio_id||"",capitan:t.capitan||!1})},[t]);const b=h=>{const{name:j,value:v,type:y,checked:x}=h.target;s({...n,[j]:y==="checkbox"?x:v})},p=h=>{h.preventDefault(),o(n)};return e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nombre_completo",children:"Nombre Completo"}),e.jsx("input",{type:"text",name:"nombre_completo",id:"nombre_completo",placeholder:"Ingrese su nombre completo",value:n.nombre_completo||"",onChange:b})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"equipo_id",children:"Equipo"}),e.jsxs("select",{name:"equipo_id",id:"equipo_id",value:n.equipo_id||"",onChange:b,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un equipo"}),l.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"estudio_id",children:"Estudio"}),e.jsxs("select",{name:"estudio_id",id:"estudio_id",value:n.estudio_id||"",onChange:b,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un estudio"}),c.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"capitan",children:"Capitan"}),e.jsx("input",{type:"checkbox",name:"capitan",id:"capitan",checked:n.capitan||!1,onChange:b})]}),e.jsxs("div",{children:[e.jsx("button",{type:"submit",children:"Guardar"}),e.jsx("button",{type:"button",onClick:i,children:"Cancelar"})]})]})}const Te=async()=>{try{console.log("Cargando incidencias desde la API...");const t=await P().incidencias();return t?Object.keys(t).map(o=>({value:o,label:t[o]})):[]}catch(t){return console.error("Error al obtener las incidencias",t),[]}};function Le({datosIniciales:t,onGuardar:o,onCancelar:i}){const[n,s]=m.useState(""),[l,r]=m.useState([]),[c,f]=m.useState(t["equipo local"].nombre),[b,p]=m.useState(t["equipo visitante"].nombre),[h,j]=m.useState([]),[v,y]=m.useState(""),[x,d]=m.useState(""),[u,a]=m.useState(""),[N,S]=m.useState("");m.useEffect(()=>{(async()=>{const w=await Te();console.log("Incidencias cargadas:",w),j(w)})()},[]),m.useEffect(()=>{if(n){const C=t["equipo local"].nombre===n?t["equipo local"].Jugadores:t["equipo visitante"].Jugadores;r(C)}},[n,t]);const E=!n||!u||!N||!v||!x;return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"w-50",children:[e.jsxs("h3",{className:"text-lg font-bold mb-2 text-center",children:["Actas - ",c]}),e.jsxs("table",{className:"w-full mx-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border p-2",children:"Jugador"}),e.jsx("th",{className:"border p-2",children:"Incidencia"}),e.jsx("th",{className:"border p-2",children:"Minuto"})]})}),e.jsx("tbody",{children:t.actas.filter(C=>C.equipo===c).map(C=>e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"border p-2",children:C.jugador||"-"}),e.jsx("td",{className:"border p-2",children:C.incidencia}),e.jsx("td",{className:"border p-2",children:C.minuto})]},C.id))})]})]}),e.jsxs("div",{className:"w-50",children:[e.jsxs("h3",{className:"text-lg font-bold mb-2 text-center",children:["Actas - ",b]}),e.jsxs("table",{className:"w-full mx-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border p-2",children:"Jugador"}),e.jsx("th",{className:"border p-2",children:"Incidencia"}),e.jsx("th",{className:"border p-2",children:"Minuto"})]})}),e.jsx("tbody",{children:t.actas.filter(C=>C.equipo===b).map(C=>e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"border p-2",children:C.jugador||"-"}),e.jsx("td",{className:"border p-2",children:C.incidencia}),e.jsx("td",{className:"border p-2",children:C.minuto})]},C.id))})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Seleccionar Equipo"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"equipo",value:c,checked:n===c,onChange:C=>s(C.target.value),className:"mr-2"}),c]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"equipo",value:b,checked:n===b,onChange:C=>s(C.target.value),className:"mr-2"}),b]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Seleccionar Jugador"}),e.jsxs("select",{className:"w-full p-2 border rounded",disabled:!n,onChange:C=>a(C.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un jugador"}),l.map(C=>e.jsx("option",{value:C.nombre,children:C.nombre},C.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Seleccionar Incidencia"}),e.jsxs("select",{className:"w-full p-2 border rounded",onChange:C=>S(C.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione una incidencia"}),h.length>0?h.map((C,w)=>e.jsx("option",{value:C.value,children:C.label},w)):e.jsx("option",{disabled:!0,children:"Cargando..."})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Minuto"}),e.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:v,onChange:C=>y(C.target.value),min:"1",max:"90",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Comentario"}),e.jsx("textarea",{className:"w-full p-2 border rounded",value:x,onChange:C=>d(C.target.value),rows:"4",placeholder:"Escribe un comentario sobre la incidencia",required:!0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:o,disabled:E,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Guardar"}),e.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-300 rounded",children:"Cancelar"})]})]})}var B={exports:{}},R,H;function Fe(){if(H)return R;H=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return R=t,R}var G,K;function qe(){if(K)return G;K=1;var t=Fe();function o(){}function i(){}return i.resetWarningCache=o,G=function(){function n(r,c,f,b,p,h){if(h!==t){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}n.isRequired=n;function s(){return n}var l={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:i,resetWarningCache:o};return l.PropTypes=l,l},G}var W;function De(){return W||(W=1,B.exports=qe()()),B.exports}var g=De(),U=function(){return U=Object.assign||function(t){for(var o,i=1,n=arguments.length;i<n;i++){o=arguments[i];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},U.apply(this,arguments)},oe={onActivate:g.func,onAddUndo:g.func,onBeforeAddUndo:g.func,onBeforeExecCommand:g.func,onBeforeGetContent:g.func,onBeforeRenderUI:g.func,onBeforeSetContent:g.func,onBeforePaste:g.func,onBlur:g.func,onChange:g.func,onClearUndos:g.func,onClick:g.func,onContextMenu:g.func,onCommentChange:g.func,onCompositionEnd:g.func,onCompositionStart:g.func,onCompositionUpdate:g.func,onCopy:g.func,onCut:g.func,onDblclick:g.func,onDeactivate:g.func,onDirty:g.func,onDrag:g.func,onDragDrop:g.func,onDragEnd:g.func,onDragGesture:g.func,onDragOver:g.func,onDrop:g.func,onExecCommand:g.func,onFocus:g.func,onFocusIn:g.func,onFocusOut:g.func,onGetContent:g.func,onHide:g.func,onInit:g.func,onInput:g.func,onKeyDown:g.func,onKeyPress:g.func,onKeyUp:g.func,onLoadContent:g.func,onMouseDown:g.func,onMouseEnter:g.func,onMouseLeave:g.func,onMouseMove:g.func,onMouseOut:g.func,onMouseOver:g.func,onMouseUp:g.func,onNodeChange:g.func,onObjectResizeStart:g.func,onObjectResized:g.func,onObjectSelected:g.func,onPaste:g.func,onPostProcess:g.func,onPostRender:g.func,onPreProcess:g.func,onProgressState:g.func,onRedo:g.func,onRemove:g.func,onReset:g.func,onSaveContent:g.func,onSelectionChange:g.func,onSetAttrib:g.func,onSetContent:g.func,onShow:g.func,onSubmit:g.func,onUndo:g.func,onVisualAid:g.func,onSkinLoadError:g.func,onThemeLoadError:g.func,onModelLoadError:g.func,onPluginLoadError:g.func,onIconsLoadError:g.func,onLanguageLoadError:g.func,onScriptsLoad:g.func,onScriptsLoadError:g.func},Oe=U({apiKey:g.string,licenseKey:g.string,id:g.string,inline:g.bool,init:g.object,initialValue:g.string,onEditorChange:g.func,value:g.string,tagName:g.string,tabIndex:g.number,cloudChannel:g.string,plugins:g.oneOfType([g.string,g.array]),toolbar:g.oneOfType([g.string,g.array]),disabled:g.bool,textareaName:g.string,tinymceScriptSrc:g.oneOfType([g.string,g.arrayOf(g.string),g.arrayOf(g.shape({src:g.string,async:g.bool,defer:g.bool}))]),rollback:g.oneOfType([g.number,g.oneOf([!1])]),scriptLoading:g.shape({async:g.bool,defer:g.bool,delay:g.number})},oe),z=function(t){return typeof t=="function"},Y=function(t){return t in oe},X=function(t){return t.substr(2)},Ae=function(t,o,i,n,s,l,r){var c=Object.keys(s).filter(Y),f=Object.keys(l).filter(Y),b=c.filter(function(h){return l[h]===void 0}),p=f.filter(function(h){return s[h]===void 0});b.forEach(function(h){var j=X(h),v=r[j];i(j,v),delete r[j]}),p.forEach(function(h){var j=n(t,h),v=X(h);r[v]=j,o(v,j)})},Me=function(t,o,i,n,s){return Ae(s,t.on.bind(t),t.off.bind(t),function(l,r){return function(c){var f;return(f=l(r))===null||f===void 0?void 0:f(c,t)}},o,i,n)},Z=0,ie=function(t){var o=Date.now(),i=Math.floor(Math.random()*1e9);return Z++,t+"_"+i+Z+String(o)},ee=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},te=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},$e=function(t,o){return te(t).concat(te(o))},Be=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Re=function(t){if(!("isConnected"in Node.prototype)){for(var o=t,i=t.parentNode;i!=null;)o=i,i=o.parentNode;return o===t.ownerDocument}return t.isConnected},ne=function(t,o){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(o):t.setMode(o))},J=function(){return J=Object.assign||function(t){for(var o,i=1,n=arguments.length;i<n;i++){o=arguments[i];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},J.apply(this,arguments)},Ge=function(t,o,i){var n,s,l=t.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=o.id,l.src=o.src,l.async=(n=o.async)!==null&&n!==void 0?n:!1,l.defer=(s=o.defer)!==null&&s!==void 0?s:!1;var r=function(){l.removeEventListener("load",r),l.removeEventListener("error",c),i(o.src)},c=function(f){l.removeEventListener("load",r),l.removeEventListener("error",c),i(o.src,f)};l.addEventListener("load",r),l.addEventListener("error",c),t.head&&t.head.appendChild(l)},ze=function(t){var o={},i=function(r,c){var f=o[r];f.done=!0,f.error=c;for(var b=0,p=f.handlers;b<p.length;b++){var h=p[b];h(r,c)}f.handlers=[]},n=function(r,c,f){var b=function(a){return f!==void 0?f(a):console.error(a)};if(r.length===0){b(new Error("At least one script must be provided"));return}for(var p=0,h=!1,j=function(a,N){h||(N?(h=!0,b(N)):++p===r.length&&c())},v=0,y=r;v<y.length;v++){var x=y[v],d=o[x.src];if(d)d.done?j(x.src,d.error):d.handlers.push(j);else{var u=ie("tiny-");o[x.src]={id:u,src:x.src,done:!1,error:null,handlers:[j]},Ge(t,J({id:u},x),i)}}},s=function(){for(var r,c=0,f=Object.values(o);c<f.length;c++){var b=f[c],p=t.getElementById(b.id);p!=null&&p.tagName==="SCRIPT"&&((r=p.parentNode)===null||r===void 0||r.removeChild(p))}o={}},l=function(){return t};return{loadScripts:n,deleteScripts:s,getDocument:l}},Qe=function(){var t=[],o=function(s){var l=t.find(function(r){return r.getDocument()===s});return l===void 0&&(l=ze(s),t.push(l)),l},i=function(s,l,r,c,f){var b=function(){return o(s).loadScripts(l,c,f)};r>0?setTimeout(b,r):b()},n=function(){for(var s=t.pop();s!=null;s=t.pop())s.deleteScripts()};return{loadList:i,reinitialize:n}},Ue=Qe(),Q=function(t){var o=t;return o&&o.tinymce?o.tinymce:null},Je=function(){var t=function(o,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])},t(o,i)};return function(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(o,i);function n(){this.constructor=o}o.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}(),q=function(){return q=Object.assign||function(t){for(var o,i=1,n=arguments.length;i<n;i++){o=arguments[i];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},q.apply(this,arguments)},Ve=function(t){Je(o,t);function o(i){var n,s,l,r=t.call(this,i)||this;return r.rollbackTimer=void 0,r.valueCursor=void 0,r.rollbackChange=function(){var c=r.editor,f=r.props.value;c&&f&&f!==r.currentContent&&c.undoManager.ignore(function(){if(c.setContent(f),r.valueCursor&&(!r.inline||c.hasFocus()))try{c.selection.moveToBookmark(r.valueCursor)}catch{}}),r.rollbackTimer=void 0},r.handleBeforeInput=function(c){if(r.props.value!==void 0&&r.props.value===r.currentContent&&r.editor&&(!r.inline||r.editor.hasFocus()))try{r.valueCursor=r.editor.selection.getBookmark(3)}catch{}},r.handleBeforeInputSpecial=function(c){(c.key==="Enter"||c.key==="Backspace"||c.key==="Delete")&&r.handleBeforeInput(c)},r.handleEditorChange=function(c){var f=r.editor;if(f&&f.initialized){var b=f.getContent();r.props.value!==void 0&&r.props.value!==b&&r.props.rollback!==!1&&(r.rollbackTimer||(r.rollbackTimer=window.setTimeout(r.rollbackChange,typeof r.props.rollback=="number"?r.props.rollback:200))),b!==r.currentContent&&(r.currentContent=b,z(r.props.onEditorChange)&&r.props.onEditorChange(b,f))}},r.handleEditorChangeSpecial=function(c){(c.key==="Backspace"||c.key==="Delete")&&r.handleEditorChange(c)},r.initialise=function(c){var f,b,p;c===void 0&&(c=0);var h=r.elementRef.current;if(h){if(!Re(h)){if(c===0)setTimeout(function(){return r.initialise(1)},1);else if(c<100)setTimeout(function(){return r.initialise(c+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var j=Q(r.view);if(!j)throw new Error("tinymce should have been loaded into global scope");var v=q(q(q(q({},r.props.init),{selector:void 0,target:h,readonly:r.props.disabled,inline:r.inline,plugins:$e((f=r.props.init)===null||f===void 0?void 0:f.plugins,r.props.plugins),toolbar:(b=r.props.toolbar)!==null&&b!==void 0?b:(p=r.props.init)===null||p===void 0?void 0:p.toolbar}),r.props.licenseKey?{license_key:r.props.licenseKey}:{}),{setup:function(y){r.editor=y,r.bindHandlers({}),r.inline&&!ee(h)&&y.once("PostRender",function(x){y.setContent(r.getInitialValue(),{no_events:!0})}),r.props.init&&z(r.props.init.setup)&&r.props.init.setup(y)},init_instance_callback:function(y){var x,d,u=r.getInitialValue();r.currentContent=(x=r.currentContent)!==null&&x!==void 0?x:y.getContent(),r.currentContent!==u&&(r.currentContent=u,y.setContent(u),y.undoManager.clear(),y.undoManager.add(),y.setDirty(!1));var a=(d=r.props.disabled)!==null&&d!==void 0?d:!1;ne(r.editor,a?"readonly":"design"),r.props.init&&z(r.props.init.init_instance_callback)&&r.props.init.init_instance_callback(y)}});r.inline||(h.style.visibility=""),ee(h)&&(h.value=r.getInitialValue()),j.init(v)}},r.id=r.props.id||ie("tiny-react"),r.elementRef=m.createRef(),r.inline=(l=(n=r.props.inline)!==null&&n!==void 0?n:(s=r.props.init)===null||s===void 0?void 0:s.inline)!==null&&l!==void 0?l:!1,r.boundHandlers={},r}return Object.defineProperty(o.prototype,"view",{get:function(){var i,n;return(n=(i=this.elementRef.current)===null||i===void 0?void 0:i.ownerDocument.defaultView)!==null&&n!==void 0?n:window},enumerable:!1,configurable:!0}),o.prototype.componentDidUpdate=function(i){var n=this,s,l;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(i),this.editor.initialized)){if(this.currentContent=(s=this.currentContent)!==null&&s!==void 0?s:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==i.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var r=this.editor;r.undoManager.transact(function(){var f;if(!n.inline||r.hasFocus())try{f=r.selection.getBookmark(3)}catch{}var b=n.valueCursor;if(r.setContent(n.props.value),!n.inline||r.hasFocus())for(var p=0,h=[f,b];p<h.length;p++){var j=h[p];if(j)try{r.selection.moveToBookmark(j),n.valueCursor=j;break}catch{}}})}if(this.props.disabled!==i.disabled){var c=(l=this.props.disabled)!==null&&l!==void 0?l:!1;ne(this.editor,c?"readonly":"design")}}},o.prototype.componentDidMount=function(){var i=this,n,s,l,r,c;if(Q(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(s=(n=this.props).onScriptsLoadError)===null||s===void 0||s.call(n,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((l=this.elementRef.current)===null||l===void 0)&&l.ownerDocument){var f=function(){var p,h;(h=(p=i.props).onScriptsLoad)===null||h===void 0||h.call(p),i.initialise()},b=function(p){var h,j;(j=(h=i.props).onScriptsLoadError)===null||j===void 0||j.call(h,p)};Ue.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(c=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.delay)!==null&&c!==void 0?c:0,f,b)}},o.prototype.componentWillUnmount=function(){var i=this,n=this.editor;n&&(n.off(this.changeEvents(),this.handleEditorChange),n.off(this.beforeInputEvent(),this.handleBeforeInput),n.off("keypress",this.handleEditorChangeSpecial),n.off("keydown",this.handleBeforeInputSpecial),n.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(s){n.off(s,i.boundHandlers[s])}),this.boundHandlers={},n.remove(),this.editor=void 0)},o.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},o.prototype.changeEvents=function(){var i,n,s,l=(s=(n=(i=Q(this.view))===null||i===void 0?void 0:i.Env)===null||n===void 0?void 0:n.browser)===null||s===void 0?void 0:s.isIE();return l?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},o.prototype.beforeInputEvent=function(){return Be()?"beforeinput SelectionChange":"SelectionChange"},o.prototype.renderInline=function(){var i=this.props.tagName,n=i===void 0?"div":i;return m.createElement(n,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},o.prototype.renderIframe=function(){return m.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},o.prototype.getScriptSources=function(){var i,n,s=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.async,l=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:s,defer:l}]:this.props.tinymceScriptSrc.map(function(b){return typeof b=="string"?{src:b,async:s,defer:l}:b});var r=this.props.cloudChannel,c=this.props.apiKey?this.props.apiKey:"no-api-key",f="https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(r,"/tinymce.min.js");return[{src:f,async:s,defer:l}]},o.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},o.prototype.bindHandlers=function(i){var n=this;if(this.editor!==void 0){Me(this.editor,i,this.props,this.boundHandlers,function(c){return n.props[c]});var s=function(c){return c.onEditorChange!==void 0||c.value!==void 0},l=s(i),r=s(this.props);!l&&r?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):l&&!r&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},o.propTypes=Oe,o.defaultProps={cloudChannel:"7"},o}(m.Component);const He=({datosIniciales:t,onGuardar:o,onCancelar:i})=>{const[n,s]=m.useState({titulo:"",contenido:"",publicacionable_type:"",publicacionable_id:"",portada:!1}),[l,r]=m.useState([]),[c,f]=m.useState({titulo:"",contenido:""}),b=localStorage.getItem("token");m.useEffect(()=>{t&&(s(x=>({...x,...t,publicacionable_type:t.seccion,publicacionable_id:t.elemento})),t.seccion&&p(t.seccion,t.elemento))},[t]);const p=async(x,d)=>{let u;switch(x.toLowerCase()){case"equipo":u=await P().equipos();break;case"partido":u=await P().partidos();break;case"patrocinador":u=await P().patrocinadores();break;case"jugador":u=await P().jugadores();break;case"reto":u=await P().retos();break;case"ong":u=await P().ongs();break;case"pabellon":u=await P().pabellones();break;default:u={}}if(u){let a;x.toLowerCase()=="jugador"?a=Object.keys(u).map(N=>({id:N,nombre:u[N].nombre})):a=Object.keys(u).map(N=>({id:N,nombre:u[N]})),r(a),s(N=>({...N,publicacionable_id:d||""}))}},h=async x=>{const{name:d,value:u,type:a,checked:N,files:S}=x.target;d==="publicacionable_type"?(s(E=>({...E,publicacionable_type:u,publicacionable_id:""})),p(u,"")):s(E=>({...E,[d]:a==="checkbox"?N:a==="file"?S[0]:u}))},j=x=>{s(d=>({...d,contenido:x}))},v=()=>{const x={titulo:"",contenido:""};return n.portada&&(n.titulo.trim()||(x.titulo="El título es obligatorio si la publicación está en la portada."),n.contenido.trim()||(x.contenido="El contenido es obligatorio si la publicación está en la portada.")),f(x),Object.values(x).every(d=>d==="")},y=async x=>{if(x.preventDefault(),!v())return;const d="http://23.23.87.65/api/",u=new FormData;u.append("titulo",n.titulo),u.append("contenido",n.contenido),u.append("publicacionable_type",n.publicacionable_type),u.append("publicacionable_id",n.publicacionable_id),u.append("portada",n.portada?"1":"0");try{const a=await fetch(`${d}publicaciones`,{method:"POST",headers:{Authorization:`Bearer ${b}`},body:u}),N=await a.json();a.ok?(alert("Publicación creada con éxito"),o&&o(N.publicacion)):(console.error("Error en la creación:",N),alert(`Error: ${N.message}`))}catch(a){console.error("Error al enviar la publicación:",a)}};return e.jsxs("form",{onSubmit:y,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Crear Publicación"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"titulo",className:"form-label",children:"Título"}),e.jsx("input",{type:"text",className:"form-control",name:"titulo",id:"titulo",placeholder:"Ingrese el título",value:n.titulo,onChange:h}),c.titulo&&e.jsx("span",{className:"text-danger d-block",children:c.titulo})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Contenido"}),e.jsx(Ve,{apiKey:"1970hen3xxpeg7q4hxbmuo33gez4jmscea18iie0jpz65znn",value:n.contenido,onEditorChange:j,init:{height:300,menubar:!0,plugins:"advlist autolink lists link image charmap print preview anchor",toolbar:"undo redo | formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link"}}),c.contenido&&e.jsx("span",{className:"text-danger d-block",children:c.contenido})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"publicacionable_type",className:"form-label",children:"Tipo de Publicación"}),e.jsxs("select",{className:"form-select",name:"publicacionable_type",id:"publicacionable_type",value:n.publicacionable_type,onChange:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un tipo"}),["Equipo","Partido","Patrocinador","Jugador","Reto","Ong","Pabellon"].map((x,d)=>e.jsx("option",{value:x,children:x},d))]})]}),n.publicacionable_type&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"publicacionable_id",className:"form-label",children:"Nombre"}),e.jsxs("select",{className:"form-select",name:"publicacionable_id",id:"publicacionable_id",value:n.publicacionable_id,onChange:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione una opción"}),l.map((x,d)=>e.jsx("option",{value:x.id,children:x.nombre},d))]})]}),e.jsxs("div",{className:"mb-3 form-check",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",name:"portada",id:"portada",checked:n.portada,onChange:h}),e.jsx("label",{className:"form-check-label",htmlFor:"portada",children:"Usar como portada"})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:"btn btn-success",children:t==null?"Crear publicación":"Guardar publicación"}),e.jsx("button",{type:"reset",className:"btn btn-secondary",onClick:i,children:"Cancelar"})]})]})};function Ke(){}const We=async()=>{try{const t=await P().perfiles();return t?(sessionStorage.setItem("perfiles",JSON.stringify(t)),Object.keys(t).map(o=>({value:o,label:t[o]}))):[]}catch(t){return console.error("Error al obtener los perfiles",t),[]}};function Ye({datosIniciales:t,onGuardar:o,onCancelar:i}){const[n,s]=m.useState({nombre_completo:"",email:"",password:"",perfil_id:""}),[l,r]=m.useState([]),[c,f]=m.useState(!1),{createItem:b,updateItem:p}=k({nombre:"Usuarios"});m.useEffect(()=>{const v=async()=>{const y=await We();r(y)};l.length===0&&v()},[l]),m.useEffect(()=>{t&&s(v=>{var y;return{nombre_completo:t.nombre||t.nombre_completo||"",email:t.email||"",password:"",perfil_id:((y=t.perfil)==null?void 0:y.id)||""}})},[t]);const h=v=>{const{name:y,value:x}=v.target;s({...n,[y]:x})},j=async v=>{if(v.preventDefault(),f(!0),!n.nombre_completo.trim()||!n.email.trim()||!n.perfil_id){alert("El nombre completo, email y perfil son obligatorios."),f(!1);return}const y={...n};y.password||delete y.password;try{t?(console.log("Actualizando usuario:",y),t.id?(await p(t.id,y),console.log("Usuario actualizado con éxito.")):console.error("ID no encontrado para la actualización.")):(console.log("Creando nuevo usuario:",y),await b(y),console.log("Usuario creado con éxito."))}catch(x){console.error("Error al guardar usuario:",x)}finally{f(!1)}};return e.jsxs("form",{onSubmit:j,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t?"Editar Usuario":"Crear Usuario"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre_completo",className:"form-label",children:"Nombre Completo"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre_completo",id:"nombre_completo",placeholder:"Ingrese el nombre completo",value:n.nombre_completo,onChange:h,required:!0,disabled:c})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",name:"email",id:"email",placeholder:"Ingrese el email",value:n.email,onChange:h,required:!0,disabled:c})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Contraseña"}),e.jsx("input",{type:"password",className:"form-control",name:"password",id:"password",placeholder:"Ingrese la contraseña",value:n.password,onChange:h,disabled:c}),e.jsx("small",{className:"form-text text-muted",children:"Déjelo en blanco para no cambiar la contraseña."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"perfil_id",className:"form-label",children:"Tipo de Perfil"}),e.jsxs("select",{className:"form-select",name:"perfil_id",id:"perfil_id",value:n.perfil_id||"",onChange:h,required:!0,disabled:c,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un perfil"}),l.map(v=>e.jsx("option",{value:v.value,children:v.label},v.value))]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:"btn btn-success",disabled:c,children:c?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:c,children:"Cancelar"})]})]})}const Xe=async()=>{try{const t=sessionStorage.getItem("estudios");if(t){console.log("Cargando estudios desde sessionStorage");const i=JSON.parse(t);return Object.keys(i).map(n=>({value:n,label:i[n]}))}console.log("Cargando estudios desde la API...");const o=await P().estudios();return o?Object.keys(o).map(i=>({value:i,label:o[i]})):[]}catch(t){return console.error("Error al obtener los estudios",t),[]}};function Ze({datosIniciales:t,onGuardar:o,onCancelar:i}){const[n,s]=m.useState({titulo:"",texto:"",estudio_id:null}),[l,r]=m.useState([]),[c,f]=m.useState(!1),{createItem:b,updateItem:p,fetchItems:h,error:j}=k({nombre:"Retos"});m.useEffect(()=>{(async()=>{const d=await Xe();r(d)})()},[]),m.useEffect(()=>{var x;t&&s({...t,estudio_id:((x=t.estudio)==null?void 0:x.id)||null})},[t]);const v=x=>{const{name:d,value:u}=x.target;s({...n,[d]:u})},y=async x=>{x.preventDefault(),f(!0);const d=t?"editar":"crear";try{d==="crear"?await b(n):await p(n.id,n),h(),o(n)}catch(u){console.error("Error al guardar reto:",u)}finally{f(!1)}};return e.jsxs("form",{onSubmit:y,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Formulario de Reto"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"titulo",className:"form-label",children:"Título"}),e.jsx("input",{type:"text",className:"form-control",name:"titulo",id:"titulo",placeholder:"Ingrese el título",value:n.titulo||"",required:!0,onChange:v,disabled:c})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"texto",className:"form-label",children:"Texto"}),e.jsx("textarea",{className:"form-control",name:"texto",id:"texto",placeholder:"Ingrese el texto del reto",value:n.texto||"",required:!0,onChange:v,style:{height:"150px",resize:"vertical"},disabled:c})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"estudio_id",className:"form-label",children:"Estudio"}),e.jsxs("select",{className:"form-select",name:"estudio_id",id:"estudio_id",value:n.estudio_id||"",required:!0,onChange:v,disabled:c,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un estudio"}),l.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:c,children:c?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:c,children:"Cancelar"})]}),j&&e.jsx("p",{className:"text-danger mt-3",children:j})]})}function et(){}function tt(){}function nt({datosIniciales:t,onGuardar:o,onCancelar:i}){const[n,s]=m.useState({nombre:"",landing_page:""}),[l,r]=m.useState(!1),{createItem:c,updateItem:f,fetchItems:b,error:p}=k({nombre:"Patrocinadores"});m.useState(()=>{t&&s(t)},[t]);const h=v=>{const{name:y,value:x}=v.target;s({...n,[y]:x})},j=async v=>{v.preventDefault(),r(!0);try{t?await f(n.id,n):await c(n),b(),o(n)}catch(y){console.error("Error al guardar patrocinador:",y)}finally{r(!1)}};return e.jsxs("form",{onSubmit:j,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Formulario de Patrocinador"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre",value:n.nombre||"",required:!0,onChange:h,disabled:l})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"landing_page",className:"form-label",children:"Landing Page"}),e.jsx("input",{type:"url",className:"form-control",name:"landing_page",id:"landing_page",placeholder:"Ingrese la URL",value:n.landing_page||"",required:!0,onChange:h,disabled:l})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:l,children:l?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:l,children:"Cancelar"})]}),p&&e.jsx("p",{className:"text-danger mt-3",children:p})]})}function rt({datosIniciales:t,onGuardar:o,onCancelar:i}){const[n,s]=m.useState({nombre:""}),[l,r]=m.useState(!1),{createItem:c,updateItem:f,fetchItems:b,error:p}=k({nombre:"Familias"});m.useState(()=>{t&&s({nombre:t.nombre||""})},[t]);const h=v=>{s({...n,nombre:v.target.value})},j=async v=>{v.preventDefault(),r(!0);try{t?await f(t.id,n):await c(n),b(),o(n)}catch(y){console.error("Error al guardar familia:",y)}finally{r(!1)}};return e.jsxs("form",{onSubmit:j,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Formulario de Familia"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre",value:n.nombre,required:!0,onChange:h,disabled:l})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:l,children:l?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:l,children:"Cancelar"})]}),p&&e.jsx("p",{className:"text-danger mt-3",children:p})]})}const st=async()=>{try{console.log("Cargando familias desde la API...");const t=await P().familias();return t?Object.keys(t).map(o=>({value:o,label:t[o]})):[]}catch(t){return console.error("Error al obtener las familias",t),[]}};function at({datosIniciales:t,onGuardar:o,onCancelar:i}){var h;const[n,s]=m.useState({}),[l,r]=m.useState({}),[c,f]=m.useState([]);m.useEffect(()=>{(async()=>{const v=await st();f(v)})()},[]),m.useEffect(()=>{t&&s(t)},[t]);const b=j=>{const{name:v,value:y}=j.target;s({...n,[v]:y})},p=j=>{j.preventDefault(),o(n)};return console.log(n),e.jsxs("form",{onSubmit:p,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t!=null?"Editar Ciclo":"Crear ciclo"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre",value:n.nombre||"",onChange:b})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"familia_id",className:"form-label",children:"Familia"}),e.jsxs("select",{className:"form-select",name:"familia_id",id:"familia_id",value:((h=n.familia_id)==null?void 0:h.id)||"",onChange:b,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione una familia"}),c.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:"btn btn-success",children:"Guardar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:"Cancelar"})]})]})}function ot({datosIniciales:t,onGuardar:o,onCancelar:i}){const[n,s]=m.useState({nombre:"",landing_page:""}),[l,r]=m.useState({}),[c,f]=m.useState(!1),{createItem:b,updateItem:p,error:h}=k({nombre:"Centros"});m.useEffect(()=>{t&&s({id:t.id,nombre:t.nombre||"",landing_page:t.landing_page||""})},[t]);const j=()=>{let x={};return n.nombre.trim()||(x.nombre="El nombre es obligatorio"),n.landing_page.trim()?/^https?:\/\/[^\s]+$/.test(n.landing_page)||(x.landing_page="La URL debe ser válida (ej. http://example.com)"):x.landing_page="La página web es obligatoria",r(x),Object.keys(x).length===0},v=x=>{const{name:d,value:u}=x.target;s(a=>({...a,[d]:u}))},y=async x=>{if(x.preventDefault(),!!j()){f(!0);try{t?await p(n.id,n):await b(n),o(n)}catch(d){console.error("Error al guardar:",d)}finally{f(!1)}}};return e.jsxs("form",{onSubmit:y,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t?"Editar Centro":"Crear Centro"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre del centro",value:n.nombre,onChange:v,className:`form-control ${l.nombre?"is-invalid":""}`,disabled:c}),l.nombre&&e.jsx("div",{className:"invalid-feedback",children:l.nombre})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"landing_page",className:"form-label",children:"Página web"}),e.jsx("input",{type:"text",name:"landing_page",id:"landing_page",placeholder:"Ingrese la página web",value:n.landing_page,onChange:v,className:`form-control ${l.landing_page?"is-invalid":""}`,disabled:c}),l.landing_page&&e.jsx("div",{className:"invalid-feedback",children:l.landing_page})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:c,children:c?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:c,children:"Cancelar"})]}),Object.keys(l).length>0&&e.jsx("div",{className:"alert alert-danger mt-3",children:e.jsx("ul",{children:Object.values(l).map((x,d)=>e.jsx("li",{children:x},d))})}),h&&e.jsx("div",{className:"alert alert-danger mt-3",children:h})]})}const it=async()=>{try{const t=sessionStorage.getItem("centros");if(t){console.log("Cargando centros desde sessionStorage");const i=JSON.parse(t);return Object.keys(i).map(n=>({value:n,label:i[n]}))}console.log("Cargando centros desde la API...");const o=await P().centros();return o?Object.keys(o).map(i=>({value:i,label:o[i]})):[]}catch(t){return console.error("Error al obtener los centros",t),[]}},lt=async()=>{try{const t=sessionStorage.getItem("ciclos");if(t){console.log("Cargando ciclos desde sessionStorage");const i=JSON.parse(t);return Object.keys(i).map(n=>({value:n,label:i[n]}))}console.log("Cargando ciclos desde la API...");const o=await P().ciclos();return o?Object.keys(o).map(i=>({value:i,label:o[i]})):[]}catch(t){return console.error("Error al obtener los ciclos",t),[]}};function ct({datosIniciales:t,onGuardar:o,onCancelar:i}){const[n,s]=m.useState({centro_id:"",ciclo_id:"",curso:""}),[l,r]=m.useState([]),[c,f]=m.useState([]),[b,p]=m.useState(!1),[h,j]=m.useState(!1),{createItem:v,updateItem:y,error:x}=k({nombre:"Estudios"});m.useEffect(()=>{(async()=>{r(await it())})(),(async()=>{f(await lt())})()},[]),m.useEffect(()=>{if(t&&l.length>0&&c.length>0&&!b){const a=l.find(S=>S.label===t.centro),N=c.find(S=>S.label===t.ciclo);s({centro_id:a?a.value:"",ciclo_id:N?N.value:"",curso:t.curso?t.curso.toString():""}),p(!0)}},[t,l,c,b]);const d=a=>{const{name:N,value:S}=a.target;s({...n,[N]:S.toString()})},u=async a=>{a.preventDefault(),j(!0);try{t?await y(t.id,n):await v(n),o(n)}catch(N){console.error("Error al guardar estudio:",N)}finally{j(!1)}};return e.jsxs("form",{onSubmit:u,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t?"Editar estudio":"Crear estudio"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"centro_id",className:"form-label",children:"Centro"}),e.jsxs("select",{name:"centro_id",id:"centro_id",className:"form-select",value:n.centro_id,onChange:d,disabled:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un centro"}),l.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"ciclo_id",className:"form-label",children:"Ciclo"}),e.jsxs("select",{name:"ciclo_id",id:"ciclo_id",className:"form-select",value:n.ciclo_id,onChange:d,disabled:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un ciclo"}),c.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"curso",className:"form-label",children:"Curso"}),e.jsxs("select",{name:"curso",id:"curso",className:"form-select",value:n.curso,onChange:d,disabled:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un curso"}),e.jsx("option",{value:"1",children:"1º"}),e.jsx("option",{value:"2",children:"2º"})]})]}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:h,children:h?"Guardando...":"Guardar"}),e.jsx("button",{type:"button",className:"btn btn-secondary ms-2",onClick:i,disabled:h,children:"Cancelar"}),x&&e.jsx("p",{className:"text-danger mt-3",children:x})]})}function ut(){const{seccion:t}=se(),o=ae(),{seguridad:i}=m.useContext(re),[n,s]=m.useState(null),[l,r]=m.useState(null),[c,f]=m.useState(t?D(t):""),b=v=>{const y=D(v.nombre);n!=null?window.confirm("¿Estás seguro de salir del apartado de edición / creación?")&&(f(y),s(null)):(f(y),o(`/administracion/${y}`))};m.useEffect(()=>{n==null&&o(`/administracion/${c}`)},[n]);const p=(v,y=null)=>{s(v),r(y)},h=()=>{switch(c){case"jugadores":return e.jsx(Ie,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"partidos":return e.jsx(Le,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"publicaciones":return e.jsx(He,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"actas":return e.jsx(Ke,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"usuarios":return e.jsx(Ye,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"retos":return e.jsx(Ze,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"imagenes":return e.jsx(et,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"pabellones":return e.jsx(tt,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"patrocinadores":return e.jsx(nt,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"familias":return e.jsx(rt,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"ciclos":return e.jsx(at,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"centros":return e.jsx(ot,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"estudios":return e.jsx(ct,{datosIniciales:l,onGuardar:()=>s(null),onCancelar:()=>s(null)});default:return e.jsx("div",{children:"Formulario no definido para esta sección."})}},j=()=>{switch(c){case"torneo":return e.jsx(Ee,{onModoCambio:p});case"equipos":return e.jsx(ue,{onModoCambio:p});case"jugadores":return e.jsx(he,{onModoCambio:p});case"partidos":return e.jsx(me,{onModoCambio:p});case"publicaciones":return e.jsx(pe,{onModoCambio:p});case"actas":return e.jsx(be,{onModoCambio:p});case"usuarios":return e.jsx(fe,{onModoCambio:p});case"retos":return e.jsx(xe,{onModoCambio:p});case"imagenes":return e.jsx(ge,{onModoCambio:p});case"patrocinadores":return e.jsx(je,{onModoCambio:p});case"familias":return e.jsx(ve,{onModoCambio:p});case"ciclos":return e.jsx(ye,{onModoCambio:p});case"centros":return e.jsx(Ce,{onModoCambio:p});case"estudios":return e.jsx(Ne,{onModoCambio:p});case"inscripciones":return e.jsx(Se,{onModoCambio:p});default:return e.jsx("div",{children:"CRUD no definido para esta sección."})}};return e.jsxs("div",{className:"d-flex",children:[e.jsx(de,{onSelect:b}),e.jsx("div",{className:"flex-grow-1 p-4",children:n?h():j()})]})}export{ut as default};
