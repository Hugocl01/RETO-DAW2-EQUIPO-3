import{r as m,d as re,c as se,a as ae,j as e,S as T}from"./index-B37SWOkY.js";const D=t=>{let o=t.toLowerCase();return o=o.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,""),o};function de({onSelect:t}){var r,N;const{seguridad:o}=m.useContext(re),{seccion:l}=se();ae();const[n,a]=m.useState([]),[c,s]=m.useState(null),[d,f]=m.useState(!0),[b,p]=m.useState(!1),[h,g]=m.useState(!1),j=m.useRef(null),[y,C]=m.useState(!1),i=()=>{p(S=>!S)};m.useEffect(()=>{const S="http://23.23.87.65/api/";(async()=>{var v,w,L;if((w=(v=o==null?void 0:o.user)==null?void 0:v.perfil)!=null&&w.id)try{const F=localStorage.getItem("token"),O=await fetch(`${S}perfiles/${o.user.perfil.id}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:F?`Bearer ${F}`:""},credentials:"include"});if(!O.ok)throw new Error("Error al obtener secciones");const A=await O.json();a(((L=A.perfiles)==null?void 0:L.secciones)||[])}catch(F){console.error("Error al obtener secciones:",F)}finally{f(!1)}})()},[(N=(r=o==null?void 0:o.user)==null?void 0:r.perfil)==null?void 0:N.id]),m.useEffect(()=>{if(n.length===0)return;const S=l?D(l):"",E=n.find(v=>D(v.nombre)===S)||n[0]||null;s(E),E&&t(E)},[n,l]),m.useEffect(()=>{b&&i()},[l]);const u=S=>{t(S),b&&i()};return e.jsxs("div",{className:"menuAdmin",children:[e.jsxs("aside",{className:"p-3",style:{minWidth:"240px",height:"100vh"},children:[e.jsx("h4",{className:"text-center",children:"Administración"}),d?e.jsx("p",{className:"text-center",children:"Cargando secciones..."}):e.jsx("ul",{className:"list-group",children:n.length>0?n.map(S=>e.jsx("li",{className:`list-group-item ${(c==null?void 0:c.id)===S.id?"active":""}`,role:"button",onClick:()=>u(S),children:S.nombre},S.id)):e.jsx("li",{className:"list-group-item text-center text-muted",children:"No hay secciones disponibles"})})]}),e.jsxs("div",{className:"sidebarAdministracion p-2",ref:j,onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{children:[e.jsxs("nav",{id:"sidenav-1",className:`sidenav ${b?"active":""}`,onClick:S=>S.stopPropagation(),children:[e.jsx("h4",{className:"text-center mt-4",children:"Administración"}),d?e.jsx("p",{className:"text-center",children:"Cargando secciones..."}):e.jsx("ul",{className:"mx-4 list-group",children:n.length>0?n.map(S=>e.jsx("li",{className:`list-group-item ${(c==null?void 0:c.id)===S.id?"active":""}`,role:"button",onClick:()=>u(S),children:S.nombre},S.id)):e.jsx("li",{className:"list-group-item text-center text-muted",children:"No hay secciones disponibles"})})]}),e.jsx("button",{id:"sidenav-toggle",className:`toggler-btn ${b?"active":""}`,onClick:i,children:e.jsx("i",{className:"bi bi-list-task botonMenuAdmin p-2 rounded border border-primary text-dark"})})]}),b&&e.jsx("div",{className:"backdrop",onClick:i})]})]})}const k=t=>{const o="http://23.23.87.65/api/",[l,n]=m.useState([]),[a,c]=m.useState(!1),[s,d]=m.useState(null),[f,b]=m.useState([]),p=D(t.nombre),h=async()=>{var i;c(!0),d(null);try{const u=await fetch(`${o}${p}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!u.ok)throw new Error("Error al obtener los datos.");const r=await u.json();n(r[p]||[]),((i=r[p])==null?void 0:i.length)>0?b(Object.keys(r[p][0])):b([])}catch(u){d(u.message||"Error de red.")}finally{c(!1)}},g=async i=>{try{if(!(await fetch(`${o}${p}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(i)})).ok)throw new Error("Error al crear el registro.");h()}catch(u){d(u.message||"Error al crear el registro.")}},j=async(i,u)=>{try{if(!(await fetch(`${o}${p}/${i}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(u)})).ok)throw new Error("Error al actualizar.");h()}catch(r){d(r.message||"Error al actualizar.")}},y=async i=>{try{if(!(await fetch(`${o}${p}/${i}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar.");h()}catch(u){d(u.message||"Error al eliminar.")}},C=(i,u)=>{u==="crear"?g(i):u==="editar"&&j(i.id,i)};return m.useEffect(()=>{t&&h()},[t]),{items:l,loading:a,error:s,columns:f,fetchItems:h,createItem:g,updateItem:j,deleteItem:y,onGuardar:C}},_=({currentPage:t,totalPages:o,onPageChange:l})=>{const n=()=>{t>1&&l(t-1)},a=()=>{t<o&&l(t+1)};return e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:[e.jsx("button",{className:"btn btn-primary",onClick:n,disabled:t===1,children:"Anterior"}),e.jsxs("span",{children:["Página ",t," de ",o]}),e.jsx("button",{className:"btn btn-primary",onClick:a,disabled:t===o||o===0,children:"Siguiente"})]})};function ue({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Equipos"}),[]),{items:l,loading:n,error:a}=k(o),[c,s]=m.useState(""),[d,f]=m.useState(1),b=5,p=l.filter(i=>{var r,N,S,E;const u=c.toLowerCase();return i.nombre.toLowerCase().includes(u)||i.centro.toLowerCase().includes(u)||i.grupo.toLowerCase().includes(u)||i.entrenador.toLowerCase().includes(u)||((N=(r=i.inscripcion)==null?void 0:r.estado)==null?void 0:N.toString().toLowerCase().includes(u))||""||((E=(S=i.stats)==null?void 0:S.goles)==null?void 0:E.toString().includes(u))||""}),h=p.length,g=Math.ceil(h/b),j=(d-1)*b,y=p.slice(j,j+b),C=i=>{s(i.target.value),f(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Equipos"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar equipos...",value:c,onChange:C})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Centro"}),e.jsx("th",{children:"Grupo"}),e.jsx("th",{children:"Entrenador"}),e.jsx("th",{children:"Estado Inscripción"}),e.jsx("th",{children:"Goles"})]})}),e.jsxs("tbody",{children:[y.map(i=>{var u,r;return e.jsxs("tr",{children:[e.jsx("td",{children:i.nombre}),e.jsx("td",{children:i.centro}),e.jsx("td",{children:i.grupo}),e.jsx("td",{children:i.entrenador}),e.jsx("td",{children:(u=i.inscripcion)==null?void 0:u.estado}),e.jsx("td",{children:(r=i.stats)==null?void 0:r.goles})]},i.slug)}),y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center",children:"No hay equipos disponibles."})})]})]}),e.jsx(_,{currentPage:d,totalPages:g,onPageChange:i=>f(i)})]})}function he({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Jugadores"}),[]),{items:l,loading:n,error:a}=k(o),[c,s]=m.useState(""),[d,f]=m.useState(1),b=5,p=l.filter(i=>{const u=c.toLowerCase();return i.nombre.toLowerCase().includes(u)||i.equipo.toLowerCase().includes(u)||i.estudio.toLowerCase().includes(u)||i.dni.toLowerCase().includes(u)||i.email.toLowerCase().includes(u)||i.telefono.includes(u)}),h=p.length,g=Math.ceil(h/b),j=(d-1)*b,y=p.slice(j,j+b),C=i=>{s(i.target.value),f(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Jugadores"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar jugadores...",value:c,onChange:C})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Equipo"}),e.jsx("th",{children:"Estudio"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Teléfono"})]})}),e.jsxs("tbody",{children:[y.map(i=>e.jsxs("tr",{children:[e.jsx("td",{children:i.nombre}),e.jsx("td",{children:i.equipo}),e.jsx("td",{children:i.estudio}),e.jsx("td",{children:i.email}),e.jsx("td",{children:i.telefono})]},i.slug)),y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay jugadores disponibles."})})]})]}),e.jsx(_,{currentPage:d,totalPages:g,onPageChange:f})]})}function me({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Partidos"}),[]),{items:l,loading:n,error:a}=k(o),[c,s]=m.useState(""),[d,f]=m.useState(1),b=5;console.log(l);const p=l.filter(i=>{const u=c.toLowerCase(),r=N=>N?N.toLowerCase():"";return r(i.fecha).includes(u)||r(i["equipo local"]).includes(u)||r(i["equipo visitante"]).includes(u)||r(i.pabellón).includes(u)||r(i.grupo).includes(u)||r(i.tipo).includes(u)}),h=p.length,g=Math.ceil(h/b),j=(d-1)*b,y=p.slice(j,j+b),C=i=>{s(i.target.value),f(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Partidos"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar partidos...",value:c,onChange:C})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Equipo Local"}),e.jsx("th",{children:"Equipo Visitante"}),e.jsx("th",{children:"Pabellón"}),e.jsx("th",{children:"Grupo"}),e.jsx("th",{children:"Tipo"}),e.jsx("th",{children:"Goles Local"}),e.jsx("th",{children:"Goles Visitante"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[y.map(i=>e.jsxs("tr",{children:[e.jsx("td",{children:i.fecha}),e.jsx("td",{children:i["equipo local"].nombre}),e.jsx("td",{children:i["equipo visitante"].nombre}),e.jsx("td",{children:i.pabellón}),e.jsx("td",{children:i.grupo}),e.jsx("td",{children:i.tipo}),e.jsx("td",{children:i["goles local"]}),e.jsx("td",{children:i["goles visitante"]}),e.jsx("td",{className:"d-flex",children:e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",i),children:"Actas"})})]},i.slug)),y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center",children:"No hay partidos disponibles."})})]})]}),e.jsx(_,{currentPage:d,totalPages:g,onPageChange:i=>f(i)})]})}function pe({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Publicaciones"}),[]),{items:l,loading:n,error:a,deleteItem:c}=k(o),[s,d]=m.useState(""),[f,b]=m.useState(1),p=5,h=l.filter(u=>{const r=s.toLowerCase();return u.titulo.toLowerCase().includes(r)||u.portada.toLowerCase().includes(r)||u.contenido.toLowerCase().includes(r)||u.seccion.toLowerCase().includes(r)}),g=h.length,j=Math.ceil(g/p),y=(f-1)*p,C=h.slice(y,y+p),i=u=>{d(u.target.value),b(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Publicaciones"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar publicaciones...",value:s,onChange:i}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Crear Publicacion"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Titulo"}),e.jsx("th",{children:"Portada"}),e.jsx("th",{children:"Contenido"}),e.jsx("th",{children:"Sección"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[C.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.titulo}),e.jsx("td",{children:u.portada}),e.jsx("td",{children:u.contenido}),e.jsx("td",{children:u.seccion}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",u),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(u.id),children:"Eliminar"})]})]},u.id)),C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay publicaciones disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:j,onPageChange:b})]})}function be({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Jugadores"}),[]),{items:l,loading:n,error:a,deleteItem:c}=k(o),[s,d]=m.useState(""),[f,b]=m.useState(1),p=5,h=l.filter(u=>{const r=s.toLowerCase();return u.nombre.toLowerCase().includes(r)||u.equipo.toLowerCase().includes(r)||u.estudio.toLowerCase().includes(r)||u.dni.toLowerCase().includes(r)||u.email.toLowerCase().includes(r)||u.telefono.includes(r)}),g=h.length,j=Math.ceil(g/p),y=(f-1)*p,C=h.slice(y,y+p),i=u=>{d(u.target.value),b(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Jugadores"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar jugadores...",value:s,onChange:i})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Equipo"}),e.jsx("th",{children:"Estudio"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Teléfono"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[C.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.nombre}),e.jsx("td",{children:u.equipo}),e.jsx("td",{children:u.estudio}),e.jsx("td",{children:u.email}),e.jsx("td",{children:u.telefono}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",u),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(u.slug),children:"Eliminar"})]})]},u.slug)),C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay jugadores disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:j,onPageChange:b})]})}function fe({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Usuarios"}),[]),{items:l,loading:n,error:a,deleteItem:c}=k(o),[s,d]=m.useState(""),[f,b]=m.useState(1),p=5,h=r=>r?r.toString().toLowerCase():"",g=l.filter(r=>{var S;const N=s.toLowerCase();return h(r.nombre).includes(N)||h(r.email).includes(N)||h((S=r.perfil)==null?void 0:S.tipo).includes(N)}),j=g.length,y=Math.ceil(j/p),C=(f-1)*p,i=g.slice(C,C+p),u=r=>{d(r.target.value),b(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Usuarios"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-4 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar usuarios...",value:s,onChange:u}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Usuario"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Rol"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[i.map(r=>{var N;return e.jsxs("tr",{children:[e.jsx("td",{children:r.nombre}),e.jsx("td",{children:r.email}),e.jsx("td",{children:((N=r.perfil)==null?void 0:N.tipo)||"Sin rol"}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",r),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(r.id),children:"Eliminar"})]})]},r.id)}),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No hay usuarios disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:r=>b(r)})]})}function xe({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Retos"}),[]),{items:l,loading:n,error:a,deleteItem:c}=k(o),[s,d]=m.useState(""),[f,b]=m.useState(1),p=5,h=r=>r?r.toString().toLowerCase():"",g=l.filter(r=>{var S,E,v;const N=s.toLowerCase();return h(r.titulo).includes(N)||h(r.texto).includes(N)||h((S=r.estudio)==null?void 0:S.centro).includes(N)||h((E=r.estudio)==null?void 0:E.ciclo).includes(N)||h((v=r.estudio)==null?void 0:v.curso).includes(N)}),j=g.length,y=Math.ceil(j/p),C=(f-1)*p,i=g.slice(C,C+p),u=r=>{d(r.target.value),b(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Retos"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar retos...",value:s,onChange:u}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Crear Reto"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Título"}),e.jsx("th",{children:"Descripción"}),e.jsx("th",{children:"Centro"}),e.jsx("th",{children:"Ciclo"}),e.jsx("th",{children:"Curso"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[i.map(r=>{var N,S,E;return e.jsxs("tr",{children:[e.jsx("td",{children:r.titulo}),e.jsx("td",{children:r.texto}),e.jsx("td",{children:((N=r.estudio)==null?void 0:N.centro)||"N/A"}),e.jsx("td",{children:((S=r.estudio)==null?void 0:S.ciclo)||"N/A"}),e.jsx("td",{children:((E=r.estudio)==null?void 0:E.curso)||"N/A"}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",r),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(r.id),children:"Eliminar"})]})]},r.id)}),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay retos disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:r=>b(r)})]})}function ge({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Imagenes"}),[]),{items:l}=k(o),[n,a]=m.useState(""),[c,s]=m.useState(1),d=5,f=l.filter(h=>{n.toLowerCase()});f.length;const b=(c-1)*d;f.slice(b,b+d);const p=h=>{a(h.target.value),s(1)};return e.jsxs("div",{children:[e.jsx("h2",{children:"Imágenes"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Buscar imágenes...",value:n,onChange:p}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Añadir Imagen"})]})]})}function je({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Patrocinadores"}),[]),{items:l,loading:n,error:a,deleteItem:c}=k(o),[s,d]=m.useState(""),[f,b]=m.useState(1),p=5,h=r=>r?r.toString().toLowerCase():"",g=l.filter(r=>{const N=s.toLowerCase();return h(r.nombre).includes(N)||h(r.landing_page).includes(N)}),j=g.length,y=Math.ceil(j/p),C=(f-1)*p,i=g.slice(C,C+p),u=r=>{d(r.target.value),b(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Patrocinadores"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar patrocinadores...",value:s,onChange:u}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Crear Patrocinador"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Landing Page"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[i.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.nombre}),e.jsx("td",{children:e.jsx("a",{href:r.landing_page,target:"_blank",rel:"noopener noreferrer",children:r.landing_page})}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",r),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(r.id),children:"Eliminar"})]})]},r.id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay patrocinadores disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:r=>b(r)})]})}function ve({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Familias"}),[]),{items:l,loading:n,error:a,deleteItem:c}=k(o),[s,d]=m.useState(""),[f,b]=m.useState(1),p=5,h=l.filter(u=>u.nombre.toLowerCase().includes(s.toLowerCase())),g=h.length,j=Math.ceil(g/p),y=(f-1)*p,C=h.slice(y,y+p),i=u=>{d(u.target.value),b(1)};return n?e.jsx("p",{children:"Cargando familias..."}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Familias"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar familias...",value:s,onChange:i}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Familia"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[C.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.nombre}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",u),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(u.id),children:"Eliminar"})]})]},u.id)),C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"text-center",children:"No hay familias disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:j,onPageChange:b})]})}function ye({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Ciclos"}),[]),{items:l,loading:n,error:a,deleteItem:c}=k(o),[s,d]=m.useState(""),[f,b]=m.useState(1),p=5,h=r=>r?r.toString().toLowerCase():"",g=l.filter(r=>{var S;const N=s.toLowerCase();return h(r.nombre).includes(N)||h((S=r.familia_id)==null?void 0:S.nombre).includes(N)}),j=g.length,y=Math.ceil(j/p),C=(f-1)*p,i=g.slice(C,C+p),u=r=>{d(r.target.value),b(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Ciclos Formativos"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar ciclos...",value:s,onChange:u})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Familia Profesional"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[i.map(r=>{var N;return e.jsxs("tr",{children:[e.jsx("td",{children:r.nombre}),e.jsx("td",{children:((N=r.familia_id)==null?void 0:N.nombre)||"Sin familia"}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",r),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(r.id),children:"Eliminar"})]})]},r.id)}),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay ciclos disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:r=>b(r)})]})}function Ce({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Centros"}),[]),{items:l,loading:n,error:a,deleteItem:c}=k(o),[s,d]=m.useState(""),[f,b]=m.useState(1),p=5,h=r=>r?r.toString().toLowerCase():"",g=l.filter(r=>{const N=s.toLowerCase();return h(r.nombre).includes(N)||h(r.landing_page).includes(N)}),j=g.length,y=Math.ceil(j/p),C=(f-1)*p,i=g.slice(C,C+p),u=r=>{d(r.target.value),b(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Centros"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control flex-grow-1",placeholder:"Buscar centros...",value:s,onChange:u}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Centro"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Landing Page"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[i.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.nombre}),e.jsx("td",{children:e.jsx("a",{href:r.landing_page,target:"_blank",rel:"noopener noreferrer",children:r.landing_page})}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",r),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(r.id),children:"Eliminar"})]})]},r.id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay centros disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:r=>b(r)})]})}function Ne({onModoCambio:t}){const o=m.useMemo(()=>({nombre:"Estudios"}),[]),{items:l,loading:n,error:a,deleteItem:c}=k(o),[s,d]=m.useState(""),[f,b]=m.useState(1),p=5,h=r=>r?r.toString().toLowerCase():"",g=l.filter(r=>{const N=s.toLowerCase();return h(r.centro).includes(N)||h(r.ciclo).includes(N)}),j=g.length,y=Math.ceil(j/p),C=(f-1)*p,i=g.slice(C,C+p),u=r=>{d(r.target.value),b(1)};return n?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Estudios"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar estudios...",value:s,onChange:u}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Estudio"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Centro"}),e.jsx("th",{children:"Ciclo"}),e.jsx("th",{children:"Curso"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[i.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.centro}),e.jsx("td",{children:r.ciclo}),e.jsx("td",{children:r.curso}),e.jsx("td",{className:"d-flex",children:e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(r.id),children:"Eliminar"})})]},r.id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay estudios disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:r=>b(r)})]})}function Se(){const t=m.useMemo(()=>({nombre:"Inscripciones"}),[]),{loading:o,error:l}=k(t),[n,a]=m.useState([]),[c,s]=m.useState(""),[d,f]=m.useState(1),b=5,[p,h]=m.useState(!1);m.useEffect(()=>{g()},[]);async function g(){const v="http://23.23.87.65/api/";try{h(!0);const w=await fetch(`${v}inscripciones`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!w.ok)throw new Error("Error al obtener las inscripciones.");const L=await w.json();a(L.inscripciones)}catch(w){console.error("Error al cargar la tabla:",w)}finally{setTimeout(()=>h(!1),500)}}async function j(v,w){try{if(h(!0),!(await fetch(`http://23.23.87.65/api/cambiar-estado/${v.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({estado:w})})).ok)throw new Error("Error al actualizar el estado de la inscripción.");await g()}catch(L){console.error("Error al actualizar la inscripción:",L)}}const y=async v=>{await j(v,3)},C=async v=>{await j(v,4)},i=v=>v?v.toString().toLowerCase():"",u=n.filter(v=>{const w=c.toLowerCase();return i(v.nombre).includes(w)||i(v.comentarios).includes(w)||i(v.estado).includes(w)}),r=u.length,N=Math.ceil(r/b),S=(d-1)*b,E=u.slice(S,S+b);return o||p?e.jsx(T,{}):l?e.jsxs("p",{children:["Error: ",l]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Inscripciones"}),e.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar inscripciones...",value:c,onChange:v=>s(v.target.value)})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Comentarios"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[E.map(v=>e.jsxs("tr",{children:[e.jsx("td",{children:v.nombre}),e.jsx("td",{children:v.comentarios}),e.jsx("td",{children:v.estado}),e.jsxs("td",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>y(v),disabled:v.estado==="No Activa",children:"Aprobar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>C(v),disabled:v.estado==="No Activa",children:"Rechazar"})]})]},v.id)),E.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay inscripciones disponibles."})})]})]}),e.jsx(_,{currentPage:d,totalPages:N,onPageChange:v=>f(v)})]})}const M="http://23.23.87.65/api/";async function we(){try{const t=await fetch(`${M}equipos`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error("Error al obtener los datos.");return(await t.json()).equipos||[]}catch(t){return console.error("Error al recoger los equipos:",t),[]}}function Ee(){const[t,o]=m.useState(null),[l,n]=m.useState(!1),[a,c]=m.useState(null),[s,d]=m.useState(""),[f,b]=m.useState(""),[p,h]=m.useState([]),[g,j]=m.useState(1),y=5;m.useEffect(()=>{const w=new Date().toISOString().split("T")[0];d(w),b(w),C()},[]);const C=async()=>{n(!0);try{const v=localStorage.getItem("token"),w=await fetch(`${M}partidos`,{method:"GET",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(!w.ok)throw new Error("Error al obtener los partidos");const F=(await w.json()).partidos||[],O=new Date,A=$=>{const V=new Date($);return V.setHours(0,0,0,0),V},le=F.some($=>A($.fecha)>=A(O));o({iniciado:le});const ce=await we();h(ce)}catch(v){console.error(v),c(v.message)}finally{n(!1)}},i=async()=>{if(!s){alert("Por favor, selecciona una fecha.");return}if(new Date(s)<=new Date(f)){alert("Por favor, selecciona una fecha posterior.");return}n(!0);try{const v=localStorage.getItem("token");if(!(await fetch(`${M}comienzo-torneo`,{method:"POST",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"},body:JSON.stringify({fecha:s})})).ok)throw new Error("Error al iniciar el torneo");o({iniciado:!0}),C()}catch(v){console.error(v),c(v.message)}finally{n(!1)}},u=async()=>{n(!0);try{const v=localStorage.getItem("token");if(!(await fetch(`${M}reinicio-torneo`,{method:"POST",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"},body:JSON.stringify({fecha:s})})).ok)throw new Error("Error al reiniciar el torneo");o({iniciado:!1}),C()}catch(v){console.error(v),c(v.message)}finally{n(!1)}},r=p.length,N=Math.ceil(r/y),S=(g-1)*y,E=p.slice(S,S+y);return l?e.jsx(T,{}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"w-50",children:[e.jsx("h2",{children:"Detalles del Torneo"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Estado:"})," ",t!=null&&t.iniciado?"Iniciado":"No Iniciado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha seleccionada:"})," ",s||"No seleccionada"]})]}),e.jsxs("div",{className:"w-50",children:[e.jsxs("div",{className:"mb-3 w-75",children:[e.jsx("label",{htmlFor:"fecha",className:"form-label",children:"Selecciona la fecha del torneo:"}),e.jsx("input",{type:"date",id:"fecha",className:"form-control",value:s,onChange:v=>d(v.target.value)})]}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx("button",{className:"btn btn-success",onClick:i,disabled:t==null?void 0:t.iniciado,children:"Iniciar Torneo"}),e.jsx("button",{className:"btn btn-danger",onClick:u,disabled:!(t!=null&&t.iniciado),children:"Reiniciar Torneo"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{children:"Participantes"}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre del Equipo"}),e.jsx("th",{children:"Grupo"})]})}),e.jsxs("tbody",{children:[E.map((v,w)=>e.jsxs("tr",{children:[e.jsx("td",{children:v.nombre}),e.jsx("td",{children:v.grupo})]},w)),E.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"text-center",children:"No hay equipos disponibles."})})]})]}),e.jsx(_,{currentPage:g,totalPages:N,onPageChange:j})]})]})}const ke="http://23.23.87.65/api/";async function I(t){const o=localStorage.getItem("token"),l=sessionStorage.getItem(t);if(l)return console.log(`Datos cargados desde sessionStorage para el endpoint: ${t}`),JSON.parse(l);try{const n=await fetch(`${ke}${t}`,{headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Error en la petición: ${n.statusText}`);const a=await n.json();return console.log(`Datos recibidos de la API para ${t}:`,a),sessionStorage.setItem(t,JSON.stringify(a)),a}catch(n){return console.error(`Error al obtener ${t}:`,n),[]}}const P=()=>({centros:()=>I("lista/centros"),ciclos:()=>I("lista/ciclos"),equipos:()=>I("lista/equipos"),estudios:()=>I("lista/estudios"),familias:()=>I("lista/familias"),incidencias:()=>I("lista/incidencias"),jugadores:()=>I("lista/jugadores"),perfiles:()=>I("lista/perfiles"),partidos:()=>I("lista/partidos"),patrocinadores:()=>I("lista/patrocinadores"),retos:()=>I("lista/retos"),ongs:()=>I("lista/ongs"),pabellones:()=>I("lista/pabellones")}),Pe=async()=>{try{console.log("Cargando equipos desde la API...");const t=await P().equipos();return t?Object.keys(t).map(o=>({value:o,label:t[o]})):[]}catch(t){return console.error("Error al obtener los equipos",t),[]}},_e=async()=>{try{console.log("Cargando estudios desde la API...");const t=await P().estudios();return t?Object.keys(t).map(o=>({value:o,label:t[o]})):[]}catch(t){return console.error("Error al obtener los estudios",t),[]}};function Ie({datosIniciales:t,onGuardar:o,onCancelar:l}){const[n,a]=m.useState({nombre_completo:"",equipo_id:"",estudio_id:"",capitan:!1}),[c,s]=m.useState([]),[d,f]=m.useState([]);m.useEffect(()=>{(async()=>{const j=await Pe();s(j)})(),(async()=>{const j=await _e();f(j)})()},[]),m.useEffect(()=>{t&&a({...t,equipo_id:t.equipo_id||"",estudio_id:t.estudio_id||"",capitan:t.capitan||!1})},[t]);const b=h=>{const{name:g,value:j,type:y,checked:C}=h.target;a({...n,[g]:y==="checkbox"?C:j})},p=h=>{h.preventDefault(),o(n)};return e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nombre_completo",children:"Nombre Completo"}),e.jsx("input",{type:"text",name:"nombre_completo",id:"nombre_completo",placeholder:"Ingrese su nombre completo",value:n.nombre_completo||"",onChange:b})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"equipo_id",children:"Equipo"}),e.jsxs("select",{name:"equipo_id",id:"equipo_id",value:n.equipo_id||"",onChange:b,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un equipo"}),c.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"estudio_id",children:"Estudio"}),e.jsxs("select",{name:"estudio_id",id:"estudio_id",value:n.estudio_id||"",onChange:b,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un estudio"}),d.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"capitan",children:"Capitan"}),e.jsx("input",{type:"checkbox",name:"capitan",id:"capitan",checked:n.capitan||!1,onChange:b})]}),e.jsxs("div",{children:[e.jsx("button",{type:"submit",children:"Guardar"}),e.jsx("button",{type:"button",onClick:l,children:"Cancelar"})]})]})}const Te=async()=>{try{console.log("Cargando incidencias desde la API...");const t=await P().incidencias();return t?Object.keys(t).map(o=>({value:o,label:t[o]})):[]}catch(t){return console.error("Error al obtener las incidencias",t),[]}};function Le({datosIniciales:t,onGuardar:o,onCancelar:l}){const[n,a]=m.useState(""),[c,s]=m.useState([]),[d,f]=m.useState(t["equipo local"].nombre),[b,p]=m.useState(t["equipo visitante"].nombre),[h,g]=m.useState([]),[j,y]=m.useState(""),[C,i]=m.useState(""),[u,r]=m.useState(""),[N,S]=m.useState("");m.useEffect(()=>{(async()=>{const w=await Te();console.log("Incidencias cargadas:",w),g(w)})()},[]),m.useEffect(()=>{if(n){const v=t["equipo local"].nombre===n?t["equipo local"].Jugadores:t["equipo visitante"].Jugadores;s(v)}},[n,t]);const E=!n||!u||!N||!j||!C;return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"w-50",children:[e.jsxs("h3",{className:"text-lg font-bold mb-2 text-center",children:["Actas - ",d]}),e.jsxs("table",{className:"w-full mx-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border p-2",children:"Jugador"}),e.jsx("th",{className:"border p-2",children:"Incidencia"}),e.jsx("th",{className:"border p-2",children:"Minuto"})]})}),e.jsx("tbody",{children:t.actas.filter(v=>v.equipo===d).map(v=>e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"border p-2",children:v.jugador||"-"}),e.jsx("td",{className:"border p-2",children:v.incidencia}),e.jsx("td",{className:"border p-2",children:v.minuto})]},v.id))})]})]}),e.jsxs("div",{className:"w-50",children:[e.jsxs("h3",{className:"text-lg font-bold mb-2 text-center",children:["Actas - ",b]}),e.jsxs("table",{className:"w-full mx-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border p-2",children:"Jugador"}),e.jsx("th",{className:"border p-2",children:"Incidencia"}),e.jsx("th",{className:"border p-2",children:"Minuto"})]})}),e.jsx("tbody",{children:t.actas.filter(v=>v.equipo===b).map(v=>e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"border p-2",children:v.jugador||"-"}),e.jsx("td",{className:"border p-2",children:v.incidencia}),e.jsx("td",{className:"border p-2",children:v.minuto})]},v.id))})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Seleccionar Equipo"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"equipo",value:d,checked:n===d,onChange:v=>a(v.target.value),className:"mr-2"}),d]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"equipo",value:b,checked:n===b,onChange:v=>a(v.target.value),className:"mr-2"}),b]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Seleccionar Jugador"}),e.jsxs("select",{className:"w-full p-2 border rounded",disabled:!n,onChange:v=>r(v.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un jugador"}),c.map(v=>e.jsx("option",{value:v.nombre,children:v.nombre},v.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Seleccionar Incidencia"}),e.jsxs("select",{className:"w-full p-2 border rounded",onChange:v=>S(v.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione una incidencia"}),h.length>0?h.map((v,w)=>e.jsx("option",{value:v.value,children:v.label},w)):e.jsx("option",{disabled:!0,children:"Cargando..."})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Minuto"}),e.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:j,onChange:v=>y(v.target.value),min:"1",max:"90",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Comentario"}),e.jsx("textarea",{className:"w-full p-2 border rounded",value:C,onChange:v=>i(v.target.value),rows:"4",placeholder:"Escribe un comentario sobre la incidencia",required:!0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:o,disabled:E,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Guardar"}),e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 bg-gray-300 rounded",children:"Cancelar"})]})]})}var B={exports:{}},R,H;function Fe(){if(H)return R;H=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return R=t,R}var G,K;function qe(){if(K)return G;K=1;var t=Fe();function o(){}function l(){}return l.resetWarningCache=o,G=function(){function n(s,d,f,b,p,h){if(h!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}n.isRequired=n;function a(){return n}var c={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:l,resetWarningCache:o};return c.PropTypes=c,c},G}var W;function De(){return W||(W=1,B.exports=qe()()),B.exports}var x=De(),J=function(){return J=Object.assign||function(t){for(var o,l=1,n=arguments.length;l<n;l++){o=arguments[l];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},J.apply(this,arguments)},oe={onActivate:x.func,onAddUndo:x.func,onBeforeAddUndo:x.func,onBeforeExecCommand:x.func,onBeforeGetContent:x.func,onBeforeRenderUI:x.func,onBeforeSetContent:x.func,onBeforePaste:x.func,onBlur:x.func,onChange:x.func,onClearUndos:x.func,onClick:x.func,onContextMenu:x.func,onCommentChange:x.func,onCompositionEnd:x.func,onCompositionStart:x.func,onCompositionUpdate:x.func,onCopy:x.func,onCut:x.func,onDblclick:x.func,onDeactivate:x.func,onDirty:x.func,onDrag:x.func,onDragDrop:x.func,onDragEnd:x.func,onDragGesture:x.func,onDragOver:x.func,onDrop:x.func,onExecCommand:x.func,onFocus:x.func,onFocusIn:x.func,onFocusOut:x.func,onGetContent:x.func,onHide:x.func,onInit:x.func,onInput:x.func,onKeyDown:x.func,onKeyPress:x.func,onKeyUp:x.func,onLoadContent:x.func,onMouseDown:x.func,onMouseEnter:x.func,onMouseLeave:x.func,onMouseMove:x.func,onMouseOut:x.func,onMouseOver:x.func,onMouseUp:x.func,onNodeChange:x.func,onObjectResizeStart:x.func,onObjectResized:x.func,onObjectSelected:x.func,onPaste:x.func,onPostProcess:x.func,onPostRender:x.func,onPreProcess:x.func,onProgressState:x.func,onRedo:x.func,onRemove:x.func,onReset:x.func,onSaveContent:x.func,onSelectionChange:x.func,onSetAttrib:x.func,onSetContent:x.func,onShow:x.func,onSubmit:x.func,onUndo:x.func,onVisualAid:x.func,onSkinLoadError:x.func,onThemeLoadError:x.func,onModelLoadError:x.func,onPluginLoadError:x.func,onIconsLoadError:x.func,onLanguageLoadError:x.func,onScriptsLoad:x.func,onScriptsLoadError:x.func},Oe=J({apiKey:x.string,licenseKey:x.string,id:x.string,inline:x.bool,init:x.object,initialValue:x.string,onEditorChange:x.func,value:x.string,tagName:x.string,tabIndex:x.number,cloudChannel:x.string,plugins:x.oneOfType([x.string,x.array]),toolbar:x.oneOfType([x.string,x.array]),disabled:x.bool,textareaName:x.string,tinymceScriptSrc:x.oneOfType([x.string,x.arrayOf(x.string),x.arrayOf(x.shape({src:x.string,async:x.bool,defer:x.bool}))]),rollback:x.oneOfType([x.number,x.oneOf([!1])]),scriptLoading:x.shape({async:x.bool,defer:x.bool,delay:x.number})},oe),z=function(t){return typeof t=="function"},Y=function(t){return t in oe},X=function(t){return t.substr(2)},Ae=function(t,o,l,n,a,c,s){var d=Object.keys(a).filter(Y),f=Object.keys(c).filter(Y),b=d.filter(function(h){return c[h]===void 0}),p=f.filter(function(h){return a[h]===void 0});b.forEach(function(h){var g=X(h),j=s[g];l(g,j),delete s[g]}),p.forEach(function(h){var g=n(t,h),j=X(h);s[j]=g,o(j,g)})},Me=function(t,o,l,n,a){return Ae(a,t.on.bind(t),t.off.bind(t),function(c,s){return function(d){var f;return(f=c(s))===null||f===void 0?void 0:f(d,t)}},o,l,n)},Z=0,ie=function(t){var o=Date.now(),l=Math.floor(Math.random()*1e9);return Z++,t+"_"+l+Z+String(o)},ee=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},te=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},$e=function(t,o){return te(t).concat(te(o))},Be=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Re=function(t){if(!("isConnected"in Node.prototype)){for(var o=t,l=t.parentNode;l!=null;)o=l,l=o.parentNode;return o===t.ownerDocument}return t.isConnected},ne=function(t,o){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(o):t.setMode(o))},Q=function(){return Q=Object.assign||function(t){for(var o,l=1,n=arguments.length;l<n;l++){o=arguments[l];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},Q.apply(this,arguments)},Ge=function(t,o,l){var n,a,c=t.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=o.id,c.src=o.src,c.async=(n=o.async)!==null&&n!==void 0?n:!1,c.defer=(a=o.defer)!==null&&a!==void 0?a:!1;var s=function(){c.removeEventListener("load",s),c.removeEventListener("error",d),l(o.src)},d=function(f){c.removeEventListener("load",s),c.removeEventListener("error",d),l(o.src,f)};c.addEventListener("load",s),c.addEventListener("error",d),t.head&&t.head.appendChild(c)},ze=function(t){var o={},l=function(s,d){var f=o[s];f.done=!0,f.error=d;for(var b=0,p=f.handlers;b<p.length;b++){var h=p[b];h(s,d)}f.handlers=[]},n=function(s,d,f){var b=function(r){return f!==void 0?f(r):console.error(r)};if(s.length===0){b(new Error("At least one script must be provided"));return}for(var p=0,h=!1,g=function(r,N){h||(N?(h=!0,b(N)):++p===s.length&&d())},j=0,y=s;j<y.length;j++){var C=y[j],i=o[C.src];if(i)i.done?g(C.src,i.error):i.handlers.push(g);else{var u=ie("tiny-");o[C.src]={id:u,src:C.src,done:!1,error:null,handlers:[g]},Ge(t,Q({id:u},C),l)}}},a=function(){for(var s,d=0,f=Object.values(o);d<f.length;d++){var b=f[d],p=t.getElementById(b.id);p!=null&&p.tagName==="SCRIPT"&&((s=p.parentNode)===null||s===void 0||s.removeChild(p))}o={}},c=function(){return t};return{loadScripts:n,deleteScripts:a,getDocument:c}},Ue=function(){var t=[],o=function(a){var c=t.find(function(s){return s.getDocument()===a});return c===void 0&&(c=ze(a),t.push(c)),c},l=function(a,c,s,d,f){var b=function(){return o(a).loadScripts(c,d,f)};s>0?setTimeout(b,s):b()},n=function(){for(var a=t.pop();a!=null;a=t.pop())a.deleteScripts()};return{loadList:l,reinitialize:n}},Je=Ue(),U=function(t){var o=t;return o&&o.tinymce?o.tinymce:null},Qe=function(){var t=function(o,l){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},t(o,l)};return function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");t(o,l);function n(){this.constructor=o}o.prototype=l===null?Object.create(l):(n.prototype=l.prototype,new n)}}(),q=function(){return q=Object.assign||function(t){for(var o,l=1,n=arguments.length;l<n;l++){o=arguments[l];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},q.apply(this,arguments)},Ve=function(t){Qe(o,t);function o(l){var n,a,c,s=t.call(this,l)||this;return s.rollbackTimer=void 0,s.valueCursor=void 0,s.rollbackChange=function(){var d=s.editor,f=s.props.value;d&&f&&f!==s.currentContent&&d.undoManager.ignore(function(){if(d.setContent(f),s.valueCursor&&(!s.inline||d.hasFocus()))try{d.selection.moveToBookmark(s.valueCursor)}catch{}}),s.rollbackTimer=void 0},s.handleBeforeInput=function(d){if(s.props.value!==void 0&&s.props.value===s.currentContent&&s.editor&&(!s.inline||s.editor.hasFocus()))try{s.valueCursor=s.editor.selection.getBookmark(3)}catch{}},s.handleBeforeInputSpecial=function(d){(d.key==="Enter"||d.key==="Backspace"||d.key==="Delete")&&s.handleBeforeInput(d)},s.handleEditorChange=function(d){var f=s.editor;if(f&&f.initialized){var b=f.getContent();s.props.value!==void 0&&s.props.value!==b&&s.props.rollback!==!1&&(s.rollbackTimer||(s.rollbackTimer=window.setTimeout(s.rollbackChange,typeof s.props.rollback=="number"?s.props.rollback:200))),b!==s.currentContent&&(s.currentContent=b,z(s.props.onEditorChange)&&s.props.onEditorChange(b,f))}},s.handleEditorChangeSpecial=function(d){(d.key==="Backspace"||d.key==="Delete")&&s.handleEditorChange(d)},s.initialise=function(d){var f,b,p;d===void 0&&(d=0);var h=s.elementRef.current;if(h){if(!Re(h)){if(d===0)setTimeout(function(){return s.initialise(1)},1);else if(d<100)setTimeout(function(){return s.initialise(d+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var g=U(s.view);if(!g)throw new Error("tinymce should have been loaded into global scope");var j=q(q(q(q({},s.props.init),{selector:void 0,target:h,readonly:s.props.disabled,inline:s.inline,plugins:$e((f=s.props.init)===null||f===void 0?void 0:f.plugins,s.props.plugins),toolbar:(b=s.props.toolbar)!==null&&b!==void 0?b:(p=s.props.init)===null||p===void 0?void 0:p.toolbar}),s.props.licenseKey?{license_key:s.props.licenseKey}:{}),{setup:function(y){s.editor=y,s.bindHandlers({}),s.inline&&!ee(h)&&y.once("PostRender",function(C){y.setContent(s.getInitialValue(),{no_events:!0})}),s.props.init&&z(s.props.init.setup)&&s.props.init.setup(y)},init_instance_callback:function(y){var C,i,u=s.getInitialValue();s.currentContent=(C=s.currentContent)!==null&&C!==void 0?C:y.getContent(),s.currentContent!==u&&(s.currentContent=u,y.setContent(u),y.undoManager.clear(),y.undoManager.add(),y.setDirty(!1));var r=(i=s.props.disabled)!==null&&i!==void 0?i:!1;ne(s.editor,r?"readonly":"design"),s.props.init&&z(s.props.init.init_instance_callback)&&s.props.init.init_instance_callback(y)}});s.inline||(h.style.visibility=""),ee(h)&&(h.value=s.getInitialValue()),g.init(j)}},s.id=s.props.id||ie("tiny-react"),s.elementRef=m.createRef(),s.inline=(c=(n=s.props.inline)!==null&&n!==void 0?n:(a=s.props.init)===null||a===void 0?void 0:a.inline)!==null&&c!==void 0?c:!1,s.boundHandlers={},s}return Object.defineProperty(o.prototype,"view",{get:function(){var l,n;return(n=(l=this.elementRef.current)===null||l===void 0?void 0:l.ownerDocument.defaultView)!==null&&n!==void 0?n:window},enumerable:!1,configurable:!0}),o.prototype.componentDidUpdate=function(l){var n=this,a,c;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(l),this.editor.initialized)){if(this.currentContent=(a=this.currentContent)!==null&&a!==void 0?a:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==l.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var s=this.editor;s.undoManager.transact(function(){var f;if(!n.inline||s.hasFocus())try{f=s.selection.getBookmark(3)}catch{}var b=n.valueCursor;if(s.setContent(n.props.value),!n.inline||s.hasFocus())for(var p=0,h=[f,b];p<h.length;p++){var g=h[p];if(g)try{s.selection.moveToBookmark(g),n.valueCursor=g;break}catch{}}})}if(this.props.disabled!==l.disabled){var d=(c=this.props.disabled)!==null&&c!==void 0?c:!1;ne(this.editor,d?"readonly":"design")}}},o.prototype.componentDidMount=function(){var l=this,n,a,c,s,d;if(U(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(a=(n=this.props).onScriptsLoadError)===null||a===void 0||a.call(n,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((c=this.elementRef.current)===null||c===void 0)&&c.ownerDocument){var f=function(){var p,h;(h=(p=l.props).onScriptsLoad)===null||h===void 0||h.call(p),l.initialise()},b=function(p){var h,g;(g=(h=l.props).onScriptsLoadError)===null||g===void 0||g.call(h,p)};Je.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(d=(s=this.props.scriptLoading)===null||s===void 0?void 0:s.delay)!==null&&d!==void 0?d:0,f,b)}},o.prototype.componentWillUnmount=function(){var l=this,n=this.editor;n&&(n.off(this.changeEvents(),this.handleEditorChange),n.off(this.beforeInputEvent(),this.handleBeforeInput),n.off("keypress",this.handleEditorChangeSpecial),n.off("keydown",this.handleBeforeInputSpecial),n.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(a){n.off(a,l.boundHandlers[a])}),this.boundHandlers={},n.remove(),this.editor=void 0)},o.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},o.prototype.changeEvents=function(){var l,n,a,c=(a=(n=(l=U(this.view))===null||l===void 0?void 0:l.Env)===null||n===void 0?void 0:n.browser)===null||a===void 0?void 0:a.isIE();return c?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},o.prototype.beforeInputEvent=function(){return Be()?"beforeinput SelectionChange":"SelectionChange"},o.prototype.renderInline=function(){var l=this.props.tagName,n=l===void 0?"div":l;return m.createElement(n,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},o.prototype.renderIframe=function(){return m.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},o.prototype.getScriptSources=function(){var l,n,a=(l=this.props.scriptLoading)===null||l===void 0?void 0:l.async,c=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:a,defer:c}]:this.props.tinymceScriptSrc.map(function(b){return typeof b=="string"?{src:b,async:a,defer:c}:b});var s=this.props.cloudChannel,d=this.props.apiKey?this.props.apiKey:"no-api-key",f="https://cdn.tiny.cloud/1/".concat(d,"/tinymce/").concat(s,"/tinymce.min.js");return[{src:f,async:a,defer:c}]},o.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},o.prototype.bindHandlers=function(l){var n=this;if(this.editor!==void 0){Me(this.editor,l,this.props,this.boundHandlers,function(d){return n.props[d]});var a=function(d){return d.onEditorChange!==void 0||d.value!==void 0},c=a(l),s=a(this.props);!c&&s?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):c&&!s&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},o.propTypes=Oe,o.defaultProps={cloudChannel:"7"},o}(m.Component);const He=({datosIniciales:t,onGuardar:o,onCancelar:l})=>{const[n,a]=m.useState({titulo:"",contenido:"",publicacionable_type:"",publicacionable_id:"",ruta_video:"",ruta_audio:"",portada:!1,imagen:null}),[c,s]=m.useState([]),[d,f]=m.useState({titulo:"",contenido:"",imagen:""}),b=localStorage.getItem("token");m.useEffect(()=>{t&&(a(i=>({...i,...t,publicacionable_type:t.seccion,publicacionable_id:t.elemento,imagen:null})),t.seccion&&p(t.seccion,t.elemento))},[t]);const p=async(i,u)=>{let r;switch(i.toLowerCase()){case"equipo":r=await P().equipos();break;case"partido":r=await P().partidos();break;case"patrocinador":r=await P().patrocinadores();break;case"jugador":r=await P().jugadores();break;case"reto":r=await P().retos();break;case"ong":r=await P().ongs();break;case"pabellon":r=await P().pabellones();break;default:r={}}if(r){let N;i.toLowerCase()=="jugador"?N=Object.keys(r).map(S=>({id:S,nombre:r[S].nombre})):N=Object.keys(r).map(S=>({id:S,nombre:r[S]})),s(N),a(S=>({...S,publicacionable_id:u||""}))}},h=async i=>{const{name:u,value:r,type:N,checked:S,files:E}=i.target;u==="publicacionable_type"?(a(v=>({...v,publicacionable_type:r,publicacionable_id:""})),p(r,"")):a(v=>({...v,[u]:N==="checkbox"?S:N==="file"?E[0]:r}))},g=i=>{a(u=>({...u,contenido:i}))},j=()=>{const i={titulo:"",contenido:"",imagen:""};return n.portada&&(n.titulo.trim()||(i.titulo="El título es obligatorio si la publicación está en la portada."),n.contenido.trim()||(i.contenido="El contenido es obligatorio si la publicación está en la portada."),n.imagen||(i.imagen="Una imagen es obligatoria si la publicación está en la portada.")),f(i),Object.values(i).every(u=>u==="")},y=async i=>{if(i.preventDefault(),!j())return;const u="http://23.23.87.65/api/";try{const r=await fetch(`${u}publicaciones`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(n)}),N=await r.json();r.ok?(console.log("Publicación creada con ID:",N.publicacion.id),n.imagen&&await C(N.publicacion.id),alert("Publicación creada con éxito")):console.error("Error en la creación:",N)}catch(r){console.error("Error al enviar la publicación:",r)}},C=async i=>{const u=new FormData;u.append("imagen",n.imagen);const r="http://23.23.87.65/api/";try{const N=await fetch(`${r}publicaciones/${i}/subir-imagen`,{method:"POST",headers:{Authorization:`Bearer ${b}`},body:u}),S=await N.json();N.ok?console.log("Imagen subida correctamente:",S):console.error("Error al subir imagen:",S)}catch(N){console.error("Error al subir imagen:",N)}};return e.jsxs("form",{onSubmit:y,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Crear Publicación"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"titulo",className:"form-label",children:"Título"}),e.jsx("input",{type:"text",className:"form-control",name:"titulo",id:"titulo",placeholder:"Ingrese el título",value:n.titulo,onChange:h}),d.titulo&&e.jsx("span",{className:"text-danger d-block",children:d.titulo})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Contenido"}),e.jsx(Ve,{apiKey:"1970hen3xxpeg7q4hxbmuo33gez4jmscea18iie0jpz65znn",value:n.contenido,onEditorChange:g,init:{height:300,menubar:!0,plugins:"advlist autolink lists link image charmap print preview anchor",toolbar:"undo redo | formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link"}}),d.contenido&&e.jsx("span",{className:"text-danger d-block",children:d.contenido})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"publicacionable_type",className:"form-label",children:"Tipo de Publicación"}),e.jsxs("select",{className:"form-select",name:"publicacionable_type",id:"publicacionable_type",value:n.publicacionable_type,onChange:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un tipo"}),["Equipo","Partido","Patrocinador","Jugador","Reto","Ong","Pabellon"].map((i,u)=>e.jsx("option",{value:i,children:i},u))]})]}),n.publicacionable_type&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"publicacionable_id",className:"form-label",children:"Nombre"}),e.jsxs("select",{className:"form-select",name:"publicacionable_id",id:"publicacionable_id",value:n.publicacionable_id,onChange:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione una opcion"}),c.map((i,u)=>e.jsx("option",{value:i.id,children:i.nombre},u))]})]}),e.jsxs("div",{className:"mb-3 form-check",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",name:"portada",id:"portada",checked:n.portada,onChange:h}),e.jsx("label",{className:"form-check-label",htmlFor:"portada",children:"Usar como portada"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"imagen",className:"form-label",children:"Subir Imagen"}),e.jsx("input",{type:"file",className:"form-control",name:"imagen",id:"imagen",accept:"image/*",onChange:h}),d.imagen&&e.jsx("span",{className:"text-danger d-block",children:d.imagen})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:"btn btn-success",children:t==null?"Crear publicacion":"Guardar publicacion"}),e.jsx("button",{type:"reset",className:"btn btn-secondary",onClick:l,children:"Cancelar"})]})]})};function Ke(){}const We=async()=>{try{const t=await P().perfiles();return t?(sessionStorage.setItem("perfiles",JSON.stringify(t)),Object.keys(t).map(o=>({value:o,label:t[o]}))):[]}catch(t){return console.error("Error al obtener los perfiles",t),[]}};function Ye({datosIniciales:t,onGuardar:o,onCancelar:l}){const[n,a]=m.useState({nombre_completo:"",email:"",password:"",perfil_id:""}),[c,s]=m.useState([]),[d,f]=m.useState(!1),{createItem:b,updateItem:p}=k({nombre:"Usuarios"});m.useEffect(()=>{const j=async()=>{const y=await We();s(y)};c.length===0&&j()},[c]),m.useEffect(()=>{t&&a(j=>{var y;return{nombre_completo:t.nombre||t.nombre_completo||"",email:t.email||"",password:"",perfil_id:((y=t.perfil)==null?void 0:y.id)||""}})},[t]);const h=j=>{const{name:y,value:C}=j.target;a({...n,[y]:C})},g=async j=>{if(j.preventDefault(),f(!0),!n.nombre_completo.trim()||!n.email.trim()||!n.perfil_id){alert("El nombre completo, email y perfil son obligatorios."),f(!1);return}const y={...n};y.password||delete y.password;try{t?(console.log("Actualizando usuario:",y),t.id?(await p(t.id,y),console.log("Usuario actualizado con éxito.")):console.error("ID no encontrado para la actualización.")):(console.log("Creando nuevo usuario:",y),await b(y),console.log("Usuario creado con éxito."))}catch(C){console.error("Error al guardar usuario:",C)}finally{f(!1)}};return e.jsxs("form",{onSubmit:g,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t?"Editar Usuario":"Crear Usuario"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre_completo",className:"form-label",children:"Nombre Completo"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre_completo",id:"nombre_completo",placeholder:"Ingrese el nombre completo",value:n.nombre_completo,onChange:h,required:!0,disabled:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",name:"email",id:"email",placeholder:"Ingrese el email",value:n.email,onChange:h,required:!0,disabled:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Contraseña"}),e.jsx("input",{type:"password",className:"form-control",name:"password",id:"password",placeholder:"Ingrese la contraseña",value:n.password,onChange:h,disabled:d}),e.jsx("small",{className:"form-text text-muted",children:"Déjelo en blanco para no cambiar la contraseña."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"perfil_id",className:"form-label",children:"Tipo de Perfil"}),e.jsxs("select",{className:"form-select",name:"perfil_id",id:"perfil_id",value:n.perfil_id||"",onChange:h,required:!0,disabled:d,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un perfil"}),c.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:"btn btn-success",disabled:d,children:d?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,disabled:d,children:"Cancelar"})]})]})}const Xe=async()=>{try{const t=sessionStorage.getItem("estudios");if(t){console.log("Cargando estudios desde sessionStorage");const l=JSON.parse(t);return Object.keys(l).map(n=>({value:n,label:l[n]}))}console.log("Cargando estudios desde la API...");const o=await P().estudios();return o?Object.keys(o).map(l=>({value:l,label:o[l]})):[]}catch(t){return console.error("Error al obtener los estudios",t),[]}};function Ze({datosIniciales:t,onGuardar:o,onCancelar:l}){const[n,a]=m.useState({titulo:"",texto:"",estudio_id:null}),[c,s]=m.useState([]),[d,f]=m.useState(!1),{createItem:b,updateItem:p,fetchItems:h,error:g}=k({nombre:"Retos"});m.useEffect(()=>{(async()=>{const i=await Xe();s(i)})()},[]),m.useEffect(()=>{var C;t&&a({...t,estudio_id:((C=t.estudio)==null?void 0:C.id)||null})},[t]);const j=C=>{const{name:i,value:u}=C.target;a({...n,[i]:u})},y=async C=>{C.preventDefault(),f(!0);const i=t?"editar":"crear";try{i==="crear"?await b(n):await p(n.id,n),h(),o(n)}catch(u){console.error("Error al guardar reto:",u)}finally{f(!1)}};return e.jsxs("form",{onSubmit:y,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Formulario de Reto"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"titulo",className:"form-label",children:"Título"}),e.jsx("input",{type:"text",className:"form-control",name:"titulo",id:"titulo",placeholder:"Ingrese el título",value:n.titulo||"",required:!0,onChange:j,disabled:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"texto",className:"form-label",children:"Texto"}),e.jsx("textarea",{className:"form-control",name:"texto",id:"texto",placeholder:"Ingrese el texto del reto",value:n.texto||"",required:!0,onChange:j,style:{height:"150px",resize:"vertical"},disabled:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"estudio_id",className:"form-label",children:"Estudio"}),e.jsxs("select",{className:"form-select",name:"estudio_id",id:"estudio_id",value:n.estudio_id||"",required:!0,onChange:j,disabled:d,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un estudio"}),c.map(C=>e.jsx("option",{value:C.value,children:C.label},C.value))]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:d,children:d?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,disabled:d,children:"Cancelar"})]}),g&&e.jsx("p",{className:"text-danger mt-3",children:g})]})}function et(){}function tt(){}function nt({datosIniciales:t,onGuardar:o,onCancelar:l}){const[n,a]=m.useState({nombre:"",landing_page:""}),[c,s]=m.useState(!1),{createItem:d,updateItem:f,fetchItems:b,error:p}=k({nombre:"Patrocinadores"});m.useState(()=>{t&&a(t)},[t]);const h=j=>{const{name:y,value:C}=j.target;a({...n,[y]:C})},g=async j=>{j.preventDefault(),s(!0);try{t?await f(n.id,n):await d(n),b(),o(n)}catch(y){console.error("Error al guardar patrocinador:",y)}finally{s(!1)}};return e.jsxs("form",{onSubmit:g,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Formulario de Patrocinador"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre",value:n.nombre||"",required:!0,onChange:h,disabled:c})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"landing_page",className:"form-label",children:"Landing Page"}),e.jsx("input",{type:"url",className:"form-control",name:"landing_page",id:"landing_page",placeholder:"Ingrese la URL",value:n.landing_page||"",required:!0,onChange:h,disabled:c})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:c,children:c?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,disabled:c,children:"Cancelar"})]}),p&&e.jsx("p",{className:"text-danger mt-3",children:p})]})}function rt({datosIniciales:t,onGuardar:o,onCancelar:l}){const[n,a]=m.useState({nombre:""}),[c,s]=m.useState(!1),{createItem:d,updateItem:f,fetchItems:b,error:p}=k({nombre:"Familias"});m.useState(()=>{t&&a({nombre:t.nombre||""})},[t]);const h=j=>{a({...n,nombre:j.target.value})},g=async j=>{j.preventDefault(),s(!0);try{t?await f(t.id,n):await d(n),b(),o(n)}catch(y){console.error("Error al guardar familia:",y)}finally{s(!1)}};return e.jsxs("form",{onSubmit:g,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Formulario de Familia"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre",value:n.nombre,required:!0,onChange:h,disabled:c})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:c,children:c?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,disabled:c,children:"Cancelar"})]}),p&&e.jsx("p",{className:"text-danger mt-3",children:p})]})}const st=async()=>{try{console.log("Cargando familias desde la API...");const t=await P().familias();return t?Object.keys(t).map(o=>({value:o,label:t[o]})):[]}catch(t){return console.error("Error al obtener las familias",t),[]}};function at({datosIniciales:t,onGuardar:o,onCancelar:l}){var h;const[n,a]=m.useState({}),[c,s]=m.useState({}),[d,f]=m.useState([]);m.useEffect(()=>{(async()=>{const j=await st();f(j)})()},[]),m.useEffect(()=>{t&&a(t)},[t]);const b=g=>{const{name:j,value:y}=g.target;a({...n,[j]:y})},p=g=>{g.preventDefault(),o(n)};return console.log(n),e.jsxs("form",{onSubmit:p,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t!=null?"Editar Ciclo":"Crear ciclo"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre",value:n.nombre||"",onChange:b})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"familia_id",className:"form-label",children:"Familia"}),e.jsxs("select",{className:"form-select",name:"familia_id",id:"familia_id",value:((h=n.familia_id)==null?void 0:h.id)||"",onChange:b,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione una familia"}),d.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:"btn btn-success",children:"Guardar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancelar"})]})]})}function ot({datosIniciales:t,onGuardar:o,onCancelar:l}){const[n,a]=m.useState({nombre:"",landing_page:""}),[c,s]=m.useState({}),[d,f]=m.useState(!1),{createItem:b,updateItem:p,error:h}=k({nombre:"Centros"});m.useEffect(()=>{t&&a({id:t.id,nombre:t.nombre||"",landing_page:t.landing_page||""})},[t]);const g=()=>{let C={};return n.nombre.trim()||(C.nombre="El nombre es obligatorio"),n.landing_page.trim()?/^https?:\/\/[^\s]+$/.test(n.landing_page)||(C.landing_page="La URL debe ser válida (ej. http://example.com)"):C.landing_page="La página web es obligatoria",s(C),Object.keys(C).length===0},j=C=>{const{name:i,value:u}=C.target;a(r=>({...r,[i]:u}))},y=async C=>{if(C.preventDefault(),!!g()){f(!0);try{t?await p(n.id,n):await b(n),o(n)}catch(i){console.error("Error al guardar:",i)}finally{f(!1)}}};return e.jsxs("form",{onSubmit:y,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t?"Editar Centro":"Crear Centro"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre del centro",value:n.nombre,onChange:j,className:`form-control ${c.nombre?"is-invalid":""}`,disabled:d}),c.nombre&&e.jsx("div",{className:"invalid-feedback",children:c.nombre})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"landing_page",className:"form-label",children:"Página web"}),e.jsx("input",{type:"text",name:"landing_page",id:"landing_page",placeholder:"Ingrese la página web",value:n.landing_page,onChange:j,className:`form-control ${c.landing_page?"is-invalid":""}`,disabled:d}),c.landing_page&&e.jsx("div",{className:"invalid-feedback",children:c.landing_page})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:d,children:d?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,disabled:d,children:"Cancelar"})]}),Object.keys(c).length>0&&e.jsx("div",{className:"alert alert-danger mt-3",children:e.jsx("ul",{children:Object.values(c).map((C,i)=>e.jsx("li",{children:C},i))})}),h&&e.jsx("div",{className:"alert alert-danger mt-3",children:h})]})}const it=async()=>{try{const t=sessionStorage.getItem("centros");if(t){console.log("Cargando centros desde sessionStorage");const l=JSON.parse(t);return Object.keys(l).map(n=>({value:n,label:l[n]}))}console.log("Cargando centros desde la API...");const o=await P().centros();return o?Object.keys(o).map(l=>({value:l,label:o[l]})):[]}catch(t){return console.error("Error al obtener los centros",t),[]}},lt=async()=>{try{const t=sessionStorage.getItem("ciclos");if(t){console.log("Cargando ciclos desde sessionStorage");const l=JSON.parse(t);return Object.keys(l).map(n=>({value:n,label:l[n]}))}console.log("Cargando ciclos desde la API...");const o=await P().ciclos();return o?Object.keys(o).map(l=>({value:l,label:o[l]})):[]}catch(t){return console.error("Error al obtener los ciclos",t),[]}};function ct({datosIniciales:t,onGuardar:o,onCancelar:l}){const[n,a]=m.useState({centro_id:"",ciclo_id:"",curso:""}),[c,s]=m.useState([]),[d,f]=m.useState([]),[b,p]=m.useState(!1),[h,g]=m.useState(!1),{createItem:j,updateItem:y,error:C}=k({nombre:"Estudios"});m.useEffect(()=>{(async()=>{s(await it())})(),(async()=>{f(await lt())})()},[]),m.useEffect(()=>{if(t&&c.length>0&&d.length>0&&!b){const r=c.find(S=>S.label===t.centro),N=d.find(S=>S.label===t.ciclo);a({centro_id:r?r.value:"",ciclo_id:N?N.value:"",curso:t.curso?t.curso.toString():""}),p(!0)}},[t,c,d,b]);const i=r=>{const{name:N,value:S}=r.target;a({...n,[N]:S.toString()})},u=async r=>{r.preventDefault(),g(!0);try{t?await y(t.id,n):await j(n),o(n)}catch(N){console.error("Error al guardar estudio:",N)}finally{g(!1)}};return e.jsxs("form",{onSubmit:u,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t?"Editar estudio":"Crear estudio"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"centro_id",className:"form-label",children:"Centro"}),e.jsxs("select",{name:"centro_id",id:"centro_id",className:"form-select",value:n.centro_id,onChange:i,disabled:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un centro"}),c.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"ciclo_id",className:"form-label",children:"Ciclo"}),e.jsxs("select",{name:"ciclo_id",id:"ciclo_id",className:"form-select",value:n.ciclo_id,onChange:i,disabled:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un ciclo"}),d.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"curso",className:"form-label",children:"Curso"}),e.jsxs("select",{name:"curso",id:"curso",className:"form-select",value:n.curso,onChange:i,disabled:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un curso"}),e.jsx("option",{value:"1",children:"1º"}),e.jsx("option",{value:"2",children:"2º"})]})]}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:h,children:h?"Guardando...":"Guardar"}),e.jsx("button",{type:"button",className:"btn btn-secondary ms-2",onClick:l,disabled:h,children:"Cancelar"}),C&&e.jsx("p",{className:"text-danger mt-3",children:C})]})}function ut(){const{seccion:t}=se(),o=ae(),{seguridad:l}=m.useContext(re),[n,a]=m.useState(null),[c,s]=m.useState(null),[d,f]=m.useState(t?D(t):""),b=j=>{const y=D(j.nombre);n!=null?window.confirm("¿Estás seguro de salir del apartado de edición / creación?")&&(f(y),a(null)):(f(y),o(`/administracion/${y}`))};m.useEffect(()=>{n==null&&o(`/administracion/${d}`)},[n]);const p=(j,y=null)=>{a(j),s(y)},h=()=>{switch(d){case"jugadores":return e.jsx(Ie,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"partidos":return e.jsx(Le,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"publicaciones":return e.jsx(He,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"actas":return e.jsx(Ke,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"usuarios":return e.jsx(Ye,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"retos":return e.jsx(Ze,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"imagenes":return e.jsx(et,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"pabellones":return e.jsx(tt,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"patrocinadores":return e.jsx(nt,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"familias":return e.jsx(rt,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"ciclos":return e.jsx(at,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"centros":return e.jsx(ot,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});case"estudios":return e.jsx(ct,{datosIniciales:c,onGuardar:()=>a(null),onCancelar:()=>a(null)});default:return e.jsx("div",{children:"Formulario no definido para esta sección."})}},g=()=>{switch(d){case"torneo":return e.jsx(Ee,{onModoCambio:p});case"equipos":return e.jsx(ue,{onModoCambio:p});case"jugadores":return e.jsx(he,{onModoCambio:p});case"partidos":return e.jsx(me,{onModoCambio:p});case"publicaciones":return e.jsx(pe,{onModoCambio:p});case"actas":return e.jsx(be,{onModoCambio:p});case"usuarios":return e.jsx(fe,{onModoCambio:p});case"retos":return e.jsx(xe,{onModoCambio:p});case"imagenes":return e.jsx(ge,{onModoCambio:p});case"patrocinadores":return e.jsx(je,{onModoCambio:p});case"familias":return e.jsx(ve,{onModoCambio:p});case"ciclos":return e.jsx(ye,{onModoCambio:p});case"centros":return e.jsx(Ce,{onModoCambio:p});case"estudios":return e.jsx(Ne,{onModoCambio:p});case"inscripciones":return e.jsx(Se,{onModoCambio:p});default:return e.jsx("div",{children:"CRUD no definido para esta sección."})}};return e.jsxs("div",{className:"d-flex",children:[e.jsx(de,{onSelect:b}),e.jsx("div",{className:"flex-grow-1 p-4",children:n?h():g()})]})}export{ut as default};
