import{c as g,a as b,r as t,j as e}from"./index-DYi0Vkv2.js";const v=()=>{const{id:d,token:m}=g(),u=b(),[r,h]=t.useState(""),[n,p]=t.useState(""),[l,o]=t.useState(""),[i,c]=t.useState(!1),x=async a=>{if(a.preventDefault(),r!==n){o("Las contraseñas no coinciden.");return}c(!0);try{const s=await fetch(`http://localhost:8000/api/set-password/${d}/${m}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:r,password_confirmation:n})}),f=await s.json();s.ok?(alert("Contraseña establecida correctamente. Redirigiendo al login..."),u("/login")):o(f.message||"Error al establecer la contraseña.")}catch(s){o("Error de conexión. Inténtalo de nuevo."),console.error("Error al enviar la contraseña:",s)}finally{c(!1)}};return e.jsx("div",{className:"container d-flex justify-content-center align-items-center vh-100",children:e.jsxs("div",{className:"card p-4 shadow-lg",style:{maxWidth:"400px",width:"100%"},children:[e.jsx("h2",{className:"text-center text-primary",children:"Establecer Contraseña"}),l&&e.jsx("div",{className:"alert alert-danger text-center",children:l}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nueva Contraseña:"}),e.jsx("input",{type:"password",className:"form-control",value:r,onChange:a=>h(a.target.value),required:!0,minLength:"8"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Confirmar Contraseña:"}),e.jsx("input",{type:"password",className:"form-control",value:n,onChange:a=>p(a.target.value),required:!0,minLength:"8"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:i,children:i?"Guardando...":"Guardar Contraseña"})]})]})})};export{v as default};
