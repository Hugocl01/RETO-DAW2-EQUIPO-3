import{r as m,d as re,c as se,a as ae,j as e,S as T}from"./index-YLr1uvRv.js";const q=t=>{let a=t.toLowerCase();return a=a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,""),a};function de({onSelect:t}){var o,N;const{seguridad:a}=m.useContext(re),{seccion:i}=se();ae();const[n,s]=m.useState([]),[c,r]=m.useState(null),[d,f]=m.useState(!0),[p,b]=m.useState(!1),[h,v]=m.useState(!1),j=m.useRef(null),[y,C]=m.useState(!1),l=()=>{b(S=>!S)};m.useEffect(()=>{const S="http://23.23.87.65/api/";(async()=>{var g,w,L;if((w=(g=a==null?void 0:a.user)==null?void 0:g.perfil)!=null&&w.id)try{const F=localStorage.getItem("token"),D=await fetch(`${S}perfiles/${a.user.perfil.id}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:F?`Bearer ${F}`:""},credentials:"include"});if(!D.ok)throw new Error("Error al obtener secciones");const A=await D.json();s(((L=A.perfiles)==null?void 0:L.secciones)||[])}catch(F){console.error("Error al obtener secciones:",F)}finally{f(!1)}})()},[(N=(o=a==null?void 0:a.user)==null?void 0:o.perfil)==null?void 0:N.id]),m.useEffect(()=>{if(n.length===0)return;const S=i?q(i):"",E=n.find(g=>q(g.nombre)===S)||n[0]||null;r(E),E&&t(E)},[n,i]),m.useEffect(()=>{p&&l()},[i]);const u=S=>{t(S),p&&l()};return e.jsxs("div",{className:"menuAdmin",children:[e.jsxs("aside",{className:"p-3",style:{minWidth:"240px",height:"100vh"},children:[e.jsx("h4",{className:"text-center",children:"Administración"}),d?e.jsx("p",{className:"text-center",children:"Cargando secciones..."}):e.jsx("ul",{className:"list-group",children:n.length>0?n.map(S=>e.jsx("li",{className:`list-group-item ${(c==null?void 0:c.id)===S.id?"active":""}`,role:"button",onClick:()=>u(S),children:S.nombre},S.id)):e.jsx("li",{className:"list-group-item text-center text-muted",children:"No hay secciones disponibles"})})]}),e.jsxs("div",{className:"sidebarAdministracion p-2",ref:j,onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{children:[e.jsxs("nav",{id:"sidenav-1",className:`sidenav ${p?"active":""}`,onClick:S=>S.stopPropagation(),children:[e.jsx("h4",{className:"text-center mt-4",children:"Administración"}),d?e.jsx("p",{className:"text-center",children:"Cargando secciones..."}):e.jsx("ul",{className:"mx-4 list-group",children:n.length>0?n.map(S=>e.jsx("li",{className:`list-group-item ${(c==null?void 0:c.id)===S.id?"active":""}`,role:"button",onClick:()=>u(S),children:S.nombre},S.id)):e.jsx("li",{className:"list-group-item text-center text-muted",children:"No hay secciones disponibles"})})]}),e.jsx("button",{id:"sidenav-toggle",className:`toggler-btn ${p?"active":""}`,onClick:l,children:e.jsx("i",{className:"bi bi-list-task botonMenuAdmin p-2 rounded border border-primary text-dark"})})]}),p&&e.jsx("div",{className:"backdrop",onClick:l})]})]})}const k=t=>{const a="http://23.23.87.65/api/",[i,n]=m.useState([]),[s,c]=m.useState(!1),[r,d]=m.useState(null),[f,p]=m.useState([]),b=q(t.nombre),h=async()=>{var l;c(!0),d(null);try{const u=await fetch(`${a}${b}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!u.ok)throw new Error("Error al obtener los datos.");const o=await u.json();n(o[b]||[]),((l=o[b])==null?void 0:l.length)>0?p(Object.keys(o[b][0])):p([])}catch(u){d(u.message||"Error de red.")}finally{c(!1)}},v=async l=>{try{if(!(await fetch(`${a}${b}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(l)})).ok)throw new Error("Error al crear el registro.");h()}catch(u){d(u.message||"Error al crear el registro.")}},j=async(l,u)=>{try{if(!(await fetch(`${a}${b}/${l}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(u)})).ok)throw new Error("Error al actualizar.");h()}catch(o){d(o.message||"Error al actualizar.")}},y=async l=>{try{if(!(await fetch(`${a}${b}/${l}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar.");h()}catch(u){d(u.message||"Error al eliminar.")}},C=(l,u)=>{u==="crear"?v(l):u==="editar"&&j(l.id,l)};return m.useEffect(()=>{t&&h()},[t]),{items:i,loading:s,error:r,columns:f,fetchItems:h,createItem:v,updateItem:j,deleteItem:y,onGuardar:C}},_=({currentPage:t,totalPages:a,onPageChange:i})=>{const n=()=>{t>1&&i(t-1)},s=()=>{t<a&&i(t+1)};return e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:[e.jsx("button",{className:"btn btn-primary",onClick:n,disabled:t===1,children:"Anterior"}),e.jsxs("span",{children:["Página ",t," de ",a]}),e.jsx("button",{className:"btn btn-primary",onClick:s,disabled:t===a||a===0,children:"Siguiente"})]})};function ue({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Equipos"}),[]),{items:i,loading:n,error:s}=k(a),[c,r]=m.useState(""),[d,f]=m.useState(1),p=5,b=i.filter(l=>{var o,N,S,E;const u=c.toLowerCase();return l.nombre.toLowerCase().includes(u)||l.centro.toLowerCase().includes(u)||l.grupo.toLowerCase().includes(u)||l.entrenador.toLowerCase().includes(u)||((N=(o=l.inscripcion)==null?void 0:o.estado)==null?void 0:N.toString().toLowerCase().includes(u))||""||((E=(S=l.stats)==null?void 0:S.goles)==null?void 0:E.toString().includes(u))||""}),h=b.length,v=Math.ceil(h/p),j=(d-1)*p,y=b.slice(j,j+p),C=l=>{r(l.target.value),f(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Equipos"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar equipos...",value:c,onChange:C})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Centro"}),e.jsx("th",{children:"Grupo"}),e.jsx("th",{children:"Entrenador"}),e.jsx("th",{children:"Estado Inscripción"}),e.jsx("th",{children:"Goles"})]})}),e.jsxs("tbody",{children:[y.map(l=>{var u,o;return e.jsxs("tr",{children:[e.jsx("td",{children:l.nombre}),e.jsx("td",{children:l.centro}),e.jsx("td",{children:l.grupo}),e.jsx("td",{children:l.entrenador}),e.jsx("td",{children:(u=l.inscripcion)==null?void 0:u.estado}),e.jsx("td",{children:(o=l.stats)==null?void 0:o.goles})]},l.slug)}),y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center",children:"No hay equipos disponibles."})})]})]}),e.jsx(_,{currentPage:d,totalPages:v,onPageChange:l=>f(l)})]})}function he({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Jugadores"}),[]),{items:i,loading:n,error:s}=k(a),[c,r]=m.useState(""),[d,f]=m.useState(1),p=5,b=i.filter(l=>{const u=c.toLowerCase();return l.nombre.toLowerCase().includes(u)||l.equipo.toLowerCase().includes(u)||l.estudio.toLowerCase().includes(u)||l.dni.toLowerCase().includes(u)||l.email.toLowerCase().includes(u)||l.telefono.includes(u)}),h=b.length,v=Math.ceil(h/p),j=(d-1)*p,y=b.slice(j,j+p),C=l=>{r(l.target.value),f(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Jugadores"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar jugadores...",value:c,onChange:C})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Equipo"}),e.jsx("th",{children:"Estudio"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Teléfono"})]})}),e.jsxs("tbody",{children:[y.map(l=>e.jsxs("tr",{children:[e.jsx("td",{children:l.nombre}),e.jsx("td",{children:l.equipo}),e.jsx("td",{children:l.estudio}),e.jsx("td",{children:l.email}),e.jsx("td",{children:l.telefono})]},l.slug)),y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay jugadores disponibles."})})]})]}),e.jsx(_,{currentPage:d,totalPages:v,onPageChange:f})]})}function me({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Partidos"}),[]),{items:i,loading:n,error:s}=k(a),[c,r]=m.useState(""),[d,f]=m.useState(1),p=5;console.log(i);const b=i.filter(l=>{const u=c.toLowerCase(),o=N=>N?N.toLowerCase():"";return o(l.fecha).includes(u)||o(l["equipo local"]).includes(u)||o(l["equipo visitante"]).includes(u)||o(l.pabellón).includes(u)||o(l.grupo).includes(u)||o(l.tipo).includes(u)}),h=b.length,v=Math.ceil(h/p),j=(d-1)*p,y=b.slice(j,j+p),C=l=>{r(l.target.value),f(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Partidos"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar partidos...",value:c,onChange:C})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Equipo Local"}),e.jsx("th",{children:"Equipo Visitante"}),e.jsx("th",{children:"Pabellón"}),e.jsx("th",{children:"Grupo"}),e.jsx("th",{children:"Tipo"}),e.jsx("th",{children:"Goles Local"}),e.jsx("th",{children:"Goles Visitante"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[y.map(l=>e.jsxs("tr",{children:[e.jsx("td",{children:l.fecha}),e.jsx("td",{children:l["equipo local"].nombre}),e.jsx("td",{children:l["equipo visitante"].nombre}),e.jsx("td",{children:l.pabellón}),e.jsx("td",{children:l.grupo}),e.jsx("td",{children:l.tipo}),e.jsx("td",{children:l["goles local"]}),e.jsx("td",{children:l["goles visitante"]}),e.jsx("td",{className:"d-flex",children:e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",l),children:"Actas"})})]},l.slug)),y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center",children:"No hay partidos disponibles."})})]})]}),e.jsx(_,{currentPage:d,totalPages:v,onPageChange:l=>f(l)})]})}function pe({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Publicaciones"}),[]),{items:i,loading:n,error:s,deleteItem:c}=k(a),[r,d]=m.useState(""),[f,p]=m.useState(1),b=5,h=i.filter(u=>{const o=r.toLowerCase();return u.titulo.toLowerCase().includes(o)||u.portada.toLowerCase().includes(o)||u.contenido.toLowerCase().includes(o)||u.seccion.toLowerCase().includes(o)}),v=h.length,j=Math.ceil(v/b),y=(f-1)*b,C=h.slice(y,y+b),l=u=>{d(u.target.value),p(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Publicaciones"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar publicaciones...",value:r,onChange:l}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Crear Publicacion"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Titulo"}),e.jsx("th",{children:"Portada"}),e.jsx("th",{children:"Contenido"}),e.jsx("th",{children:"Sección"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[C.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.titulo}),e.jsx("td",{children:u.portada}),e.jsx("td",{children:u.contenido}),e.jsx("td",{children:u.seccion}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",u),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(u.id),children:"Eliminar"})]})]},u.id)),C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay publicaciones disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:j,onPageChange:p})]})}function be({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Jugadores"}),[]),{items:i,loading:n,error:s,deleteItem:c}=k(a),[r,d]=m.useState(""),[f,p]=m.useState(1),b=5,h=i.filter(u=>{const o=r.toLowerCase();return u.nombre.toLowerCase().includes(o)||u.equipo.toLowerCase().includes(o)||u.estudio.toLowerCase().includes(o)||u.dni.toLowerCase().includes(o)||u.email.toLowerCase().includes(o)||u.telefono.includes(o)}),v=h.length,j=Math.ceil(v/b),y=(f-1)*b,C=h.slice(y,y+b),l=u=>{d(u.target.value),p(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Jugadores"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar jugadores...",value:r,onChange:l})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Equipo"}),e.jsx("th",{children:"Estudio"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Teléfono"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[C.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.nombre}),e.jsx("td",{children:u.equipo}),e.jsx("td",{children:u.estudio}),e.jsx("td",{children:u.email}),e.jsx("td",{children:u.telefono}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",u),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(u.slug),children:"Eliminar"})]})]},u.slug)),C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay jugadores disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:j,onPageChange:p})]})}function fe({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Usuarios"}),[]),{items:i,loading:n,error:s,deleteItem:c}=k(a),[r,d]=m.useState(""),[f,p]=m.useState(1),b=5,h=o=>o?o.toString().toLowerCase():"",v=i.filter(o=>{var S;const N=r.toLowerCase();return h(o.nombre).includes(N)||h(o.email).includes(N)||h((S=o.perfil)==null?void 0:S.tipo).includes(N)}),j=v.length,y=Math.ceil(j/b),C=(f-1)*b,l=v.slice(C,C+b),u=o=>{d(o.target.value),p(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Usuarios"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-4 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar usuarios...",value:r,onChange:u}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Usuario"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Rol"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[l.map(o=>{var N;return e.jsxs("tr",{children:[e.jsx("td",{children:o.nombre}),e.jsx("td",{children:o.email}),e.jsx("td",{children:((N=o.perfil)==null?void 0:N.tipo)||"Sin rol"}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",o),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(o.id),children:"Eliminar"})]})]},o.id)}),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No hay usuarios disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:o=>p(o)})]})}function xe({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Retos"}),[]),{items:i,loading:n,error:s,deleteItem:c}=k(a),[r,d]=m.useState(""),[f,p]=m.useState(1),b=5,h=o=>o?o.toString().toLowerCase():"",v=i.filter(o=>{var S,E,g;const N=r.toLowerCase();return h(o.titulo).includes(N)||h(o.texto).includes(N)||h((S=o.estudio)==null?void 0:S.centro).includes(N)||h((E=o.estudio)==null?void 0:E.ciclo).includes(N)||h((g=o.estudio)==null?void 0:g.curso).includes(N)}),j=v.length,y=Math.ceil(j/b),C=(f-1)*b,l=v.slice(C,C+b),u=o=>{d(o.target.value),p(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Retos"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar retos...",value:r,onChange:u}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Crear Reto"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Título"}),e.jsx("th",{children:"Descripción"}),e.jsx("th",{children:"Centro"}),e.jsx("th",{children:"Ciclo"}),e.jsx("th",{children:"Curso"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[l.map(o=>{var N,S,E;return e.jsxs("tr",{children:[e.jsx("td",{children:o.titulo}),e.jsx("td",{children:o.texto}),e.jsx("td",{children:((N=o.estudio)==null?void 0:N.centro)||"N/A"}),e.jsx("td",{children:((S=o.estudio)==null?void 0:S.ciclo)||"N/A"}),e.jsx("td",{children:((E=o.estudio)==null?void 0:E.curso)||"N/A"}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",o),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(o.id),children:"Eliminar"})]})]},o.id)}),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay retos disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:o=>p(o)})]})}function ge({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Imagenes"}),[]),{items:i}=k(a),[n,s]=m.useState(""),[c,r]=m.useState(1),d=5,f=i.filter(h=>{n.toLowerCase()});f.length;const p=(c-1)*d;f.slice(p,p+d);const b=h=>{s(h.target.value),r(1)};return e.jsxs("div",{children:[e.jsx("h2",{children:"Imágenes"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Buscar imagenes...",value:n,onChange:b}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Añadir Imagen"})]})]})}function je({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Patrocinadores"}),[]),{items:i,loading:n,error:s,deleteItem:c}=k(a),[r,d]=m.useState(""),[f,p]=m.useState(1),b=5,h=o=>o?o.toString().toLowerCase():"",v=i.filter(o=>{const N=r.toLowerCase();return h(o.nombre).includes(N)||h(o.landing_page).includes(N)}),j=v.length,y=Math.ceil(j/b),C=(f-1)*b,l=v.slice(C,C+b),u=o=>{d(o.target.value),p(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Patrocinadores"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar patrocinadores...",value:r,onChange:u}),e.jsx("button",{className:"btn btn-success",onClick:()=>t("crear"),children:"Crear Patrocinador"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Landing Page"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[l.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.nombre}),e.jsx("td",{children:e.jsx("a",{href:o.landing_page,target:"_blank",rel:"noopener noreferrer",children:o.landing_page})}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",o),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(o.id),children:"Eliminar"})]})]},o.id)),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay patrocinadores disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:o=>p(o)})]})}function ve({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Familias"}),[]),{items:i,loading:n,error:s,deleteItem:c}=k(a),[r,d]=m.useState(""),[f,p]=m.useState(1),b=5,h=i.filter(u=>u.nombre.toLowerCase().includes(r.toLowerCase())),v=h.length,j=Math.ceil(v/b),y=(f-1)*b,C=h.slice(y,y+b),l=u=>{d(u.target.value),p(1)};return n?e.jsx("p",{children:"Cargando familias..."}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Familias"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar familias...",value:r,onChange:l}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Familia"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[C.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.nombre}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",u),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(u.id),children:"Eliminar"})]})]},u.id)),C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"text-center",children:"No hay familias disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:j,onPageChange:p})]})}function ye({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Ciclos"}),[]),{items:i,loading:n,error:s,deleteItem:c}=k(a),[r,d]=m.useState(""),[f,p]=m.useState(1),b=5,h=o=>o?o.toString().toLowerCase():"",v=i.filter(o=>{var S;const N=r.toLowerCase();return h(o.nombre).includes(N)||h((S=o.familia_id)==null?void 0:S.nombre).includes(N)}),j=v.length,y=Math.ceil(j/b),C=(f-1)*b,l=v.slice(C,C+b),u=o=>{d(o.target.value),p(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Ciclos Formativos"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar ciclos...",value:r,onChange:u})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Familia Profesional"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[l.map(o=>{var N;return e.jsxs("tr",{children:[e.jsx("td",{children:o.nombre}),e.jsx("td",{children:((N=o.familia_id)==null?void 0:N.nombre)||"Sin familia"}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",o),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(o.id),children:"Eliminar"})]})]},o.id)}),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay ciclos disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:o=>p(o)})]})}function Ce({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Centros"}),[]),{items:i,loading:n,error:s,deleteItem:c}=k(a),[r,d]=m.useState(""),[f,p]=m.useState(1),b=5,h=o=>o?o.toString().toLowerCase():"",v=i.filter(o=>{const N=r.toLowerCase();return h(o.nombre).includes(N)||h(o.landing_page).includes(N)}),j=v.length,y=Math.ceil(j/b),C=(f-1)*b,l=v.slice(C,C+b),u=o=>{d(o.target.value),p(1)};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Centros"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control flex-grow-1",placeholder:"Buscar centros...",value:r,onChange:u}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Centro"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Landing Page"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[l.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.nombre}),e.jsx("td",{children:e.jsx("a",{href:o.landing_page,target:"_blank",rel:"noopener noreferrer",children:o.landing_page})}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>t("editar",o),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(o.id),children:"Eliminar"})]})]},o.id)),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay centros disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:o=>p(o)})]})}function Ne({onModoCambio:t}){const a=m.useMemo(()=>({nombre:"Estudios"}),[]),{items:i,loading:n,error:s,deleteItem:c}=k(a),[r,d]=m.useState(""),[f,p]=m.useState(1),b=5,h=N=>N?N.toString().toLowerCase():"",v=i.filter(N=>{const S=r.toLowerCase();return h(N.centro).includes(S)||h(N.ciclo).includes(S)}),j=v.length,y=Math.ceil(j/b),C=(f-1)*b,l=v.slice(C,C+b),u=N=>{d(N.target.value),p(1)},o=N=>{const S=JSON.parse(sessionStorage.getItem("centros"))||{},E=JSON.parse(sessionStorage.getItem("ciclos"))||{},g=Object.keys(S).find(L=>S[L]===N.centro)||"",w=Object.keys(E).find(L=>E[L]===N.ciclo)||"";t("editar",{...N,centro_id:g,ciclo_id:w})};return n?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Estudios"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar estudios...",value:r,onChange:u}),e.jsx("button",{className:"btn btn-success text-nowrap",onClick:()=>t("crear"),children:"Crear Estudio"})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Centro"}),e.jsx("th",{children:"Ciclo"}),e.jsx("th",{children:"Curso"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[l.map(N=>e.jsxs("tr",{children:[e.jsx("td",{children:N.centro}),e.jsx("td",{children:N.ciclo}),e.jsx("td",{children:N.curso}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>o(N),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>c(N.id),children:"Eliminar"})]})]},N.id)),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay estudios disponibles."})})]})]}),e.jsx(_,{currentPage:f,totalPages:y,onPageChange:N=>p(N)})]})}function Se(){const t=m.useMemo(()=>({nombre:"Inscripciones"}),[]),{loading:a,error:i}=k(t),[n,s]=m.useState([]),[c,r]=m.useState(""),[d,f]=m.useState(1),p=5,[b,h]=m.useState(!1);m.useEffect(()=>{v()},[]);async function v(){const g="http://23.23.87.65/api/";try{h(!0);const w=await fetch(`${g}inscripciones`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!w.ok)throw new Error("Error al obtener las inscripciones.");const L=await w.json();s(L.inscripciones)}catch(w){console.error("Error al cargar la tabla:",w)}finally{setTimeout(()=>h(!1),500)}}async function j(g,w){try{if(h(!0),!(await fetch(`http://23.23.87.65/api/cambiar-estado/${g.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({estado:w})})).ok)throw new Error("Error al actualizar el estado de la inscripción.");await v()}catch(L){console.error("Error al actualizar la inscripción:",L)}}const y=async g=>{await j(g,3)},C=async g=>{await j(g,4)},l=g=>g?g.toString().toLowerCase():"",u=n.filter(g=>{const w=c.toLowerCase();return l(g.nombre).includes(w)||l(g.comentarios).includes(w)||l(g.estado).includes(w)}),o=u.length,N=Math.ceil(o/p),S=(d-1)*p,E=u.slice(S,S+p);return a||b?e.jsx(T,{}):i?e.jsxs("p",{children:["Error: ",i]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Inscripciones"}),e.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 mb-3",children:e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Buscar inscripciones...",value:c,onChange:g=>r(g.target.value)})}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Comentarios"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[E.map(g=>e.jsxs("tr",{children:[e.jsx("td",{children:g.nombre}),e.jsx("td",{children:g.comentarios}),e.jsx("td",{children:g.estado}),e.jsxs("td",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>y(g),disabled:g.estado==="No Activa",children:"Aprobar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>C(g),disabled:g.estado==="No Activa",children:"Rechazar"})]})]},g.id)),E.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay inscripciones disponibles."})})]})]}),e.jsx(_,{currentPage:d,totalPages:N,onPageChange:g=>f(g)})]})}const M="http://23.23.87.65/api/";async function we(){try{const t=await fetch(`${M}equipos`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error("Error al obtener los datos.");return(await t.json()).equipos||[]}catch(t){return console.error("Error al recoger los equipos:",t),[]}}function Ee(){const[t,a]=m.useState(null),[i,n]=m.useState(!1),[s,c]=m.useState(null),[r,d]=m.useState(""),[f,p]=m.useState(""),[b,h]=m.useState([]),[v,j]=m.useState(1),y=5;m.useEffect(()=>{const w=new Date().toISOString().split("T")[0];d(w),p(w),C()},[]);const C=async()=>{n(!0);try{const g=localStorage.getItem("token"),w=await fetch(`${M}partidos`,{method:"GET",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(!w.ok)throw new Error("Error al obtener los partidos");const F=(await w.json()).partidos||[],D=new Date,A=$=>{const V=new Date($);return V.setHours(0,0,0,0),V},ce=F.some($=>A($.fecha)>=A(D));a({iniciado:ce});const le=await we();h(le)}catch(g){console.error(g),c(g.message)}finally{n(!1)}},l=async()=>{if(!r){alert("Por favor, selecciona una fecha.");return}if(new Date(r)<=new Date(f)){alert("Por favor, selecciona una fecha posterior.");return}n(!0);try{const g=localStorage.getItem("token");if(!(await fetch(`${M}comienzo-torneo`,{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({fecha:r})})).ok)throw new Error("Error al iniciar el torneo");a({iniciado:!0}),C()}catch(g){console.error(g),c(g.message)}finally{n(!1)}},u=async()=>{n(!0);try{const g=localStorage.getItem("token");if(!(await fetch(`${M}reinicio-torneo`,{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({fecha:r})})).ok)throw new Error("Error al reiniciar el torneo");a({iniciado:!1}),C()}catch(g){console.error(g),c(g.message)}finally{n(!1)}},o=b.length,N=Math.ceil(o/y),S=(v-1)*y,E=b.slice(S,S+y);return i?e.jsx(T,{}):s?e.jsxs("p",{children:["Error: ",s]}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"w-50",children:[e.jsx("h2",{children:"Detalles del Torneo"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Estado:"})," ",t!=null&&t.iniciado?"Iniciado":"No Iniciado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha seleccionada:"})," ",r||"No seleccionada"]})]}),e.jsxs("div",{className:"w-50",children:[e.jsxs("div",{className:"mb-3 w-75",children:[e.jsx("label",{htmlFor:"fecha",className:"form-label",children:"Selecciona la fecha del torneo:"}),e.jsx("input",{type:"date",id:"fecha",className:"form-control",value:r,onChange:g=>d(g.target.value)})]}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx("button",{className:"btn btn-success",onClick:l,disabled:t==null?void 0:t.iniciado,children:"Iniciar Torneo"}),e.jsx("button",{className:"btn btn-danger",onClick:u,disabled:!(t!=null&&t.iniciado),children:"Reiniciar Torneo"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{children:"Participantes"}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre del Equipo"}),e.jsx("th",{children:"Grupo"})]})}),e.jsxs("tbody",{children:[E.map((g,w)=>e.jsxs("tr",{children:[e.jsx("td",{children:g.nombre}),e.jsx("td",{children:g.grupo})]},w)),E.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"text-center",children:"No hay equipos disponibles."})})]})]}),e.jsx(_,{currentPage:v,totalPages:N,onPageChange:j})]})]})}const ke="http://23.23.87.65/api/";async function I(t){const a=localStorage.getItem("token"),i=sessionStorage.getItem(t);if(i)return console.log(`Datos cargados desde sessionStorage para el endpoint: ${t}`),JSON.parse(i);try{const n=await fetch(`${ke}${t}`,{headers:{Authorization:`Bearer ${a}`}});if(!n.ok)throw new Error(`Error en la petición: ${n.statusText}`);const s=await n.json();return console.log(`Datos recibidos de la API para ${t}:`,s),sessionStorage.setItem(t,JSON.stringify(s)),s}catch(n){return console.error(`Error al obtener ${t}:`,n),[]}}const P=()=>({centros:()=>I("lista/centros"),ciclos:()=>I("lista/ciclos"),equipos:()=>I("lista/equipos"),estudios:()=>I("lista/estudios"),familias:()=>I("lista/familias"),incidencias:()=>I("lista/incidencias"),jugadores:()=>I("lista/jugadores"),perfiles:()=>I("lista/perfiles"),partidos:()=>I("lista/partidos"),patrocinadores:()=>I("lista/patrocinadores"),retos:()=>I("lista/retos"),ongs:()=>I("lista/ongs"),pabellones:()=>I("lista/pabellones")}),Pe=async()=>{try{console.log("Cargando equipos desde la API...");const t=await P().equipos();return t?Object.keys(t).map(a=>({value:a,label:t[a]})):[]}catch(t){return console.error("Error al obtener los equipos",t),[]}},_e=async()=>{try{console.log("Cargando estudios desde la API...");const t=await P().estudios();return t?Object.keys(t).map(a=>({value:a,label:t[a]})):[]}catch(t){return console.error("Error al obtener los estudios",t),[]}};function Ie({datosIniciales:t,onGuardar:a,onCancelar:i}){const[n,s]=m.useState({nombre_completo:"",equipo_id:"",estudio_id:"",capitan:!1}),[c,r]=m.useState([]),[d,f]=m.useState([]);m.useEffect(()=>{(async()=>{const j=await Pe();r(j)})(),(async()=>{const j=await _e();f(j)})()},[]),m.useEffect(()=>{t&&s({...t,equipo_id:t.equipo_id||"",estudio_id:t.estudio_id||"",capitan:t.capitan||!1})},[t]);const p=h=>{const{name:v,value:j,type:y,checked:C}=h.target;s({...n,[v]:y==="checkbox"?C:j})},b=h=>{h.preventDefault(),a(n)};return e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nombre_completo",children:"Nombre Completo"}),e.jsx("input",{type:"text",name:"nombre_completo",id:"nombre_completo",placeholder:"Ingrese su nombre completo",value:n.nombre_completo||"",onChange:p})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"equipo_id",children:"Equipo"}),e.jsxs("select",{name:"equipo_id",id:"equipo_id",value:n.equipo_id||"",onChange:p,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un equipo"}),c.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"estudio_id",children:"Estudio"}),e.jsxs("select",{name:"estudio_id",id:"estudio_id",value:n.estudio_id||"",onChange:p,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un estudio"}),d.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"capitan",children:"Capitan"}),e.jsx("input",{type:"checkbox",name:"capitan",id:"capitan",checked:n.capitan||!1,onChange:p})]}),e.jsxs("div",{children:[e.jsx("button",{type:"submit",children:"Guardar"}),e.jsx("button",{type:"button",onClick:i,children:"Cancelar"})]})]})}const Te=async()=>{try{console.log("Cargando estudios desde la API...");const t=await P().incidencias();return t?Object.keys(t).map(a=>({value:a,label:t[a]})):[]}catch(t){return console.error("Error al obtener los estudios",t),[]}};function Le({datosIniciales:t,onGuardar:a,onCancelar:i}){const[n,s]=m.useState(""),[c,r]=m.useState([]),[d,f]=m.useState(t["equipo local"].nombre),[p,b]=m.useState(t["equipo visitante"].nombre),[h,v]=m.useState([]),[j,y]=m.useState(""),[C,l]=m.useState(""),[u,o]=m.useState(""),[N,S]=m.useState("");m.useEffect(()=>{(async()=>{const w=await Te();console.log("Incidencias cargadas:",w),v(w)})()},[]),m.useEffect(()=>{if(n){const g=t["equipo local"].nombre===n?t["equipo local"].Jugadores:t["equipo visitante"].Jugadores;r(g)}},[n,t]);const E=!n||!u||!N||!j||!C;return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"w-50",children:[e.jsxs("h3",{className:"text-lg font-bold mb-2 text-center",children:["Actas - ",d]}),e.jsxs("table",{className:"w-full mx-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border p-2",children:"Jugador"}),e.jsx("th",{className:"border p-2",children:"Incidencia"}),e.jsx("th",{className:"border p-2",children:"Minuto"})]})}),e.jsx("tbody",{children:t.actas.filter(g=>g.equipo===d).map(g=>e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"border p-2",children:g.jugador||"-"}),e.jsx("td",{className:"border p-2",children:g.incidencia}),e.jsx("td",{className:"border p-2",children:g.minuto})]},g.id))})]})]}),e.jsxs("div",{className:"w-50",children:[e.jsxs("h3",{className:"text-lg font-bold mb-2 text-center",children:["Actas - ",p]}),e.jsxs("table",{className:"w-full mx-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border p-2",children:"Jugador"}),e.jsx("th",{className:"border p-2",children:"Incidencia"}),e.jsx("th",{className:"border p-2",children:"Minuto"})]})}),e.jsx("tbody",{children:t.actas.filter(g=>g.equipo===p).map(g=>e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"border p-2",children:g.jugador||"-"}),e.jsx("td",{className:"border p-2",children:g.incidencia}),e.jsx("td",{className:"border p-2",children:g.minuto})]},g.id))})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Seleccionar Equipo"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"equipo",value:d,checked:n===d,onChange:g=>s(g.target.value),className:"mr-2"}),d]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"equipo",value:p,checked:n===p,onChange:g=>s(g.target.value),className:"mr-2"}),p]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Seleccionar Jugador"}),e.jsxs("select",{className:"w-full p-2 border rounded",disabled:!n,onChange:g=>o(g.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un jugador"}),c.map(g=>e.jsx("option",{value:g.nombre,children:g.nombre},g.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Seleccionar Incidencia"}),e.jsxs("select",{className:"w-full p-2 border rounded",onChange:g=>S(g.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione una incidencia"}),h.length>0?h.map((g,w)=>e.jsx("option",{value:g.value,children:g.label},w)):e.jsx("option",{disabled:!0,children:"Cargando..."})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Minuto"}),e.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:j,onChange:g=>y(g.target.value),min:"1",max:"90",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Comentario"}),e.jsx("textarea",{className:"w-full p-2 border rounded",value:C,onChange:g=>l(g.target.value),rows:"4",placeholder:"Escribe un comentario sobre la incidencia",required:!0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:a,disabled:E,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Guardar"}),e.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-300 rounded",children:"Cancelar"})]})]})}var B={exports:{}},R,H;function Fe(){if(H)return R;H=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return R=t,R}var G,K;function Oe(){if(K)return G;K=1;var t=Fe();function a(){}function i(){}return i.resetWarningCache=a,G=function(){function n(r,d,f,p,b,h){if(h!==t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}n.isRequired=n;function s(){return n}var c={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:i,resetWarningCache:a};return c.PropTypes=c,c},G}var W;function qe(){return W||(W=1,B.exports=Oe()()),B.exports}var x=qe(),U=function(){return U=Object.assign||function(t){for(var a,i=1,n=arguments.length;i<n;i++){a=arguments[i];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},U.apply(this,arguments)},oe={onActivate:x.func,onAddUndo:x.func,onBeforeAddUndo:x.func,onBeforeExecCommand:x.func,onBeforeGetContent:x.func,onBeforeRenderUI:x.func,onBeforeSetContent:x.func,onBeforePaste:x.func,onBlur:x.func,onChange:x.func,onClearUndos:x.func,onClick:x.func,onContextMenu:x.func,onCommentChange:x.func,onCompositionEnd:x.func,onCompositionStart:x.func,onCompositionUpdate:x.func,onCopy:x.func,onCut:x.func,onDblclick:x.func,onDeactivate:x.func,onDirty:x.func,onDrag:x.func,onDragDrop:x.func,onDragEnd:x.func,onDragGesture:x.func,onDragOver:x.func,onDrop:x.func,onExecCommand:x.func,onFocus:x.func,onFocusIn:x.func,onFocusOut:x.func,onGetContent:x.func,onHide:x.func,onInit:x.func,onInput:x.func,onKeyDown:x.func,onKeyPress:x.func,onKeyUp:x.func,onLoadContent:x.func,onMouseDown:x.func,onMouseEnter:x.func,onMouseLeave:x.func,onMouseMove:x.func,onMouseOut:x.func,onMouseOver:x.func,onMouseUp:x.func,onNodeChange:x.func,onObjectResizeStart:x.func,onObjectResized:x.func,onObjectSelected:x.func,onPaste:x.func,onPostProcess:x.func,onPostRender:x.func,onPreProcess:x.func,onProgressState:x.func,onRedo:x.func,onRemove:x.func,onReset:x.func,onSaveContent:x.func,onSelectionChange:x.func,onSetAttrib:x.func,onSetContent:x.func,onShow:x.func,onSubmit:x.func,onUndo:x.func,onVisualAid:x.func,onSkinLoadError:x.func,onThemeLoadError:x.func,onModelLoadError:x.func,onPluginLoadError:x.func,onIconsLoadError:x.func,onLanguageLoadError:x.func,onScriptsLoad:x.func,onScriptsLoadError:x.func},De=U({apiKey:x.string,licenseKey:x.string,id:x.string,inline:x.bool,init:x.object,initialValue:x.string,onEditorChange:x.func,value:x.string,tagName:x.string,tabIndex:x.number,cloudChannel:x.string,plugins:x.oneOfType([x.string,x.array]),toolbar:x.oneOfType([x.string,x.array]),disabled:x.bool,textareaName:x.string,tinymceScriptSrc:x.oneOfType([x.string,x.arrayOf(x.string),x.arrayOf(x.shape({src:x.string,async:x.bool,defer:x.bool}))]),rollback:x.oneOfType([x.number,x.oneOf([!1])]),scriptLoading:x.shape({async:x.bool,defer:x.bool,delay:x.number})},oe),z=function(t){return typeof t=="function"},Y=function(t){return t in oe},X=function(t){return t.substr(2)},Ae=function(t,a,i,n,s,c,r){var d=Object.keys(s).filter(Y),f=Object.keys(c).filter(Y),p=d.filter(function(h){return c[h]===void 0}),b=f.filter(function(h){return s[h]===void 0});p.forEach(function(h){var v=X(h),j=r[v];i(v,j),delete r[v]}),b.forEach(function(h){var v=n(t,h),j=X(h);r[j]=v,a(j,v)})},Me=function(t,a,i,n,s){return Ae(s,t.on.bind(t),t.off.bind(t),function(c,r){return function(d){var f;return(f=c(r))===null||f===void 0?void 0:f(d,t)}},a,i,n)},Z=0,ie=function(t){var a=Date.now(),i=Math.floor(Math.random()*1e9);return Z++,t+"_"+i+Z+String(a)},ee=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},te=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},$e=function(t,a){return te(t).concat(te(a))},Be=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Re=function(t){if(!("isConnected"in Node.prototype)){for(var a=t,i=t.parentNode;i!=null;)a=i,i=a.parentNode;return a===t.ownerDocument}return t.isConnected},ne=function(t,a){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(a):t.setMode(a))},Q=function(){return Q=Object.assign||function(t){for(var a,i=1,n=arguments.length;i<n;i++){a=arguments[i];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Q.apply(this,arguments)},Ge=function(t,a,i){var n,s,c=t.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=a.id,c.src=a.src,c.async=(n=a.async)!==null&&n!==void 0?n:!1,c.defer=(s=a.defer)!==null&&s!==void 0?s:!1;var r=function(){c.removeEventListener("load",r),c.removeEventListener("error",d),i(a.src)},d=function(f){c.removeEventListener("load",r),c.removeEventListener("error",d),i(a.src,f)};c.addEventListener("load",r),c.addEventListener("error",d),t.head&&t.head.appendChild(c)},ze=function(t){var a={},i=function(r,d){var f=a[r];f.done=!0,f.error=d;for(var p=0,b=f.handlers;p<b.length;p++){var h=b[p];h(r,d)}f.handlers=[]},n=function(r,d,f){var p=function(o){return f!==void 0?f(o):console.error(o)};if(r.length===0){p(new Error("At least one script must be provided"));return}for(var b=0,h=!1,v=function(o,N){h||(N?(h=!0,p(N)):++b===r.length&&d())},j=0,y=r;j<y.length;j++){var C=y[j],l=a[C.src];if(l)l.done?v(C.src,l.error):l.handlers.push(v);else{var u=ie("tiny-");a[C.src]={id:u,src:C.src,done:!1,error:null,handlers:[v]},Ge(t,Q({id:u},C),i)}}},s=function(){for(var r,d=0,f=Object.values(a);d<f.length;d++){var p=f[d],b=t.getElementById(p.id);b!=null&&b.tagName==="SCRIPT"&&((r=b.parentNode)===null||r===void 0||r.removeChild(b))}a={}},c=function(){return t};return{loadScripts:n,deleteScripts:s,getDocument:c}},Je=function(){var t=[],a=function(s){var c=t.find(function(r){return r.getDocument()===s});return c===void 0&&(c=ze(s),t.push(c)),c},i=function(s,c,r,d,f){var p=function(){return a(s).loadScripts(c,d,f)};r>0?setTimeout(p,r):p()},n=function(){for(var s=t.pop();s!=null;s=t.pop())s.deleteScripts()};return{loadList:i,reinitialize:n}},Ue=Je(),J=function(t){var a=t;return a&&a.tinymce?a.tinymce:null},Qe=function(){var t=function(a,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])},t(a,i)};return function(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(a,i);function n(){this.constructor=a}a.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}(),O=function(){return O=Object.assign||function(t){for(var a,i=1,n=arguments.length;i<n;i++){a=arguments[i];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},O.apply(this,arguments)},Ve=function(t){Qe(a,t);function a(i){var n,s,c,r=t.call(this,i)||this;return r.rollbackTimer=void 0,r.valueCursor=void 0,r.rollbackChange=function(){var d=r.editor,f=r.props.value;d&&f&&f!==r.currentContent&&d.undoManager.ignore(function(){if(d.setContent(f),r.valueCursor&&(!r.inline||d.hasFocus()))try{d.selection.moveToBookmark(r.valueCursor)}catch{}}),r.rollbackTimer=void 0},r.handleBeforeInput=function(d){if(r.props.value!==void 0&&r.props.value===r.currentContent&&r.editor&&(!r.inline||r.editor.hasFocus()))try{r.valueCursor=r.editor.selection.getBookmark(3)}catch{}},r.handleBeforeInputSpecial=function(d){(d.key==="Enter"||d.key==="Backspace"||d.key==="Delete")&&r.handleBeforeInput(d)},r.handleEditorChange=function(d){var f=r.editor;if(f&&f.initialized){var p=f.getContent();r.props.value!==void 0&&r.props.value!==p&&r.props.rollback!==!1&&(r.rollbackTimer||(r.rollbackTimer=window.setTimeout(r.rollbackChange,typeof r.props.rollback=="number"?r.props.rollback:200))),p!==r.currentContent&&(r.currentContent=p,z(r.props.onEditorChange)&&r.props.onEditorChange(p,f))}},r.handleEditorChangeSpecial=function(d){(d.key==="Backspace"||d.key==="Delete")&&r.handleEditorChange(d)},r.initialise=function(d){var f,p,b;d===void 0&&(d=0);var h=r.elementRef.current;if(h){if(!Re(h)){if(d===0)setTimeout(function(){return r.initialise(1)},1);else if(d<100)setTimeout(function(){return r.initialise(d+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var v=J(r.view);if(!v)throw new Error("tinymce should have been loaded into global scope");var j=O(O(O(O({},r.props.init),{selector:void 0,target:h,readonly:r.props.disabled,inline:r.inline,plugins:$e((f=r.props.init)===null||f===void 0?void 0:f.plugins,r.props.plugins),toolbar:(p=r.props.toolbar)!==null&&p!==void 0?p:(b=r.props.init)===null||b===void 0?void 0:b.toolbar}),r.props.licenseKey?{license_key:r.props.licenseKey}:{}),{setup:function(y){r.editor=y,r.bindHandlers({}),r.inline&&!ee(h)&&y.once("PostRender",function(C){y.setContent(r.getInitialValue(),{no_events:!0})}),r.props.init&&z(r.props.init.setup)&&r.props.init.setup(y)},init_instance_callback:function(y){var C,l,u=r.getInitialValue();r.currentContent=(C=r.currentContent)!==null&&C!==void 0?C:y.getContent(),r.currentContent!==u&&(r.currentContent=u,y.setContent(u),y.undoManager.clear(),y.undoManager.add(),y.setDirty(!1));var o=(l=r.props.disabled)!==null&&l!==void 0?l:!1;ne(r.editor,o?"readonly":"design"),r.props.init&&z(r.props.init.init_instance_callback)&&r.props.init.init_instance_callback(y)}});r.inline||(h.style.visibility=""),ee(h)&&(h.value=r.getInitialValue()),v.init(j)}},r.id=r.props.id||ie("tiny-react"),r.elementRef=m.createRef(),r.inline=(c=(n=r.props.inline)!==null&&n!==void 0?n:(s=r.props.init)===null||s===void 0?void 0:s.inline)!==null&&c!==void 0?c:!1,r.boundHandlers={},r}return Object.defineProperty(a.prototype,"view",{get:function(){var i,n;return(n=(i=this.elementRef.current)===null||i===void 0?void 0:i.ownerDocument.defaultView)!==null&&n!==void 0?n:window},enumerable:!1,configurable:!0}),a.prototype.componentDidUpdate=function(i){var n=this,s,c;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(i),this.editor.initialized)){if(this.currentContent=(s=this.currentContent)!==null&&s!==void 0?s:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==i.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var r=this.editor;r.undoManager.transact(function(){var f;if(!n.inline||r.hasFocus())try{f=r.selection.getBookmark(3)}catch{}var p=n.valueCursor;if(r.setContent(n.props.value),!n.inline||r.hasFocus())for(var b=0,h=[f,p];b<h.length;b++){var v=h[b];if(v)try{r.selection.moveToBookmark(v),n.valueCursor=v;break}catch{}}})}if(this.props.disabled!==i.disabled){var d=(c=this.props.disabled)!==null&&c!==void 0?c:!1;ne(this.editor,d?"readonly":"design")}}},a.prototype.componentDidMount=function(){var i=this,n,s,c,r,d;if(J(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(s=(n=this.props).onScriptsLoadError)===null||s===void 0||s.call(n,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((c=this.elementRef.current)===null||c===void 0)&&c.ownerDocument){var f=function(){var b,h;(h=(b=i.props).onScriptsLoad)===null||h===void 0||h.call(b),i.initialise()},p=function(b){var h,v;(v=(h=i.props).onScriptsLoadError)===null||v===void 0||v.call(h,b)};Ue.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(d=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.delay)!==null&&d!==void 0?d:0,f,p)}},a.prototype.componentWillUnmount=function(){var i=this,n=this.editor;n&&(n.off(this.changeEvents(),this.handleEditorChange),n.off(this.beforeInputEvent(),this.handleBeforeInput),n.off("keypress",this.handleEditorChangeSpecial),n.off("keydown",this.handleBeforeInputSpecial),n.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(s){n.off(s,i.boundHandlers[s])}),this.boundHandlers={},n.remove(),this.editor=void 0)},a.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},a.prototype.changeEvents=function(){var i,n,s,c=(s=(n=(i=J(this.view))===null||i===void 0?void 0:i.Env)===null||n===void 0?void 0:n.browser)===null||s===void 0?void 0:s.isIE();return c?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},a.prototype.beforeInputEvent=function(){return Be()?"beforeinput SelectionChange":"SelectionChange"},a.prototype.renderInline=function(){var i=this.props.tagName,n=i===void 0?"div":i;return m.createElement(n,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},a.prototype.renderIframe=function(){return m.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},a.prototype.getScriptSources=function(){var i,n,s=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.async,c=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:s,defer:c}]:this.props.tinymceScriptSrc.map(function(p){return typeof p=="string"?{src:p,async:s,defer:c}:p});var r=this.props.cloudChannel,d=this.props.apiKey?this.props.apiKey:"no-api-key",f="https://cdn.tiny.cloud/1/".concat(d,"/tinymce/").concat(r,"/tinymce.min.js");return[{src:f,async:s,defer:c}]},a.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},a.prototype.bindHandlers=function(i){var n=this;if(this.editor!==void 0){Me(this.editor,i,this.props,this.boundHandlers,function(d){return n.props[d]});var s=function(d){return d.onEditorChange!==void 0||d.value!==void 0},c=s(i),r=s(this.props);!c&&r?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):c&&!r&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},a.propTypes=De,a.defaultProps={cloudChannel:"7"},a}(m.Component);const He=({datosIniciales:t,onGuardar:a,onCancelar:i})=>{const[n,s]=m.useState({titulo:"",contenido:"",publicacionable_type:"",publicacionable_id:"",ruta_video:"",ruta_audio:"",portada:!1,imagen:null}),[c,r]=m.useState([]),[d,f]=m.useState({titulo:"",contenido:"",imagen:""}),p=localStorage.getItem("token");m.useEffect(()=>{t&&(s(l=>({...l,...t,publicacionable_type:t.seccion,publicacionable_id:t.elemento,imagen:null})),t.seccion&&b(t.seccion,t.elemento))},[t]);const b=async(l,u)=>{let o;switch(l.toLowerCase()){case"equipo":o=await P().equipos();break;case"partido":o=await P().partidos();break;case"patrocinador":o=await P().patrocinadores();break;case"jugador":o=await P().jugadores();break;case"reto":o=await P().retos();break;case"ong":o=await P().ongs();break;case"pabellon":o=await P().pabellones();break;default:o={}}if(o){let N;l.toLowerCase()=="jugador"?N=Object.keys(o).map(S=>({id:S,nombre:o[S].nombre})):N=Object.keys(o).map(S=>({id:S,nombre:o[S]})),r(N),s(S=>({...S,publicacionable_id:u||""}))}},h=async l=>{const{name:u,value:o,type:N,checked:S,files:E}=l.target;u==="publicacionable_type"?(s(g=>({...g,publicacionable_type:o,publicacionable_id:""})),b(o,"")):s(g=>({...g,[u]:N==="checkbox"?S:N==="file"?E[0]:o}))},v=l=>{s(u=>({...u,contenido:l}))},j=()=>{const l={titulo:"",contenido:"",imagen:""};return n.portada&&(n.titulo.trim()||(l.titulo="El título es obligatorio si la publicación está en la portada."),n.contenido.trim()||(l.contenido="El contenido es obligatorio si la publicación está en la portada."),n.imagen||(l.imagen="Una imagen es obligatoria si la publicación está en la portada.")),f(l),Object.values(l).every(u=>u==="")},y=async l=>{if(l.preventDefault(),!j())return;const u="http://23.23.87.65/api/";try{const o=await fetch(`${u}publicaciones`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify(n)}),N=await o.json();o.ok?(console.log("Publicación creada con ID:",N.publicacion.id),n.imagen&&await C(N.publicacion.id),alert("Publicación creada con éxito")):console.error("Error en la creación:",N)}catch(o){console.error("Error al enviar la publicación:",o)}},C=async l=>{const u=new FormData;u.append("imagen",n.imagen);const o="http://23.23.87.65/api/";try{const N=await fetch(`${o}publicaciones/${l}/subir-imagen`,{method:"POST",headers:{Authorization:`Bearer ${p}`},body:u}),S=await N.json();N.ok?console.log("Imagen subida correctamente:",S):console.error("Error al subir imagen:",S)}catch(N){console.error("Error al subir imagen:",N)}};return e.jsxs("form",{onSubmit:y,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Crear Publicación"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"titulo",className:"form-label",children:"Título"}),e.jsx("input",{type:"text",className:"form-control",name:"titulo",id:"titulo",placeholder:"Ingrese el título",value:n.titulo,onChange:h}),d.titulo&&e.jsx("span",{className:"text-danger d-block",children:d.titulo})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Contenido"}),e.jsx(Ve,{apiKey:"1970hen3xxpeg7q4hxbmuo33gez4jmscea18iie0jpz65znn",value:n.contenido,onEditorChange:v,init:{height:300,menubar:!0,plugins:"advlist autolink lists link image charmap print preview anchor",toolbar:"undo redo | formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link"}}),d.contenido&&e.jsx("span",{className:"text-danger d-block",children:d.contenido})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"publicacionable_type",className:"form-label",children:"Tipo de Publicación"}),e.jsxs("select",{className:"form-select",name:"publicacionable_type",id:"publicacionable_type",value:n.publicacionable_type,onChange:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un tipo"}),["Equipo","Partido","Patrocinador","Jugador","Reto","Ong","Pabellon"].map((l,u)=>e.jsx("option",{value:l,children:l},u))]})]}),n.publicacionable_type&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"publicacionable_id",className:"form-label",children:"Nombre"}),e.jsxs("select",{className:"form-select",name:"publicacionable_id",id:"publicacionable_id",value:n.publicacionable_id,onChange:h,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione una opcion"}),c.map((l,u)=>e.jsx("option",{value:l.id,children:l.nombre},u))]})]}),e.jsxs("div",{className:"mb-3 form-check",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",name:"portada",id:"portada",checked:n.portada,onChange:h}),e.jsx("label",{className:"form-check-label",htmlFor:"portada",children:"Usar como portada"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"imagen",className:"form-label",children:"Subir Imagen"}),e.jsx("input",{type:"file",className:"form-control",name:"imagen",id:"imagen",accept:"image/*",onChange:h}),d.imagen&&e.jsx("span",{className:"text-danger d-block",children:d.imagen})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:"btn btn-success",children:t==null?"Crear publicacion":"Guardar publicacion"}),e.jsx("button",{type:"reset",className:"btn btn-secondary",onClick:i,children:"Cancelar"})]})]})};function Ke(){}const We=async()=>{try{const t=await P().perfiles();return t?(sessionStorage.setItem("perfiles",JSON.stringify(t)),Object.keys(t).map(a=>({value:a,label:t[a]}))):[]}catch(t){return console.error("Error al obtener los perfiles",t),[]}};function Ye({datosIniciales:t,onGuardar:a,onCancelar:i}){const[n,s]=m.useState({nombre_completo:"",email:"",password:"",perfil_id:""}),[c,r]=m.useState([]),[d,f]=m.useState(!1),{createItem:p,updateItem:b}=k({nombre:"Usuarios"});m.useEffect(()=>{const j=async()=>{const y=await We();r(y)};c.length===0&&j()},[c]),m.useEffect(()=>{t&&s(j=>{var y;return{nombre_completo:t.nombre||t.nombre_completo||"",email:t.email||"",password:"",perfil_id:((y=t.perfil)==null?void 0:y.id)||""}})},[t]);const h=j=>{const{name:y,value:C}=j.target;s({...n,[y]:C})},v=async j=>{if(j.preventDefault(),f(!0),!n.nombre_completo.trim()||!n.email.trim()||!n.perfil_id){alert("El nombre completo, email y perfil son obligatorios."),f(!1);return}const y={...n};y.password||delete y.password;try{t?(console.log("Actualizando usuario:",y),t.id?(await b(t.id,y),console.log("Usuario actualizado con éxito.")):console.error("ID no encontrado para la actualización.")):(console.log("Creando nuevo usuario:",y),await p(y),console.log("Usuario creado con éxito."))}catch(C){console.error("Error al guardar usuario:",C)}finally{f(!1)}};return e.jsxs("form",{onSubmit:v,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t?"Editar Usuario":"Crear Usuario"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre_completo",className:"form-label",children:"Nombre Completo"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre_completo",id:"nombre_completo",placeholder:"Ingrese el nombre completo",value:n.nombre_completo,onChange:h,required:!0,disabled:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",name:"email",id:"email",placeholder:"Ingrese el email",value:n.email,onChange:h,required:!0,disabled:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Contraseña"}),e.jsx("input",{type:"password",className:"form-control",name:"password",id:"password",placeholder:"Ingrese la contraseña",value:n.password,onChange:h,disabled:d}),e.jsx("small",{className:"form-text text-muted",children:"Déjelo en blanco para no cambiar la contraseña."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"perfil_id",className:"form-label",children:"Tipo de Perfil"}),e.jsxs("select",{className:"form-select",name:"perfil_id",id:"perfil_id",value:n.perfil_id||"",onChange:h,required:!0,disabled:d,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un perfil"}),c.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:"btn btn-success",disabled:d,children:d?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:d,children:"Cancelar"})]})]})}const Xe=async()=>{try{const t=sessionStorage.getItem("estudios");if(t){console.log("Cargando estudios desde sessionStorage");const i=JSON.parse(t);return Object.keys(i).map(n=>({value:n,label:i[n]}))}console.log("Cargando estudios desde la API...");const a=await P().estudios();return a?Object.keys(a).map(i=>({value:i,label:a[i]})):[]}catch(t){return console.error("Error al obtener los estudios",t),[]}};function Ze({datosIniciales:t,onGuardar:a,onCancelar:i}){const[n,s]=m.useState({titulo:"",texto:"",estudio_id:null}),[c,r]=m.useState([]),[d,f]=m.useState(!1),{createItem:p,updateItem:b,fetchItems:h,error:v}=k({nombre:"Retos"});m.useEffect(()=>{(async()=>{const l=await Xe();r(l)})()},[]),m.useEffect(()=>{var C;t&&s({...t,estudio_id:((C=t.estudio)==null?void 0:C.id)||null})},[t]);const j=C=>{const{name:l,value:u}=C.target;s({...n,[l]:u})},y=async C=>{C.preventDefault(),f(!0);const l=t?"editar":"crear";try{l==="crear"?await p(n):await b(n.id,n),h(),a(n)}catch(u){console.error("Error al guardar reto:",u)}finally{f(!1)}};return e.jsxs("form",{onSubmit:y,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Formulario de Reto"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"titulo",className:"form-label",children:"Título"}),e.jsx("input",{type:"text",className:"form-control",name:"titulo",id:"titulo",placeholder:"Ingrese el título",value:n.titulo||"",required:!0,onChange:j,disabled:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"texto",className:"form-label",children:"Texto"}),e.jsx("textarea",{className:"form-control",name:"texto",id:"texto",placeholder:"Ingrese el texto del reto",value:n.texto||"",required:!0,onChange:j,style:{height:"150px",resize:"vertical"},disabled:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"estudio_id",className:"form-label",children:"Estudio"}),e.jsxs("select",{className:"form-select",name:"estudio_id",id:"estudio_id",value:n.estudio_id||"",required:!0,onChange:j,disabled:d,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un estudio"}),c.map(C=>e.jsx("option",{value:C.value,children:C.label},C.value))]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:d,children:d?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:d,children:"Cancelar"})]}),v&&e.jsx("p",{className:"text-danger mt-3",children:v})]})}function et(){}function tt(){}function nt({datosIniciales:t,onGuardar:a,onCancelar:i}){const[n,s]=m.useState({nombre:"",landing_page:""}),[c,r]=m.useState(!1),{createItem:d,updateItem:f,fetchItems:p,error:b}=k({nombre:"Patrocinadores"});m.useState(()=>{t&&s(t)},[t]);const h=j=>{const{name:y,value:C}=j.target;s({...n,[y]:C})},v=async j=>{j.preventDefault(),r(!0);try{t?await f(n.id,n):await d(n),p(),a(n)}catch(y){console.error("Error al guardar patrocinador:",y)}finally{r(!1)}};return e.jsxs("form",{onSubmit:v,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Formulario de Patrocinador"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre",value:n.nombre||"",required:!0,onChange:h,disabled:c})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"landing_page",className:"form-label",children:"Landing Page"}),e.jsx("input",{type:"url",className:"form-control",name:"landing_page",id:"landing_page",placeholder:"Ingrese la URL",value:n.landing_page||"",required:!0,onChange:h,disabled:c})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:c,children:c?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:c,children:"Cancelar"})]}),b&&e.jsx("p",{className:"text-danger mt-3",children:b})]})}function rt({datosIniciales:t,onGuardar:a,onCancelar:i}){const[n,s]=m.useState({nombre:""}),[c,r]=m.useState(!1),{createItem:d,updateItem:f,fetchItems:p,error:b}=k({nombre:"Familias"});m.useState(()=>{t&&s({nombre:t.nombre||""})},[t]);const h=j=>{s({...n,nombre:j.target.value})},v=async j=>{j.preventDefault(),r(!0);try{t?await f(t.id,n):await d(n),p(),a(n)}catch(y){console.error("Error al guardar familia:",y)}finally{r(!1)}};return e.jsxs("form",{onSubmit:v,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:"Formulario de Familia"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre",value:n.nombre,required:!0,onChange:h,disabled:c})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:c,children:c?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:c,children:"Cancelar"})]}),b&&e.jsx("p",{className:"text-danger mt-3",children:b})]})}const st=async()=>{try{console.log("Cargando familias desde la API...");const t=await P().familias();return t?Object.keys(t).map(a=>({value:a,label:t[a]})):[]}catch(t){return console.error("Error al obtener las familias",t),[]}};function at({datosIniciales:t,onGuardar:a,onCancelar:i}){var h;const[n,s]=m.useState({}),[c,r]=m.useState({}),[d,f]=m.useState([]);m.useEffect(()=>{(async()=>{const j=await st();f(j)})()},[]),m.useEffect(()=>{t&&s(t)},[t]);const p=v=>{const{name:j,value:y}=v.target;s({...n,[j]:y})},b=v=>{v.preventDefault(),a(n)};return console.log(n),e.jsxs("form",{onSubmit:b,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t!=null?"Editar Ciclo":"Crear ciclo"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre",value:n.nombre||"",onChange:p})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"familia_id",className:"form-label",children:"Familia"}),e.jsxs("select",{className:"form-select",name:"familia_id",id:"familia_id",value:((h=n.familia_id)==null?void 0:h.id)||"",onChange:p,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione una familia"}),d.map(v=>e.jsx("option",{value:v.value,children:v.label},v.value))]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:"btn btn-success",children:"Guardar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:"Cancelar"})]})]})}function ot({datosIniciales:t,onGuardar:a,onCancelar:i}){const[n,s]=m.useState({nombre:"",landing_page:""}),[c,r]=m.useState({}),[d,f]=m.useState(!1),{createItem:p,updateItem:b,error:h}=k({nombre:"Centros"});m.useEffect(()=>{t&&s({id:t.id,nombre:t.nombre||"",landing_page:t.landing_page||""})},[t]);const v=()=>{let C={};return n.nombre.trim()||(C.nombre="El nombre es obligatorio"),n.landing_page.trim()?/^https?:\/\/[^\s]+$/.test(n.landing_page)||(C.landing_page="La URL debe ser válida (ej. http://example.com)"):C.landing_page="La página web es obligatoria",r(C),Object.keys(C).length===0},j=C=>{const{name:l,value:u}=C.target;s(o=>({...o,[l]:u}))},y=async C=>{if(C.preventDefault(),!!v()){f(!0);try{t?await b(n.id,n):await p(n),a(n)}catch(l){console.error("Error al guardar:",l)}finally{f(!1)}}};return e.jsxs("form",{onSubmit:y,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t?"Editar Centro":"Crear Centro"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",name:"nombre",id:"nombre",placeholder:"Ingrese el nombre del centro",value:n.nombre,onChange:j,className:`form-control ${c.nombre?"is-invalid":""}`,disabled:d}),c.nombre&&e.jsx("div",{className:"invalid-feedback",children:c.nombre})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"landing_page",className:"form-label",children:"Página web"}),e.jsx("input",{type:"text",name:"landing_page",id:"landing_page",placeholder:"Ingrese la página web",value:n.landing_page,onChange:j,className:`form-control ${c.landing_page?"is-invalid":""}`,disabled:d}),c.landing_page&&e.jsx("div",{className:"invalid-feedback",children:c.landing_page})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"submit",className:`btn ${t?"btn-warning":"btn-success"}`,disabled:d,children:d?"Guardando...":t?"Guardar":"Crear"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:d,children:"Cancelar"})]}),Object.keys(c).length>0&&e.jsx("div",{className:"alert alert-danger mt-3",children:e.jsx("ul",{children:Object.values(c).map((C,l)=>e.jsx("li",{children:C},l))})}),h&&e.jsx("div",{className:"alert alert-danger mt-3",children:h})]})}const it=async()=>{try{const t=sessionStorage.getItem("centros");if(t){console.log("Cargando centros desde sessionStorage");const i=JSON.parse(t);return Object.keys(i).map(n=>({value:n,label:i[n]}))}console.log("Cargando centros desde la API...");const a=await P().centros();return a?Object.keys(a).map(i=>({value:i,label:a[i]})):[]}catch(t){return console.error("Error al obtener los centros",t),[]}},ct=async()=>{try{const t=sessionStorage.getItem("ciclos");if(t){console.log("Cargando ciclos desde sessionStorage");const i=JSON.parse(t);return Object.keys(i).map(n=>({value:n,label:i[n]}))}console.log("Cargando ciclos desde la API...");const a=await P().ciclos();return a?Object.keys(a).map(i=>({value:i,label:a[i]})):[]}catch(t){return console.error("Error al obtener los ciclos",t),[]}};function lt({datosIniciales:t,onGuardar:a,onCancelar:i}){const[n,s]=m.useState({centro_id:"",ciclo_id:"",curso_id:""}),[c,r]=m.useState([]),[d,f]=m.useState([]),[p,b]=m.useState(!1),{createItem:h,updateItem:v,fetchItems:j,error:y}=k({nombre:"Estudios"});m.useEffect(()=>{(async()=>{const N=await it();r(N)})(),(async()=>{const N=await ct();f(N)})()},[]),m.useEffect(()=>{if(t&&c.length>0&&d.length>0){const u=c.find(N=>N.label===t.centro),o=d.find(N=>N.label===t.ciclo);s({centro_id:u?u.value:"",ciclo_id:o?o.value:"",curso_id:t.curso||""})}},[t,c,d]);const C=u=>{const{name:o,value:N}=u.target;s({...n,[o]:N})},l=async u=>{u.preventDefault(),b(!0);try{t?await v(t.id,n):await h(n),j(),a(n)}catch(o){console.error("Error al guardar estudio:",o)}finally{b(!1)}};return e.jsxs("form",{onSubmit:l,className:"container mt-4 p-4 border rounded shadow bg-light",children:[e.jsx("h2",{className:"mb-4 text-center",children:t!=null?"Editar estudio":"Crear estudio"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"centro_id",className:"form-label",children:"Centro"}),e.jsxs("select",{name:"centro_id",id:"centro_id",className:"form-select",value:n.centro_id,onChange:C,disabled:p,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un centro"}),c.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"ciclo_id",className:"form-label",children:"Ciclo"}),e.jsxs("select",{name:"ciclo_id",id:"ciclo_id",className:"form-select",value:n.ciclo_id,onChange:C,disabled:p,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un ciclo"}),d.map(u=>e.jsx("option",{value:u.value,selected:t.ciclo===u.label,children:u.label},u.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"curso_id",className:"form-label",children:"Curso"}),e.jsxs("select",{name:"curso_id",id:"curso_id",className:"form-select",value:n.curso_id,onChange:C,disabled:p,children:[e.jsx("option",{value:"",hidden:!0,children:"Seleccione un curso"}),e.jsx("option",{value:"1",children:"1º"}),e.jsx("option",{value:"2",children:"2º"})]})]}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:p,children:p?"Guardando...":"Guardar"}),e.jsx("button",{type:"button",className:"btn btn-secondary ms-2",onClick:i,disabled:p,children:"Cancelar"}),y&&e.jsx("p",{className:"text-danger mt-3",children:y})]})}function ut(){const{seccion:t}=se(),a=ae(),{seguridad:i}=m.useContext(re),[n,s]=m.useState(null),[c,r]=m.useState(null),[d,f]=m.useState(t?q(t):""),p=j=>{const y=q(j.nombre);n!=null?window.confirm("¿Estás seguro de salir del apartado de edición / creación?")&&(f(y),s(null)):(f(y),a(`/administracion/${y}`))};m.useEffect(()=>{n==null&&a(`/administracion/${d}`)},[n]);const b=(j,y=null)=>{s(j),r(y)},h=()=>{switch(d){case"jugadores":return e.jsx(Ie,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"partidos":return e.jsx(Le,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"publicaciones":return e.jsx(He,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"actas":return e.jsx(Ke,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"usuarios":return e.jsx(Ye,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"retos":return e.jsx(Ze,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"imagenes":return e.jsx(et,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"pabellones":return e.jsx(tt,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"patrocinadores":return e.jsx(nt,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"familias":return e.jsx(rt,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"ciclos":return e.jsx(at,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"centros":return e.jsx(ot,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});case"estudios":return e.jsx(lt,{datosIniciales:c,onGuardar:()=>s(null),onCancelar:()=>s(null)});default:return e.jsx("div",{children:"Formulario no definido para esta sección."})}},v=()=>{switch(d){case"torneo":return e.jsx(Ee,{onModoCambio:b});case"equipos":return e.jsx(ue,{onModoCambio:b});case"jugadores":return e.jsx(he,{onModoCambio:b});case"partidos":return e.jsx(me,{onModoCambio:b});case"publicaciones":return e.jsx(pe,{onModoCambio:b});case"actas":return e.jsx(be,{onModoCambio:b});case"usuarios":return e.jsx(fe,{onModoCambio:b});case"retos":return e.jsx(xe,{onModoCambio:b});case"imagenes":return e.jsx(ge,{onModoCambio:b});case"patrocinadores":return e.jsx(je,{onModoCambio:b});case"familias":return e.jsx(ve,{onModoCambio:b});case"ciclos":return e.jsx(ye,{onModoCambio:b});case"centros":return e.jsx(Ce,{onModoCambio:b});case"estudios":return e.jsx(Ne,{onModoCambio:b});case"inscripciones":return e.jsx(Se,{onModoCambio:b});default:return e.jsx("div",{children:"CRUD no definido para esta sección."})}};return e.jsxs("div",{className:"d-flex",children:[e.jsx(de,{onSelect:p}),e.jsx("div",{className:"flex-grow-1 p-4",children:n?h():v()})]})}export{ut as default};
