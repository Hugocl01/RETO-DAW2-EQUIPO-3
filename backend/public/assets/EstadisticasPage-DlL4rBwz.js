import{j as e,i as A,r as c,a as P,S as F,e as T,f as $}from"./index-YLr1uvRv.js";import{M as I}from"./react-tooltip.min-YgfD-333.js";function L({equipo:s,fnNavegar:t}){function a(){t(s.slug)}return e.jsxs("div",{className:"row border-bottom py-2",children:[e.jsx("div",{className:"col-6 d-flex flex-row justify-content-center text",onClick:a,children:e.jsxs("div",{className:"d-flex flex-row w-75  ",children:[e.jsx("img",{src:A,alt:`imagen${s.slug}`,style:{width:"20%"},className:"flex-1"}),e.jsx("p",{className:"m-0 justify-self-center text-center w-100 h5",children:s.slug})]})}),e.jsx("div",{className:"col-2 text-center h5",children:s.stats.goles}),e.jsx("div",{className:"col-2 text-center h5",children:s.stats.tarjetas_amarillas}),e.jsx("div",{className:"col-2 text-center h5",children:s.stats.tarjetas_rojas})]})}function M(){const[s,t]=c.useState(),[a,n]=c.useState(!0),[r,b]=c.useState({campo:"",direccion:"asc"}),[y,q]=c.useState(),m=P();if(c.useEffect(()=>{const j=async()=>{var u,x,p;try{const l=await $("equipos");if(l.status==="success"&&Array.isArray(l.equipos)){sessionStorage.setItem("equipos",JSON.stringify(l.equipos));const v=[...l.equipos].sort((w,J)=>J.stats.goles-w.stats.goles);t(v)}else q({tipo:"error",mensaje:"Hubo un problema al obtener los equipos."})}catch(l){q({tipo:((u=l.response)==null?void 0:u.status)||l.name,mensaje:((p=(x=l.response)==null?void 0:x.data)==null?void 0:p.message)||"No hay equipos disponibles."})}finally{n(!1)}},i=sessionStorage.getItem("equipos");if(i){const u=JSON.parse(i).sort((x,p)=>p.stats.goles-x.stats.goles);t(u),n(!1)}else j();window.scrollTo(0,0)},[]),a)return e.jsx(F,{});if(y)return e.jsx(T,{tipo:y.tipo,mensaje:y.mensaje});function k(j){m(`/estadisticas/${j}`)}function C(j){let i=j.target.dataset.campo;const u=r.campo===i&&r.direccion==="asc"?"desc":"asc";b({campo:i,direccion:u});const x=s.sort((p,l)=>{let v=p.stats[i],w=l.stats[i];return u==="asc"?v-w:w-v});t(x)}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"tabla container-fluid mt-5",children:[e.jsxs("div",{className:"row bg-primary text-white rounded-top border-bottom py-2",children:[e.jsx("div",{className:"col-md-6 text-center font-weight-bold cursor-pointer h5",children:"Nombre"}),e.jsxs("div",{className:"col-md-2 text-center cursor-pointer h5","data-campo":"goles",onClick:C,children:["Goles"," ",r.campo==="goles"?r.direccion==="asc"?"⬆":"⬇":""]}),e.jsxs("div",{className:"col-md-2 text-center cursor-pointer h5","data-campo":"tarjetas_amarillas",onClick:C,children:["Amarillas"," ",r.campo==="tarjetas_amarillas"?r.direccion==="asc"?"⬆":"⬇":""]}),e.jsxs("div",{className:"col-md-2 text-center cursor-pointer h5","data-campo":"tarjetas_rojas",onClick:C,children:["Rojas"," ",r.campo==="tarjetas_rojas"?r.direccion==="asc"?"⬆":"⬇":""]})]}),s.map((j,i)=>e.jsx(L,{equipo:j,fnNavegar:k},i))]})})}function R({jugador:s,fnNavegarEquipo:t,fnNavegarJugador:a}){function n(b){b.stopPropagation(),t(s.equipo)}function r(){a(s.slug)}return e.jsxs("div",{className:"row border-bottom py-2",onClick:r,children:[e.jsx("div",{className:"col-5 col-md-6 d-flex flex-row justify-content-center text-center",children:e.jsxs("div",{className:"d-flex flex-row w-75",children:[e.jsx("img",{src:A,alt:`imagen${s.equipo}`,style:{width:"20%"},"data-tooltip-id":"imgEquipo","data-tooltip-content":s.equipo,"data-tooltip-float":!0,onClick:n}),e.jsx(I,{id:"imgEquipo"}),e.jsx("p",{className:"m-0 justify-self-center text-center  w-100 h5",children:s.nombre})]})}),e.jsx("div",{className:"col-2 col-md-2 text-center h5",children:s.stats.goles}),e.jsx("div",{className:" col-2 col-md-2 text-center h5",children:s.stats.tarjetas_amarillas}),e.jsx("div",{className:"col-3 col-md-2 text-center h5",children:s.stats.tarjetas_rojas})]})}function H({paginaActual:s,totalPaginas:t,siguientePagina:a,paginaAnterior:n}){return e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 d-flex justify-content-between mt-4",children:[e.jsx("button",{className:"btn btn-primary mx-2",onClick:n,disabled:s===1,children:"Anterior"}),e.jsx("p",{children:s}),e.jsx("button",{className:"btn btn-primary mx-2",onClick:a,disabled:s===t,children:"Siguiente"})]})})}function z(){const[s,t]=c.useState([]),[a,n]=c.useState(1),[r,b]=c.useState(0),[y,q]=c.useState(!0),[m,k]=c.useState({campo:"",direccion:"asc"}),[C,j]=c.useState(""),[i,u]=c.useState(),x=P(),p=10;if(c.useEffect(()=>{const o=async()=>{var d,h,N;try{const f=await $("jugadores");if(f.status==="success"){sessionStorage.setItem("jugadores",JSON.stringify(f.jugadores));const E=[...f.jugadores].sort((S,G)=>G.stats.goles-S.stats.goles);t(E),b(E.length)}else u({tipo:"error",mensaje:"Hubo un problema al obtener los jugadores."})}catch(f){u({tipo:((d=f.response)==null?void 0:d.status)||f.name,mensaje:((N=(h=f.response)==null?void 0:h.data)==null?void 0:N.message)||"No hay jugadores disponibles."})}finally{q(!1)}},g=sessionStorage.getItem("jugadores");if(g){const d=JSON.parse(g).sort((h,N)=>N.stats.goles-h.stats.goles);t(d),b(d.length),q(!1)}else o();window.scrollTo(0,0)},[]),y)return e.jsx(F,{});if(i)return e.jsx(T,{tipo:i.tipo,mensaje:i.mensaje});function l(o){x(`/estadisticas/${o}`)}function v(o){x(`/estadisticas/${o}`)}function w(o,g,d){const h=g*d,N=h-d;return o.slice(N,h)}const J=()=>{a<Math.ceil(r/p)&&n(a+1)},B=()=>{a>1&&n(a-1)};function O(o){let g=o.currentTarget.dataset.campo;const d=m.campo===g&&m.direccion==="asc"?"desc":"asc";k({campo:g,direccion:d});const h=[...s].sort((N,f)=>{let E=N.stats[g]||0,S=f.stats[g]||0;return d==="asc"?E-S:S-E});t(h),n(1)}function D(o){j(o.target.value.toLowerCase()),n(1)}const _=s.filter(o=>o.nombre.toLowerCase().includes(C));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"tabla container-fluid mt-5",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 p-0 mb-4 w-100 border",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar por nombre...",onChange:D})})}),e.jsxs("div",{className:"row bg-primary text-white rounded-top border-bottom py-2",children:[e.jsx("div",{className:"col-5 col-md-6 text-center font-weight-bold cursor-pointer h5",children:e.jsx("p",{children:"Nombre"})}),e.jsxs("div",{className:"col-3 col-md-2 text-center cursor-pointer h5","data-campo":"goles",onClick:O,children:[e.jsx("p",{children:"Goles"})," ",m.campo==="goles"?m.direccion==="asc"?"⬆":"⬇":""]}),e.jsxs("div",{className:"col-2 col-md-2 text-center cursor-pointer h5","data-campo":"tarjetas_amarillas",onClick:O,children:[e.jsx("p",{children:"Amarillas"})," ",m.campo==="tarjetas_amarillas"?m.direccion==="asc"?"⬆":"⬇":""]}),e.jsxs("div",{className:"col-2 col-md-2 text-center cursor-pointer h5","data-campo":"tarjetas_rojas",onClick:O,children:[e.jsx("p",{children:"Rojas"})," ",m.campo==="tarjetas_rojas"?m.direccion==="asc"?"⬆":"⬇":""]})]}),w(_,a,p).map(o=>e.jsx(R,{jugador:o,fnNavegarEquipo:l,fnNavegarJugador:v},o.slug)),e.jsx(H,{paginaActual:a,totalPaginas:Math.ceil(_.length/p),siguientePagina:J,paginaAnterior:B})]})})}function U(){const[s,t]=c.useState("jugadores");function a(n){let r=n.target.dataset.accion;t(r==="equipos"?"equipos":"jugadores")}return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:"Estadisticas"}),e.jsxs("section",{className:"container-fluid mt-5 w-75",children:[e.jsx("div",{className:"row",children:e.jsx("h1",{className:"mx-auto w-auto text-center",children:"Estadísticas"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 d-flex flex-row justify-content-start my-2",children:[e.jsx("button",{className:"btn btn-primary mx-2","data-accion":"jugadores",onClick:a,children:"Jugadores"}),e.jsx("button",{className:"btn btn-primary mx-2","data-accion":"equipos",onClick:a,children:"Equipo"})]})}),s==="jugadores"?e.jsx(e.Fragment,{children:e.jsx(z,{})}):e.jsx(e.Fragment,{children:e.jsx(M,{})})]})]})}export{U as default};
